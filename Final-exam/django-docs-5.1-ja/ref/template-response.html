<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>TemplateResponse および SimpleTemplateResponse &#8212; Django 5.1.6.dev20250122212402 ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=34bb78ad" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css?v=bf4d74af" />
    <script src="../_static/documentation_options.js?v=d2885b0a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4755f45a"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Unicode データ" href="unicode.html" />
    <link rel="prev" title="Python プログラマーのための Django テンプレート言語" href="templates/api.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django 5.1.6.dev20250122212402 ドキュメント</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="templates/api.html" title="Python プログラマーのための Django テンプレート言語">previous</a>
     |
    <a href="index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="unicode.html" title="Unicode データ">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-template-response">
            
  <section id="s-module-django.template.response">
<span id="s-templateresponse-and-simpletemplateresponse"></span><span id="module-django.template.response"></span><span id="templateresponse-and-simpletemplateresponse"></span><h1><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> および <code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code><a class="headerlink" href="#module-django.template.response" title="Link to this heading">¶</a></h1>
<p>標準の <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponse</span></code></a> オブジェクトは静的な構造体です。構築時にあらかじめレンダリングされたコンテンツのブロックが提供され、そのコンテンツは変更可能ですが、簡単に変更できる形ではありません。</p>
<p>しかし、デコレータやミドルウェアが、 ビューでレスポンスが作成された後にレスポンスを変更できるようにすることは、 場合によっては有益なこともあります。たとえば、使用するテンプレートを変更したり、追加データをコンテキストに追加したりしたくなるかもしれません。</p>
<p>TemplateResponse はそのための方法を提供します。基本的な <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpResponse</span></code></a> オブジェクトとは異なり、 TemplateResponse オブジェクトはレスポンスを計算するためにビューから提供されたテンプレートとコンテキストの詳細を保持します。レスポンスの最終的な出力は、レスポンス処理の後半で必要になるまで計算されません。</p>
<section id="s-simpletemplateresponse-objects">
<span id="simpletemplateresponse-objects"></span><h2><code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code> オブジェクト<a class="headerlink" href="#simpletemplateresponse-objects" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SimpleTemplateResponse</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L10"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<section id="s-attributes">
<span id="attributes"></span><h3>属性<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.template_name">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">template_name</span></span><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.template_name" title="Link to this definition">¶</a></dt>
<dd><p>レンダリングするテンプレートの名前です。 <a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_template()</span></code></a> が返すような）バックエンド依存のテンプレートオブジェクト、テンプレート名、またはテンプレート名のリストを受け入れます。</p>
<p>例: <code class="docutils literal notranslate"><span class="pre">['foo.html',</span> <span class="pre">'path/to/bar.html']</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.context_data">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">context_data</span></span><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.context_data" title="Link to this definition">¶</a></dt>
<dd><p>テンプレートをレンダリングするときに使用するコンテキストデータ。 これは <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> でなければなりません。</p>
<p>例: <code class="docutils literal notranslate"><span class="pre">{'foo':</span> <span class="pre">123}</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.rendered_content">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">rendered_content</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L82"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.rendered_content" title="Link to this definition">¶</a></dt>
<dd><p>現在のテンプレートとコンテキストデータを使ってレンダリングされた、レスポンスコンテンツの現在の値。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.is_rendered">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">is_rendered</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L122"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.is_rendered" title="Link to this definition">¶</a></dt>
<dd><p>レスポンスの内容がレンダリングされたかどうかを示す真偽値。</p>
</dd></dl>

</section>
<section id="s-methods">
<span id="methods"></span><h3>メソッド<a class="headerlink" href="#methods" title="Link to this heading">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.__init__">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">__init__</span></span>(<em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">using</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L13"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.__init__" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code></a> オブジェクトを、与えられたテンプレート、コンテキスト、コンテンツタイプ、HTTP ステータス、文字コードでインスタンス化します。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">template</span></code></dt><dd><p>(<a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_template()</span></code></a> が返すような) バックエンド依存のテンプレートオブジェクト、テンプレートの名前、またはテンプレート名のリスト。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">context</span></code></dt><dd><p>テンプレートコンテキストに追加する値の <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> 。デフォルトでは空の辞書です。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content_type</span></code></dt><dd><p>HTTP の <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> ヘッダに含まれる値で、MIME タイプ指定と文字セットエンコーディングを含みます。もし <code class="docutils literal notranslate"><span class="pre">content_type</span></code> が指定されていれば、その値が使われます。それ以外の場合は <code class="docutils literal notranslate"><span class="pre">'text/html'</span></code> が使用されます。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt><dd><p>レスポンスの HTTP ステータスコード</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">charset</span></code></dt><dd><p>レスポンスがエンコードされる文字コード。省略された場合は <code class="docutils literal notranslate"><span class="pre">content_type</span></code> から抽出され、それが失敗した場合は <a class="reference internal" href="settings.html#std-setting-DEFAULT_CHARSET"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_CHARSET</span></code></a> の設定が使用されます。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">using</span></code></dt><dd><p>テンプレートを読み込むために使用するテンプレートエンジンの <a class="reference internal" href="settings.html#std-setting-TEMPLATES-NAME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">NAME</span></code></a> を指定します。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">headers</span></code></dt><dd><p>レスポンスに追加するHTTPヘッダーの <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> 。</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.resolve_context">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">resolve_context</span></span>(<em class="sig-param"><span class="n"><span class="pre">context</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L78"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.resolve_context" title="Link to this definition">¶</a></dt>
<dd><p>テンプレートのレンダリングに使用されるコンテキストデータを前処理します。コンテキストデータの <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> を受け取ります。デフォルトでは同じ <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> を返します。</p>
<p>コンテキストをカスタマイズするには、このメソッドをオーバーライドします。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.resolve_template">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">resolve_template</span></span>(<em class="sig-param"><span class="n"><span class="pre">template</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L69"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.resolve_template" title="Link to this definition">¶</a></dt>
<dd><p>レンダリングに使用するテンプレートのインスタンスを解決します。(<a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_template()</span></code></a> が返すような) バックエンド依存のテンプレートオブジェクト、テンプレート名、またはテンプレート名のリストを受け付けます。</p>
<p>レンダリングするバックエンド依存のテンプレートオブジェクトインスタンスを返します。</p>
<p>テンプレートの読み込みをカスタマイズするには、このメソッドをオーバーライドします。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.add_post_render_callback">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">add_post_render_callback</span></span>()<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L94"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.add_post_render_callback" title="Link to this definition">¶</a></dt>
<dd><p>レンダリングが行われた後に呼び出されるコールバックを追加します。このフックを使用すると、特定の処理 (キャッシュなど) をレンダリングが完了するまで延期できます。</p>
<p><a class="reference internal" href="#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code></a> がすでにレンダリングされている場合、コールバックは直ちに呼び出されます。</p>
<p>呼び出されると、コールバックは単一の引数、つまりレンダリングされた <a class="reference internal" href="#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code></a> インスタンスを渡されます。</p>
<p>コールバックが <code class="docutils literal notranslate"><span class="pre">None</span></code> 以外の値を返した場合、元のレスポンスオブジェクトの代わりにこの値がレスポンスとして使用されます（次のレンダリング後コールバックなどに渡されます）。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.template.response.SimpleTemplateResponse.render">
<span class="sig-prename descclassname"><span class="pre">SimpleTemplateResponse.</span></span><span class="sig-name descname"><span class="pre">render</span></span>()<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L105"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.SimpleTemplateResponse.render" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">response.content</span></code> を <a class="reference internal" href="#django.template.response.SimpleTemplateResponse.rendered_content" title="django.template.response.SimpleTemplateResponse.rendered_content"><code class="xref py py-attr docutils literal notranslate"><span class="pre">SimpleTemplateResponse.rendered_content</span></code></a> で取得した結果にセットし、全てのレンダリング後コールバックを実行し、結果のレスポンスオブジェクトを返します。</p>
<p><code class="docutils literal notranslate"><span class="pre">render()</span></code> は最初に呼び出されたときだけ効果を発揮します。それ以降の呼び出しでは、最初の呼び出しで得られた結果を返します。</p>
</dd></dl>

</section>
</section>
<section id="s-templateresponse-objects">
<span id="templateresponse-objects"></span><h2><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> オブジェクト<a class="headerlink" href="#templateresponse-objects" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.template.response.TemplateResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TemplateResponse</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L147"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.TemplateResponse" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> は <a class="reference internal" href="#django.template.response.SimpleTemplateResponse" title="django.template.response.SimpleTemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code></a> のサブクラスで、現在の <a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpRequest</span></code></a> について知っています。</p>
</dd></dl>

<section id="s-id1">
<span id="id1"></span><h3>メソッド<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="django.template.response.TemplateResponse.__init__">
<span class="sig-prename descclassname"><span class="pre">TemplateResponse.</span></span><span class="sig-name descname"><span class="pre">__init__</span></span>(<em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">using</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">headers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/template/response.py#L150"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.template.response.TemplateResponse.__init__" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> オブジェクトを、与えられたリクエスト、テンプレート、コンテキスト、コンテンツタイプ、HTTP ステータス、文字コードでインスタンス化します。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">request</span></code></dt><dd><p><a class="reference internal" href="request-response.html#django.http.HttpRequest" title="django.http.HttpRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">HttpRequest</span></code></a> インスタンスです。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">template</span></code></dt><dd><p>(<a class="reference internal" href="../topics/templates.html#django.template.loader.get_template" title="django.template.loader.get_template"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_template()</span></code></a> が返すような) バックエンド依存のテンプレートオブジェクト、テンプレートの名前、またはテンプレート名のリスト。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">context</span></code></dt><dd><p>テンプレートコンテキストに追加する値の <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> 。デフォルトでは空の辞書です。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">content_type</span></code></dt><dd><p>HTTP の <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> ヘッダに含まれる値で、MIME タイプ指定と文字セットエンコーディングを含みます。もし <code class="docutils literal notranslate"><span class="pre">content_type</span></code> が指定されていれば、その値が使われます。それ以外の場合は <code class="docutils literal notranslate"><span class="pre">'text/html'</span></code> が使用されます。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt><dd><p>レスポンスの HTTP ステータスコード</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">charset</span></code></dt><dd><p>レスポンスがエンコードされる文字コード。省略された場合は <code class="docutils literal notranslate"><span class="pre">content_type</span></code> から抽出され、それが失敗した場合は <a class="reference internal" href="settings.html#std-setting-DEFAULT_CHARSET"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_CHARSET</span></code></a> の設定が使用されます。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">using</span></code></dt><dd><p>テンプレートを読み込むために使用するテンプレートエンジンの <a class="reference internal" href="settings.html#std-setting-TEMPLATES-NAME"><code class="xref std std-setting docutils literal notranslate"><span class="pre">NAME</span></code></a> を指定します。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">headers</span></code></dt><dd><p>レスポンスに追加するHTTPヘッダーの <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> 。</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="s-the-rendering-process">
<span id="the-rendering-process"></span><h2>レンダリングプロセス<a class="headerlink" href="#the-rendering-process" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> インスタンスをクライアントに返す前に、レンダリングする必要があります。レンダリングプロセスはテンプレートとコンテキストの中間表現を受け取り、クライアントに提供できる最終的なバイトストリームに変えます。</p>
<p><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> がレンダリングされる状況は3つあります：</p>
<ul class="simple">
<li><p>TemplateResponse インスタンスが <a class="reference internal" href="#django.template.response.SimpleTemplateResponse.render" title="django.template.response.SimpleTemplateResponse.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SimpleTemplateResponse.render()</span></code></a> メソッドを使用して明示的にレンダリングされた場合。</p></li>
<li><p>レスポンスの内容を <code class="docutils literal notranslate"><span class="pre">response.content</span></code> に代入して明示的にセットした場合。</p></li>
<li><p>テンプレート・レスポンス・ミドルウェアを通過した後、レスポンス・ミドルウェアを通過する前。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> は一度しかレンダリングできません。最初に <a class="reference internal" href="#django.template.response.SimpleTemplateResponse.render" title="django.template.response.SimpleTemplateResponse.render"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SimpleTemplateResponse.render()</span></code></a> を呼び出すと、レスポンスの内容がセットされます。それ以降にレンダリングを呼び出しても、レスポンスの内容は変更されません。</p>
<p>しかし、<code class="docutils literal notranslate"><span class="pre">response.content</span></code> を明示的に代入すると、その変更は常に適用されます。コンテンツを強制的に再レンダリングしたい場合は、以下のようにレンダリングされたコンテンツを再評価し、レスポンスのコンテンツを手動で割り当てます：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="go"># Set up a rendered TemplateResponse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">django.template.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">TemplateResponse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">TemplateResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;original.html&quot;</span><span class="p">,</span> <span class="p">{})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="go">Original content</span>

<span class="go"># Re-rendering doesn&#39;t change content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;new.html&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="go">Original content</span>

<span class="go"># Assigning content does change, no render() call required</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">rendered_content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="go">New content</span>
</pre></div>
</div>
<section id="s-post-render-callbacks">
<span id="post-render-callbacks"></span><h3>レンダリング後のコールバック<a class="headerlink" href="#post-render-callbacks" title="Link to this heading">¶</a></h3>
<p>キャッシュのようないくつかの操作は、レンダリングされていないテンプレートでは実行できません。それらは完全に完成し、レンダリングされたレスポンスに対して実行されなければなりません。</p>
<p>ミドルウェアを使用している場合は、それが可能です。ミドルウェアは、ビューからの終了時にレスポンスを処理する複数の機会を提供します。レスポンスミドルウェアに処理を記述すれば、テンプレートのレンダリングが行われた後に実行されることが保証されます。</p>
<p>しかし、デコレータを使用している場合は、そのような機会はありません。デコレータで定義された処理は、即座に実行されます。</p>
<p>これを避けるために(そして他の類似のユースケースを補うために) <a class="reference internal" href="#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> ではレンダリングが完了したときに呼び出されるコールバックを登録できます。このコールバックを使うことで、レンダリングされたコンテンツが利用可能になるまで、重要な処理を延期できます。</p>
<p>レンダリング後のコールバックを定義するには、response を引数に取る関数を定義し、その関数をテンプレートの response に登録します：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.template.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">TemplateResponse</span>


<span class="k">def</span><span class="w"> </span><span class="nf">my_render_callback</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
    <span class="c1"># Do content-sensitive processing</span>
    <span class="n">do_post_processing</span><span class="p">()</span>


<span class="k">def</span><span class="w"> </span><span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c1"># Create a response</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">TemplateResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;mytemplate.html&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="c1"># Register the callback</span>
    <span class="n">response</span><span class="o">.</span><span class="n">add_post_render_callback</span><span class="p">(</span><span class="n">my_render_callback</span><span class="p">)</span>
    <span class="c1"># Return the response</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">my_render_callback()</span></code> は <code class="docutils literal notranslate"><span class="pre">mytemplate.html</span></code> がレンダリングされた後に呼び出され、完全にレンダリングされた <a class="reference internal" href="#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> インスタンスが引数として渡されます。</p>
<p>テンプレートが既にレンダリングされている場合、コールバックは直ちに呼び出されます。</p>
</section>
</section>
<section id="s-using-templateresponse-and-simpletemplateresponse">
<span id="using-templateresponse-and-simpletemplateresponse"></span><h2><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> および <code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code> を使用する<a class="headerlink" href="#using-templateresponse-and-simpletemplateresponse" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> オブジェクトは、通常の <a class="reference internal" href="request-response.html#django.http.HttpResponse" title="django.http.HttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.http.HttpResponse</span></code></a> が使用できる場所ならどこでも使用できます。また、 <a class="reference internal" href="../topics/http/shortcuts.html#django.shortcuts.render" title="django.shortcuts.render"><code class="xref py py-func docutils literal notranslate"><span class="pre">render()</span></code></a> を呼び出す代わりとしても使用できます。</p>
<p>たとえば、以下のビューはテンプレートとクエリセットを含むコンテキストを持つ <a class="reference internal" href="#django.template.response.TemplateResponse" title="django.template.response.TemplateResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemplateResponse</span></code></a> を返します：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.template.response</span><span class="w"> </span><span class="kn">import</span> <span class="n">TemplateResponse</span>


<span class="k">def</span><span class="w"> </span><span class="nf">blog_index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">TemplateResponse</span><span class="p">(</span>
        <span class="n">request</span><span class="p">,</span> <span class="s2">&quot;entry_list.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;entries&quot;</span><span class="p">:</span> <span class="n">Entry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()}</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
</section>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> および <code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code></a><ul>
<li><a class="reference internal" href="#simpletemplateresponse-objects"><code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code> オブジェクト</a><ul>
<li><a class="reference internal" href="#attributes">属性</a></li>
<li><a class="reference internal" href="#methods">メソッド</a></li>
</ul>
</li>
<li><a class="reference internal" href="#templateresponse-objects"><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> オブジェクト</a><ul>
<li><a class="reference internal" href="#id1">メソッド</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-rendering-process">レンダリングプロセス</a><ul>
<li><a class="reference internal" href="#post-render-callbacks">レンダリング後のコールバック</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-templateresponse-and-simpletemplateresponse"><code class="docutils literal notranslate"><span class="pre">TemplateResponse</span></code> および <code class="docutils literal notranslate"><span class="pre">SimpleTemplateResponse</span></code> を使用する</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="templates/api.html"
                          title="前の章へ">Python プログラマーのための Django テンプレート言語</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="unicode.html"
                          title="次の章へ">Unicode データ</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/ref/template-response.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">1月 22, 2025</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="templates/api.html" title="Python プログラマーのための Django テンプレート言語">previous</a>
     |
    <a href="index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="unicode.html" title="Unicode データ">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>