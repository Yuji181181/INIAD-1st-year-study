<!DOCTYPE html>

<html lang="ja" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GeoDjango モデル API &#8212; Django 5.1.6.dev20250122212402 ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=34bb78ad" />
    <link rel="stylesheet" type="text/css" href="../../../_static/default.css?v=bf4d74af" />
    <script src="../../../_static/documentation_options.js?v=d2885b0a"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/translations.js?v=4755f45a"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="GeoDjango データベース API" href="db-api.html" />
    <link rel="prev" title="SpatiaLite のインストール" href="install/spatialite.html" />



 
<script src="../../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../../index.html">Django 5.1.6.dev20250122212402 ドキュメント</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../../index.html">Home</a>  |
        <a title="Table of contents" href="../../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../../genindex.html">Index</a>  |
        <a title="Module index" href="../../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="install/spatialite.html" title="SpatiaLite のインストール">previous</a>
     |
    <a href="../../index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="db-api.html" title="GeoDjango データベース API">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-contrib-gis-model-api">
            
  <section id="s-module-django.contrib.gis.db.models">
<span id="s-geodjango-model-api"></span><span id="module-django.contrib.gis.db.models"></span><span id="geodjango-model-api"></span><h1>GeoDjango モデル API<a class="headerlink" href="#module-django.contrib.gis.db.models" title="Link to this heading">¶</a></h1>
<p>このドキュメントでは GeoDjango Model API の詳細を説明します。この節では、次の <a class="reference external" href="https://en.wikipedia.org/wiki/ZIP_code">ZIP code</a> と <a class="reference external" href="https://en.wikipedia.org/wiki/Digital_elevation_model">Digital Elevation Model</a> の地理情報モデルを例として使います:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.gis.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Zipcode</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">poly</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PolygonField</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Elevation</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">rast</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">RasterField</span><span class="p">()</span>
</pre></div>
</div>
<section id="s-spatial-field-types">
<span id="spatial-field-types"></span><h2>空間フィールドのタイプ<a class="headerlink" href="#spatial-field-types" title="Link to this heading">¶</a></h2>
<p>空間フィールドは一連のジオメトリフィールド型と1つのラスターフィールド型で構成されます。各ジオメトリフィールド型は OpenGIS Simple Features 仕様  <a class="footnote-reference brackets" href="#fnogc" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> に対応しています。ラスターデータに対するこのような標準は存在しません。</p>
<section id="s-geometryfield">
<span id="geometryfield"></span><h3><code class="docutils literal notranslate"><span class="pre">GeometryField</span></code><a class="headerlink" href="#geometryfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.GeometryField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GeometryField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L227"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.GeometryField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>ジオメトリフィールドの基本クラス。</p>
</section>
<section id="s-pointfield">
<span id="pointfield"></span><h3><code class="docutils literal notranslate"><span class="pre">PointField</span></code><a class="headerlink" href="#pointfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.PointField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PointField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L328"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.PointField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.Point" title="django.contrib.gis.geos.Point"><code class="xref py py-class docutils literal notranslate"><span class="pre">Point</span></code></a> を格納します。</p>
</section>
<section id="s-linestringfield">
<span id="linestringfield"></span><h3><code class="docutils literal notranslate"><span class="pre">LineStringField</span></code><a class="headerlink" href="#linestringfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.LineStringField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LineStringField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L335"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.LineStringField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.LineString" title="django.contrib.gis.geos.LineString"><code class="xref py py-class docutils literal notranslate"><span class="pre">LineString</span></code></a> を格納します。</p>
</section>
<section id="s-polygonfield">
<span id="polygonfield"></span><h3><code class="docutils literal notranslate"><span class="pre">PolygonField</span></code><a class="headerlink" href="#polygonfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.PolygonField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PolygonField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L342"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.PolygonField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.Polygon" title="django.contrib.gis.geos.Polygon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polygon</span></code></a> を格納します。</p>
</section>
<section id="s-multipointfield">
<span id="multipointfield"></span><h3><code class="docutils literal notranslate"><span class="pre">MultiPointField</span></code><a class="headerlink" href="#multipointfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.MultiPointField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultiPointField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L349"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.MultiPointField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.MultiPoint" title="django.contrib.gis.geos.MultiPoint"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiPoint</span></code></a> を格納します。</p>
</section>
<section id="s-multilinestringfield">
<span id="multilinestringfield"></span><h3><code class="docutils literal notranslate"><span class="pre">MultiLineStringField</span></code><a class="headerlink" href="#multilinestringfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.MultiLineStringField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultiLineStringField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L356"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.MultiLineStringField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.MultiLineString" title="django.contrib.gis.geos.MultiLineString"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiLineString</span></code></a> を格納します。</p>
</section>
<section id="s-multipolygonfield">
<span id="multipolygonfield"></span><h3><code class="docutils literal notranslate"><span class="pre">MultiPolygonField</span></code><a class="headerlink" href="#multipolygonfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.MultiPolygonField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultiPolygonField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L363"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.MultiPolygonField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.MultiPolygon" title="django.contrib.gis.geos.MultiPolygon"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiPolygon</span></code></a> を格納します。</p>
</section>
<section id="s-geometrycollectionfield">
<span id="geometrycollectionfield"></span><h3><code class="docutils literal notranslate"><span class="pre">GeometryCollectionField</span></code><a class="headerlink" href="#geometrycollectionfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.GeometryCollectionField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GeometryCollectionField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L370"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.GeometryCollectionField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="geos.html#django.contrib.gis.geos.GeometryCollection" title="django.contrib.gis.geos.GeometryCollection"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeometryCollection</span></code></a> を格納します。</p>
</section>
<section id="s-rasterfield">
<span id="rasterfield"></span><h3><code class="docutils literal notranslate"><span class="pre">RasterField</span></code><a class="headerlink" href="#rasterfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.RasterField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RasterField</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/contrib/gis/db/models/fields.py#L390"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.contrib.gis.db.models.RasterField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="gdal.html#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> を格納します。</p>
<p><code class="docutils literal notranslate"><span class="pre">RasterField</span></code> は現在、PostGIS バックエンドのみで実装されています。</p>
</section>
</section>
<section id="s-spatial-field-options">
<span id="spatial-field-options"></span><h2>空間フィールドのオプション<a class="headerlink" href="#spatial-field-options" title="Link to this heading">¶</a></h2>
<p>Django のモデルフィールドで利用できる通常の <a class="reference internal" href="../../models/fields.html#common-model-field-options"><span class="std std-ref">フィールドオプション</span></a> に加えて、空間フィールドには以下の追加オプションがあります。すべてオプションです。</p>
<section id="s-srid">
<span id="srid"></span><h3><code class="docutils literal notranslate"><span class="pre">srid</span></code><a class="headerlink" href="#srid" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.BaseSpatialField.srid">
<span class="sig-prename descclassname"><span class="pre">BaseSpatialField.</span></span><span class="sig-name descname"><span class="pre">srid</span></span><a class="headerlink" href="#django.contrib.gis.db.models.BaseSpatialField.srid" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>ジオメトリフィールドの SRID <a class="footnote-reference brackets" href="#fnogcsrid" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> (Spatial Reference System Identity) を指定した値に設定します。デフォルトは 4326 (別名 <a class="reference external" href="https://en.wikipedia.org/wiki/WGS84">WGS84</a> 、単位は緯度経度)。</p>
<section id="s-selecting-an-srid">
<span id="s-id6"></span><span id="selecting-an-srid"></span><span id="id6"></span><h4>SRID の選択<a class="headerlink" href="#selecting-an-srid" title="Link to this heading">¶</a></h4>
<p>モデルに適切な SRID を選択することは、開発者が慎重に検討すべき重要な決定事項です。SRIDは、空間データベースのデータを解釈するために使用される投影システムに対応する整数指定子です。 <a class="footnote-reference brackets" href="#fnsrid" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> 投影システムは、場所を特定する座標にコンテキストを与えます。測地学 <a class="reference external" href="https://en.wikipedia.org/wiki/Geodesy">geodesy</a> の詳細はこのドキュメントの範囲外ですが、一般的な問題は、地球は球形であり、地球の表現 (紙の地図やウェブマップなど) は球形ではないということです。</p>
<p>ほとんどの人は、緯度と経度を使って地表上の位置を参照することに慣れています。しかし、緯度と経度は距離ではなく角度です。言い換えれば、平面上の2点間の最短経路は直線ですが、(地球のような) 曲面上の2点間の最短経路は、<a class="reference external" href="https://en.wikipedia.org/wiki/Great_circle">great circle</a> の <em>弧</em> です <a class="footnote-reference brackets" href="#fnthematic" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> 。したがって、平面単位 (キロメートルやマイルなど) で距離を求めるには、追加の計算が必要になります。地理座標系を使うことは、開発者に後で複雑な問題をもたらすかもしれません。例えば、SpatiaLiteでは、地理座標系を使用してジオメトリ間の距離計算を実行する機能がないため、WGS84で格納された郡の境界から5マイル以内のすべてのポイントを検索するクエリを作成することはできません <a class="footnote-reference brackets" href="#fndist" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a> 。</p>
<p>地球の地表の一部は、二次元またはデカルト平面に投影できます。投影座標系は地域固有のアプリケーションに特に便利であり、たとえば、データベースで <a class="reference external" href="https://spatialreference.org/ref/epsg/2796/">North Kansas</a> エリアのジオメトリだけを扱うことを知っている場合は、その地域固有の投影系を使用することを検討できます。さらに、投影座標系はデカルト単位 (メートルやフィートなど) で定義されており、距離の計算が容易になります。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>PostGISでWGS84の点以外のジオメトリを使用して任意の距離クエリを実行したい場合で、適切なパフォーマンスが必要な場合は、 <a class="reference internal" href="#django.contrib.gis.db.models.GeometryField.geography" title="django.contrib.gis.db.models.GeometryField.geography"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GeometryField.geography</span></code></a> キーワードを有効にして、代わりに <a class="reference internal" href="#geography-type"><span class="std std-ref">ジオグラフィデータベース型</span></a> が使用されるようにします。</p>
</div>
<p>追加のリソース:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://spatialreference.org/">spatialreference.org</a>: Djangoを使用した空間参照システムのデータベース。</p></li>
<li><p><a class="reference external" href="https://web.archive.org/web/20080302095452/http://welcome.warnercnr.colostate.edu/class_info/nr502/lg3/datums_coordinates/spcs.html">The State Plane Coordinate System</a>: 米国で使用されている様々な投影系をカバーするウェブサイトです。WGS84のような地理座標系ではなく、米国で遭遇する空間データの多くはこれらの座標系のいずれかになります。</p></li>
</ul>
</section>
</section>
<section id="s-spatial-index">
<span id="spatial-index"></span><h3><code class="docutils literal notranslate"><span class="pre">spatial_index</span></code><a class="headerlink" href="#spatial-index" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.BaseSpatialField.spatial_index">
<span class="sig-prename descclassname"><span class="pre">BaseSpatialField.</span></span><span class="sig-name descname"><span class="pre">spatial_index</span></span><a class="headerlink" href="#django.contrib.gis.db.models.BaseSpatialField.spatial_index" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> です。指定されたジオメトリフィールドに空間インデックスを作成します。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>空間インデックスは通常のデータベースインデックスとは異なる方法で作成されるため、これは <code class="docutils literal notranslate"><span class="pre">db_index</span></code> フィールドオプションとは異なります。具体的には、空間インデックスは通常 R-Tree を使用して作成されますが、通常のデータベースインデックスは B-Tree を使用します。</p>
</div>
</section>
</section>
<section id="s-geometry-field-options">
<span id="s-id15"></span><span id="geometry-field-options"></span><span id="id15"></span><h2>ジオメトリフィールドのオプション<a class="headerlink" href="#geometry-field-options" title="Link to this heading">¶</a></h2>
<p>ジオメトリフィールドには追加オプションがあります。以下のすべてのオプションは任意です。</p>
<section id="s-dim">
<span id="dim"></span><h3><code class="docutils literal notranslate"><span class="pre">dim</span></code><a class="headerlink" href="#dim" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.GeometryField.dim">
<span class="sig-prename descclassname"><span class="pre">GeometryField.</span></span><span class="sig-name descname"><span class="pre">dim</span></span><a class="headerlink" href="#django.contrib.gis.db.models.GeometryField.dim" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このオプションは、ジオメトリフィールドの座標次元をカスタマイズするために使用できます。デフォルトでは、2次元ジオメトリを表すために2に設定されています。それをサポートする空間バックエンドでは、3次元をサポートするために3に設定できます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>現時点では、3Dサポートは PostGIS と SpatiaLite バックエンドに限られています。</p>
</div>
</section>
<section id="s-geography">
<span id="geography"></span><h3><code class="docutils literal notranslate"><span class="pre">geography</span></code><a class="headerlink" href="#geography" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.contrib.gis.db.models.GeometryField.geography">
<span class="sig-prename descclassname"><span class="pre">GeometryField.</span></span><span class="sig-name descname"><span class="pre">geography</span></span><a class="headerlink" href="#django.contrib.gis.db.models.GeometryField.geography" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このオプションを <code class="docutils literal notranslate"><span class="pre">True</span></code> に設定すると、ジオメトリ型ではなくジオグラフィ型のデータベースカラムが作成されます。詳細は以下の <a class="reference internal" href="#geography-type"><span class="std std-ref">ジオグラフィ型</span></a> セクションを参照してください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>ジオグラフィのサポートは PostGIS に限定され、SRID が 4326 に強制されます。</p>
</div>
<section id="s-geography-type">
<span id="s-id16"></span><span id="geography-type"></span><span id="id16"></span><h4>ジオグラフィ (Geography) 型<a class="headerlink" href="#geography-type" title="Link to this heading">¶</a></h4>
<p>ジオグラフィ (geography) 型は、地理座標 (例えばWGS84経度/緯度)で表現された空間特徴をネイティブにサポートします <a class="footnote-reference brackets" href="#fngeography" id="id17" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a> 。ジオメトリ型が使用する平面とは異なり、ジオグラフィ型はデータを球体で表現します。ジオグラフィのカラムに対して行われる距離や計測の操作は、自動的に大円弧の計算を行い、線形単位を返します。言い換えると、2つのジオグラフィに対して <code class="docutils literal notranslate"><span class="pre">ST_Distance</span></code> を呼び出すと、メートル単位の値が返されます (WGS84のジオメトリ列に対して呼び出した場合は度単位になります) 。</p>
<p>地理計算にはより多くの数学が関わるため、地理型に対して使用できる PostGIS 空間ルックアップのサブセットが限られています。具体的には、<a class="reference internal" href="geoquerysets.html#distance-lookups"><span class="std std-ref">距離ルックアップ</span></a> に加えて、ジオグラフィカラム用に利用可能な追加の <a class="reference internal" href="geoquerysets.html#spatial-lookups"><span class="std std-ref">空間ルックアップ</span></a> は以下のみです。</p>
<ul class="simple">
<li><p><a class="reference internal" href="geoquerysets.html#std-fieldlookup-bboverlaps"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">bboverlaps</span></code></a></p></li>
<li><p><a class="reference internal" href="geoquerysets.html#std-fieldlookup-coveredby"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">coveredby</span></code></a></p></li>
<li><p><a class="reference internal" href="geoquerysets.html#std-fieldlookup-covers"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">covers</span></code></a></p></li>
<li><p><a class="reference internal" href="geoquerysets.html#std-fieldlookup-intersects"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">intersects</span></code></a></p></li>
</ul>
<p>入力としてジオグラフィ型をサポートしていない空間ルックアップや集計を使用する必要がある場合、 <a class="reference internal" href="../../models/database-functions.html#django.db.models.functions.Cast" title="django.db.models.functions.Cast"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cast</span></code></a> データベース関数を使用して、クエリの中でジオグラフィカラムをジオメトリ型に変換できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.gis.db.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">PointField</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db.models.functions</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cast</span>

<span class="n">Zipcode</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">geom</span><span class="o">=</span><span class="n">Cast</span><span class="p">(</span><span class="s2">&quot;geography_field&quot;</span><span class="p">,</span> <span class="n">PointField</span><span class="p">()))</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">geom__within</span><span class="o">=</span><span class="n">poly</span>
<span class="p">)</span>
</pre></div>
</div>
<p>詳細については、PostGISのドキュメントに <a class="reference external" href="https://postgis.net/docs/using_postgis_dbmanagement.html#PostGIS_GeographyVSGeometry">ジオメトリ型ではなくジオグラフィ型を使うべき場合</a>. を決定するのに役立つセクションがあります。</p>
<p class="rubric">脚注</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="fnogc" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>OpenGIS Consortium, Inc., <a class="reference external" href="https://www.ogc.org/standard/sfs/">Simple Feature Specification For SQL</a>.</p>
</aside>
<aside class="footnote brackets" id="fnogcsrid" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p><em>See id.</em> at Ch. 2.3.8, p. 39 (Geometry Values and Spatial Reference Systems).</p>
</aside>
<aside class="footnote brackets" id="fnsrid" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">3</a><span class="fn-bracket">]</span></span>
<p>通常、SRID 整数は EPSG (<a class="reference external" href="https://epsg.org/">European Petroleum Survey Group</a>) 識別子に対応します。しかし、空間データベースの空間参照系テーブルで定義されたカスタム投影に関連付けられている場合もあります。</p>
</aside>
<aside class="footnote brackets" id="fnthematic" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">4</a><span class="fn-bracket">]</span></span>
<p>Terry A. Slocum, Robert B. McMaster, Fritz C. Kessler, &amp; Hugh H. Howard, <em>Thematic Cartography and Geographic Visualization</em> (Prentice Hall, 2nd edition), at Ch. 7.1.3.</p>
</aside>
<aside class="footnote brackets" id="fndist" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">5</a><span class="fn-bracket">]</span></span>
<p>この制限は PostGIS には適用されません。</p>
</aside>
<aside class="footnote brackets" id="fngeography" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id17">6</a><span class="fn-bracket">]</span></span>
<p>詳細は <a class="reference external" href="https://postgis.net/docs/using_postgis_dbmanagement.html#PostGIS_Geography">PostGIS Geography Type</a> のドキュメントを参照してください。</p>
</aside>
</aside>
</section>
</section>
</section>
</section>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">GeoDjango モデル API</a><ul>
<li><a class="reference internal" href="#spatial-field-types">空間フィールドのタイプ</a><ul>
<li><a class="reference internal" href="#geometryfield"><code class="docutils literal notranslate"><span class="pre">GeometryField</span></code></a></li>
<li><a class="reference internal" href="#pointfield"><code class="docutils literal notranslate"><span class="pre">PointField</span></code></a></li>
<li><a class="reference internal" href="#linestringfield"><code class="docutils literal notranslate"><span class="pre">LineStringField</span></code></a></li>
<li><a class="reference internal" href="#polygonfield"><code class="docutils literal notranslate"><span class="pre">PolygonField</span></code></a></li>
<li><a class="reference internal" href="#multipointfield"><code class="docutils literal notranslate"><span class="pre">MultiPointField</span></code></a></li>
<li><a class="reference internal" href="#multilinestringfield"><code class="docutils literal notranslate"><span class="pre">MultiLineStringField</span></code></a></li>
<li><a class="reference internal" href="#multipolygonfield"><code class="docutils literal notranslate"><span class="pre">MultiPolygonField</span></code></a></li>
<li><a class="reference internal" href="#geometrycollectionfield"><code class="docutils literal notranslate"><span class="pre">GeometryCollectionField</span></code></a></li>
<li><a class="reference internal" href="#rasterfield"><code class="docutils literal notranslate"><span class="pre">RasterField</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#spatial-field-options">空間フィールドのオプション</a><ul>
<li><a class="reference internal" href="#srid"><code class="docutils literal notranslate"><span class="pre">srid</span></code></a><ul>
<li><a class="reference internal" href="#selecting-an-srid">SRID の選択</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spatial-index"><code class="docutils literal notranslate"><span class="pre">spatial_index</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#geometry-field-options">ジオメトリフィールドのオプション</a><ul>
<li><a class="reference internal" href="#dim"><code class="docutils literal notranslate"><span class="pre">dim</span></code></a></li>
<li><a class="reference internal" href="#geography"><code class="docutils literal notranslate"><span class="pre">geography</span></code></a><ul>
<li><a class="reference internal" href="#geography-type">ジオグラフィ (Geography) 型</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="install/spatialite.html"
                          title="前の章へ">SpatiaLite のインストール</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="db-api.html"
                          title="次の章へ">GeoDjango データベース API</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/ref/contrib/gis/model-api.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">1月 22, 2025</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="install/spatialite.html" title="SpatiaLite のインストール">previous</a>
     |
    <a href="../../index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="db-api.html" title="GeoDjango データベース API">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>