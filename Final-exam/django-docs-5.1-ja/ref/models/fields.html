<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>モデルフィールドリファレンス &#8212; Django 5.1.6.dev20250122212402 ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=34bb78ad" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css?v=bf4d74af" />
    <script src="../../_static/documentation_options.js?v=d2885b0a"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="モデル index リファレンス" href="indexes.html" />
    <link rel="prev" title="モデル" href="index.html" />



 
<script src="../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django 5.1.6.dev20250122212402 ドキュメント</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>  |
        <a title="Table of contents" href="../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../genindex.html">Index</a>  |
        <a title="Module index" href="../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="index.html" title="モデル">previous</a>
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="indexes.html" title="モデル index リファレンス">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-models-fields">
            
  <section id="s-module-django.db.models.fields">
<span id="s-model-field-reference"></span><span id="module-django.db.models.fields"></span><span id="model-field-reference"></span><h1>モデルフィールドリファレンス<a class="headerlink" href="#module-django.db.models.fields" title="Link to this heading">¶</a></h1>
<p>このドキュメントには、Django が提供するフィールドオプション <a class="reference internal" href="#field-options">field options</a> とフィールド型 <a class="reference internal" href="#field-types">field types</a> を含む、<a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> のすべての API リファレンスが記載されています。</p>
<div class="admonition seealso">
<p class="admonition-title">参考</p>
<p>組み込みフィールドが目的に合わない場合は、 <a class="extlink-pypi reference external" href="https://pypi.org/project/django-localflavor/">django-localflavor</a> (<a class="reference external" href="https://django-localflavor.readthedocs.io/">ドキュメント</a>) を試してみてください。これは、特定の国や文化に役立つさまざまなコードを含んでいます。</p>
<p>さらに、簡単に <a class="reference internal" href="../../howto/custom-model-fields.html"><span class="doc">あなた自身の独自のモデルフィールドを作ることもできます</span></a>。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>フィールドは <a class="reference internal" href="#module-django.db.models.fields" title="django.db.models.fields: Built-in field types."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.db.models.fields</span></code></a> に定義されていますが、利便性のために <a class="reference internal" href="../../topics/db/models.html#module-django.db.models" title="django.db.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.db.models</span></code></a> にインポートされています。標準的な慣例としては、<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">django.db</span> <span class="pre">import</span> <span class="pre">models</span></code> を使用し、フィールドを <code class="docutils literal notranslate"><span class="pre">models.&lt;Foo&gt;Field</span></code> として参照します。</p>
</div>
<section id="s-field-options">
<span id="s-common-model-field-options"></span><span id="field-options"></span><span id="common-model-field-options"></span><h2>フィールドオプション<a class="headerlink" href="#field-options" title="Link to this heading">¶</a></h2>
<p>以下の引数は全てのフィールドタイプで有効です。全て省略可能です。</p>
<section id="s-null">
<span id="null"></span><h3><code class="docutils literal notranslate"><span class="pre">null</span></code><a class="headerlink" href="#null" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.null">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">null</span></span><a class="headerlink" href="#django.db.models.Field.null" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、Django はデータベース内に <code class="docutils literal notranslate"><span class="pre">NULL</span></code> として空の値を保持します。デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。</p>
<p><a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> や <a class="reference internal" href="#django.db.models.TextField" title="django.db.models.TextField"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextField</span></code></a> のような文字列ベースのフィールドに <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> を使用することは避けてください。文字列ベースのフィールドに <code class="docutils literal notranslate"><span class="pre">null=True</span></code> を設定すると、 <code class="docutils literal notranslate"><span class="pre">NULL</span></code> と「空の文字列」という2通りの値が「データがない」という同じ意味を持つことになります。ほとんどの場合、「データがない」という意味で2通りの値を持つのは冗長であり、Django の規約でも <code class="docutils literal notranslate"><span class="pre">NULL</span></code> ではなく空文字列を使うことになっています。ただ一つの例外は、<a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> に <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> と <code class="docutils literal notranslate"><span class="pre">blank=True</span></code> の両方を指定する場合です。この場合、空の値を持つ複数のオブジェクトを保存するとき、ユニーク制約に違反しないようにするために <code class="docutils literal notranslate"><span class="pre">null=True</span></code> が必要です。</p>
<p>文字列ベースのフィールドでもそれ以外でも、フォーム内で空の値を許可したいときは <code class="docutils literal notranslate"><span class="pre">blank=True</span></code> を指定する必要があります。 <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> パラメーターはデータベースストレージにだけ影響を与えるからです（詳細は <a class="reference internal" href="#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank</span></code></a> を参照）。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>Oracleのデータベースバックエンドを使っているときには、この属性にかかわらず、値 <code class="docutils literal notranslate"><span class="pre">NULL</span></code> が空の文字列を意味するために保持されます。</p>
</div>
</section>
<section id="s-blank">
<span id="blank"></span><h3><code class="docutils literal notranslate"><span class="pre">blank</span></code><a class="headerlink" href="#blank" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.blank">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">blank</span></span><a class="headerlink" href="#django.db.models.Field.blank" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、フィールドはブランクになることが許容されます。デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。</p>
<p><a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> とは異なる点に注意してください。<a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> が純粋にデータベースに関連する一方で、<a class="reference internal" href="#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank</span></code></a> はバリデーションに関連します。フィールドが <code class="docutils literal notranslate"><span class="pre">blank=True</span></code> を持つ場合、フォームバリデーションは空の値のエントリーを許容します。<code class="docutils literal notranslate"><span class="pre">blank=False</span></code> を持つ場合、フィールドは必須となります。</p>
<div class="admonition-supplying-missing-values admonition">
<p class="admonition-title">欠損値の補完</p>
<p><code class="docutils literal notranslate"><span class="pre">blank=True</span></code> は <code class="docutils literal notranslate"><span class="pre">null=False</span></code> のフィールドでも使用できますが、この場合、 <a class="reference internal" href="instances.html#django.db.models.Model.clean" title="django.db.models.Model.clean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clean()</span></code></a> を実装し、欠損値をプログラムで補完する必要があります。</p>
</div>
</section>
<section id="s-choices">
<span id="s-field-choices"></span><span id="choices"></span><span id="field-choices"></span><h3><code class="docutils literal notranslate"><span class="pre">choices</span></code><a class="headerlink" href="#choices" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.choices">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">choices</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L550"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.choices" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このフィールドの選択肢として使用するための、以下で説明する形式のマッピングまたはイテラブルです。choices が指定された場合、 <a class="reference internal" href="instances.html#validating-objects"><span class="std std-ref">モデルのバリデーション</span></a> によって強制的に、デフォルトのフォームウィジェットが通常のテキストフィールドの代わりにこれらの選択肢を持つセレクトボックスになります。</p>
<p>マッピングが指定された場合、キー要素はモデルに設定される実際の値で、2番目の要素は人間が読める名前です。例えば</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;FR&quot;</span><span class="p">:</span> <span class="s2">&quot;Freshman&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SO&quot;</span><span class="p">:</span> <span class="s2">&quot;Sophomore&quot;</span><span class="p">,</span>
    <span class="s2">&quot;JR&quot;</span><span class="p">:</span> <span class="s2">&quot;Junior&quot;</span><span class="p">,</span>
    <span class="s2">&quot;SR&quot;</span><span class="p">:</span> <span class="s2">&quot;Senior&quot;</span><span class="p">,</span>
    <span class="s2">&quot;GR&quot;</span><span class="p">:</span> <span class="s2">&quot;Graduate&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>また、 <a class="reference external" href="https://docs.python.org/3/glossary.html#term-sequence" title="(in Python v3.13)"><span class="xref std std-term">sequence</span></a> として、ちょうど2つの項目からなるイテラブルを渡すこともできます (例 <code class="docutils literal notranslate"><span class="pre">[(A1,</span> <span class="pre">B1),</span> <span class="pre">(A2,</span> <span class="pre">B2),</span> <span class="pre">...]</span></code>)。各タプルの最初の要素はモデルに設定される実際の値で、2番目の要素は人間が読める名前です。例えば</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;FR&quot;</span><span class="p">,</span> <span class="s2">&quot;Freshman&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;SO&quot;</span><span class="p">,</span> <span class="s2">&quot;Sophomore&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;JR&quot;</span><span class="p">,</span> <span class="s2">&quot;Junior&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;SR&quot;</span><span class="p">,</span> <span class="s2">&quot;Senior&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;GR&quot;</span><span class="p">,</span> <span class="s2">&quot;Graduate&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>また、<code class="docutils literal notranslate"><span class="pre">choices</span></code> は、上記のいずれかのフォーマットを返す引数なしの呼び出し可能オブジェクトとして定義することもできます。例えば</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_currencies</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">CURRENCIES</span><span class="p">}</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Expense</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="n">max_digits</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">currency</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">get_currencies</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">choice</span></code> に呼び出し可能オブジェクトを渡すと、例えば選択肢が以下のような場合に特に便利です：</p>
<ul class="simple">
<li><p>同じデータベースや外部データベースのテーブルをクエリしたり、静的ファイルから選択肢にアクセスしたりするような、I/Oバウンド操作の結果（キャッシュされる可能性があります）。</p></li>
<li><p>ほぼ安定しているが、場合によって、あるいはプロジェクトによって異なる可能性のあるリスト。このカテゴリの例は、通貨、国、言語、タイムゾーンなど、よく知られた値のインベントリを提供するサードパーティのアプリを使用する場合などです。</p></li>
</ul>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>マッピングと callable のサポートが追加されました。</p>
</div>
<p>一般的に、モデルクラスの内部で選択肢を定義し、それぞれの値に適切に名前づけられた定数を定義するのがベストです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Student</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">FRESHMAN</span> <span class="o">=</span> <span class="s2">&quot;FR&quot;</span>
    <span class="n">SOPHOMORE</span> <span class="o">=</span> <span class="s2">&quot;SO&quot;</span>
    <span class="n">JUNIOR</span> <span class="o">=</span> <span class="s2">&quot;JR&quot;</span>
    <span class="n">SENIOR</span> <span class="o">=</span> <span class="s2">&quot;SR&quot;</span>
    <span class="n">GRADUATE</span> <span class="o">=</span> <span class="s2">&quot;GR&quot;</span>
    <span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">FRESHMAN</span><span class="p">:</span> <span class="s2">&quot;Freshman&quot;</span><span class="p">,</span>
        <span class="n">SOPHOMORE</span><span class="p">:</span> <span class="s2">&quot;Sophomore&quot;</span><span class="p">,</span>
        <span class="n">JUNIOR</span><span class="p">:</span> <span class="s2">&quot;Junior&quot;</span><span class="p">,</span>
        <span class="n">SENIOR</span><span class="p">:</span> <span class="s2">&quot;Senior&quot;</span><span class="p">,</span>
        <span class="n">GRADUATE</span><span class="p">:</span> <span class="s2">&quot;Graduate&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">year_in_school</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">YEAR_IN_SCHOOL_CHOICES</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">FRESHMAN</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_upperclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">year_in_school</span> <span class="ow">in</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">JUNIOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SENIOR</span><span class="p">}</span>
</pre></div>
</div>
<p>モデルクラスの外側で選択肢リストを定義し、それを参照することもできますが、モデルクラスの内側で選択肢と各選択肢の名前を定義することで、その情報を使用するクラスで保持し、選択肢を参照しやすくなります（例えば、<code class="docutils literal notranslate"><span class="pre">Student.SOPHOMORE</span></code> は <code class="docutils literal notranslate"><span class="pre">Student</span></code> モデルがインポートされていればどこでも動作します）。</p>
<p id="field-choices-named-groups">利用可能な選択肢を、組織化のために名前付きグループにまとめることもできます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MEDIA_CHOICES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Audio&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;vinyl&quot;</span><span class="p">:</span> <span class="s2">&quot;Vinyl&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cd&quot;</span><span class="p">:</span> <span class="s2">&quot;CD&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;Video&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;vhs&quot;</span><span class="p">:</span> <span class="s2">&quot;VHS Tape&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dvd&quot;</span><span class="p">:</span> <span class="s2">&quot;DVD&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;unknown&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>マッピングのキーはグループに適用する名前であり、値はそのグループ内の選択肢で、フィールドの値とオプションの人間が読める名前からなります。グループ化されたオプションは、1つのマッピングの中でグループ化されていないオプションと組み合わせることができます（この例の <code class="docutils literal notranslate"><span class="pre">&quot;unknown&quot;</span></code> オプションのように）。</p>
<p>2値タプルのリストなど、シーケンスを使うこともできます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MEDIA_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span>
        <span class="s2">&quot;Audio&quot;</span><span class="p">,</span>
        <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;vinyl&quot;</span><span class="p">,</span> <span class="s2">&quot;Vinyl&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;cd&quot;</span><span class="p">,</span> <span class="s2">&quot;CD&quot;</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="p">(</span>
        <span class="s2">&quot;Video&quot;</span><span class="p">,</span>
        <span class="p">(</span>
            <span class="p">(</span><span class="s2">&quot;vhs&quot;</span><span class="p">,</span> <span class="s2">&quot;VHS Tape&quot;</span><span class="p">),</span>
            <span class="p">(</span><span class="s2">&quot;dvd&quot;</span><span class="p">,</span> <span class="s2">&quot;DVD&quot;</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>なお、choices はリストやタプルである必要はなく、任意のシーケンスオブジェクトでも構いません。これにより、選択肢を動的に構築できます。しかし、 <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code class="xref py py-attr docutils literal notranslate"><span class="pre">choices</span></code></a> をハックして動的にするよりは、 <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> を持つ適切なデータベーステーブルを使ったほうがいいでしょう。 <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code class="xref py py-attr docutils literal notranslate"><span class="pre">choices</span></code></a> はあまり変更されない静的なデータのためのものです。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">choices</span></code> の順番を変更すると、変更のたびに新しいマイグレーションが生成されます。</p>
</div>
<p><a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code class="xref py py-attr docutils literal notranslate"><span class="pre">choices</span></code></a> が設定されている各モデルフィールドに対して、 Django は選択肢を2値タプルのリストに正規化し、フィールドの現在の値に対して、 人間が読める名前を取得するメソッドを追加します。データベース API ドキュメントの <a class="reference internal" href="instances.html#django.db.models.Model.get_FOO_display" title="django.db.models.Model.get_FOO_display"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_FOO_display()</span></code></a> を参照してください。</p>
<p id="field-choices-blank-label">フィールドに <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default</span></code></a> とともに <a class="reference internal" href="#django.db.models.Field.blank" title="django.db.models.Field.blank"><code class="xref py py-attr docutils literal notranslate"><span class="pre">blank=False</span></code></a> が指定されない限り、セレクトボックスには <code class="docutils literal notranslate"><span class="pre">&quot;---------&quot;</span></code> を含むラベルが表示されます。この動作をオーバーライドするには、たとえば <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">&quot;表示したい文字列&quot;)</span></code> のように <code class="docutils literal notranslate"><span class="pre">None</span></code> を含むタプルを <code class="docutils literal notranslate"><span class="pre">choices</span></code> に追加してください。もしくは、 <code class="docutils literal notranslate"><span class="pre">None</span></code> の代わりに空の文字列を使うこともできます。これは特に <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> などに適しています。</p>
<section id="s-enumeration-types">
<span id="s-field-choices-enum-types"></span><span id="enumeration-types"></span><span id="field-choices-enum-types"></span><h4>列挙型<a class="headerlink" href="#enumeration-types" title="Link to this heading">¶</a></h4>
<p>さらに Django には、選択肢を簡潔に定義するためにサブクラス化できる列挙型があります：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.translation</span><span class="w"> </span><span class="kn">import</span> <span class="n">gettext_lazy</span> <span class="k">as</span> <span class="n">_</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Student</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">YearInSchool</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
        <span class="n">FRESHMAN</span> <span class="o">=</span> <span class="s2">&quot;FR&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Freshman&quot;</span><span class="p">)</span>
        <span class="n">SOPHOMORE</span> <span class="o">=</span> <span class="s2">&quot;SO&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Sophomore&quot;</span><span class="p">)</span>
        <span class="n">JUNIOR</span> <span class="o">=</span> <span class="s2">&quot;JR&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Junior&quot;</span><span class="p">)</span>
        <span class="n">SENIOR</span> <span class="o">=</span> <span class="s2">&quot;SR&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Senior&quot;</span><span class="p">)</span>
        <span class="n">GRADUATE</span> <span class="o">=</span> <span class="s2">&quot;GR&quot;</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Graduate&quot;</span><span class="p">)</span>

    <span class="n">year_in_school</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="n">YearInSchool</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">YearInSchool</span><span class="o">.</span><span class="n">FRESHMAN</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_upperclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">year_in_school</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">YearInSchool</span><span class="o">.</span><span class="n">JUNIOR</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">YearInSchool</span><span class="o">.</span><span class="n">SENIOR</span><span class="p">,</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>これらはPythonの標準ライブラリの <a class="reference external" href="https://docs.python.org/3/library/enum.html#module-enum" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">enum</span></code></a> と似たような動作をしますが、若干の変更が加えられています：</p>
<ul>
<li><p>列挙型のメンバ値は、具象データ型を構築するときに使う引数のタプルです。Django はこのタプルの末尾に、人間が読める名前、つまり <code class="docutils literal notranslate"><span class="pre">label</span></code> として使われる文字列値を追加することをサポートしています。この <code class="docutils literal notranslate"><span class="pre">label</span></code> は遅延 (Lazy な) 翻訳が可能な文字列です。したがって、ほとんどの場合、メンバの値は <code class="docutils literal notranslate"><span class="pre">(value,</span> <span class="pre">label)</span></code> の2値タプルになります。より複雑なデータ型を使用した <a class="reference internal" href="#field-choices-enum-subclassing"><span class="std std-ref">選択肢のサブクラスの例</span></a> については以下を参照してください。タプルが提供されない場合、あるいは最後の項目が（lazyな）文字列でない場合、 <code class="docutils literal notranslate"><span class="pre">label</span></code> はメンバー名から <a class="reference internal" href="#field-choices-enum-auto-label"><span class="std std-ref">自動的に生成</span></a> されます。</p></li>
<li><p>値には <code class="docutils literal notranslate"><span class="pre">.label</span></code> プロパティが追加され、人間が読める名前を返します。</p></li>
<li><p>列挙型クラスには、 <code class="docutils literal notranslate"><span class="pre">.choices</span></code>, <code class="docutils literal notranslate"><span class="pre">.labels</span></code>, <code class="docutils literal notranslate"><span class="pre">.values</span></code>, <code class="docutils literal notranslate"><span class="pre">.names</span></code> などのカスタムプロパティが追加されており、これらの列挙型の異なる部分のリストに簡単にアクセスできるようになっています。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>これらのプロパティ名をメンバ名として使用することはできません。</p>
</div>
</li>
<li><p>値が複数回定義できないようにするため、 <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.unique" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">enum.unique()</span></code></a> の使用が強制されます。これはフィールドの choices ではあまり期待されません。</p></li>
</ul>
<p>なお、 <code class="docutils literal notranslate"><span class="pre">YearInSchool.SENIOR</span></code>, <code class="docutils literal notranslate"><span class="pre">YearInSchool['SENIOR']</span></code>, <code class="docutils literal notranslate"><span class="pre">YearInSchool('SR')</span></code> を使用して列挙型のメンバにアクセスしたり、メンバの <code class="docutils literal notranslate"><span class="pre">.name</span></code> と <code class="docutils literal notranslate"><span class="pre">.value</span></code> プロパティを参照したりすることは期待通りに動作します。</p>
<p id="field-choices-enum-auto-label">人が読める名前を翻訳する必要がない場合は、メンバ名から推測してそれらを自動設定させることができます（アンダースコアをスペースに置き換え、タイトルケースを使用します）：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Vehicle</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">CAR</span> <span class="o">=</span> <span class="s2">&quot;C&quot;</span>
<span class="gp">... </span>    <span class="n">TRUCK</span> <span class="o">=</span> <span class="s2">&quot;T&quot;</span>
<span class="gp">... </span>    <span class="n">JET_SKI</span> <span class="o">=</span> <span class="s2">&quot;J&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Vehicle</span><span class="o">.</span><span class="n">JET_SKI</span><span class="o">.</span><span class="n">label</span>
<span class="go">&#39;Jet Ski&#39;</span>
</pre></div>
</div>
<p>列挙値が整数である必要があるケースは非常に多いので、Django は <code class="docutils literal notranslate"><span class="pre">IntegerChoices</span></code> クラスを用意しています。例えば</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Card</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="k">class</span><span class="w"> </span><span class="nc">Suit</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">IntegerChoices</span><span class="p">):</span>
        <span class="n">DIAMOND</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">SPADE</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">HEART</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">CLUB</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="n">suit</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">Suit</span><span class="p">)</span>
</pre></div>
</div>
<p>また、 <a class="reference external" href="https://docs.python.org/3/howto/enum.html#functional-api">Enum Functional API</a> を利用することもできます。この場合、ラベルは上記のように自動的に生成されます：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MedalType</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextChoices</span><span class="p">(</span><span class="s2">&quot;MedalType&quot;</span><span class="p">,</span> <span class="s2">&quot;GOLD SILVER BRONZE&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MedalType</span><span class="o">.</span><span class="n">choices</span>
<span class="go">[(&#39;GOLD&#39;, &#39;Gold&#39;), (&#39;SILVER&#39;, &#39;Silver&#39;), (&#39;BRONZE&#39;, &#39;Bronze&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Place</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerChoices</span><span class="p">(</span><span class="s2">&quot;Place&quot;</span><span class="p">,</span> <span class="s2">&quot;FIRST SECOND THIRD&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Place</span><span class="o">.</span><span class="n">choices</span>
<span class="go">[(1, &#39;First&#39;), (2, &#39;Second&#39;), (3, &#39;Third&#39;)]</span>
</pre></div>
</div>
<p id="field-choices-enum-subclassing">もし <code class="docutils literal notranslate"><span class="pre">int</span></code> や <code class="docutils literal notranslate"><span class="pre">str</span></code> 以外の具象データ型のサポートが必要であれば、 <code class="docutils literal notranslate"><span class="pre">Choices</span></code> と必要な具象データ型、例えば <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.date" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code></a> を <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> で使用するようにサブクラス化できます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MoonLandings</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Choices</span><span class="p">):</span>
    <span class="n">APOLLO_11</span> <span class="o">=</span> <span class="mi">1969</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;Apollo 11 (Eagle)&quot;</span>
    <span class="n">APOLLO_12</span> <span class="o">=</span> <span class="mi">1969</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="s2">&quot;Apollo 12 (Intrepid)&quot;</span>
    <span class="n">APOLLO_14</span> <span class="o">=</span> <span class="mi">1971</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;Apollo 14 (Antares)&quot;</span>
    <span class="n">APOLLO_15</span> <span class="o">=</span> <span class="mi">1971</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;Apollo 15 (Falcon)&quot;</span>
    <span class="n">APOLLO_16</span> <span class="o">=</span> <span class="mi">1972</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="s2">&quot;Apollo 16 (Orion)&quot;</span>
    <span class="n">APOLLO_17</span> <span class="o">=</span> <span class="mi">1972</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;Apollo 17 (Challenger)&quot;</span>
</pre></div>
</div>
<p>さらに注意すべき点がいくつかあります：</p>
<ul>
<li><p>列挙型は <a class="reference internal" href="#field-choices-named-groups"><span class="std std-ref">名前付きグループ</span></a> をサポートしていません。</p></li>
<li><p>具体的なデータ型を持つ列挙型では、すべての値がそのデータ型に一致する必要があるため、 <a class="reference internal" href="#field-choices-blank-label"><span class="std std-ref">blank label</span></a> をオーバーライドする際に、 <code class="docutils literal notranslate"><span class="pre">None</span></code> という値を持つメンバを作成することはできません。代わりに、クラスに <code class="docutils literal notranslate"><span class="pre">__empty__</span></code> 属性を設定します：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Answer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">IntegerChoices</span><span class="p">):</span>
    <span class="n">NO</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;No&quot;</span><span class="p">)</span>
    <span class="n">YES</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Yes&quot;</span><span class="p">)</span>

    <span class="n">__empty__</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;(Unknown)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<div class="versionchanged">
<span class="title">Changed in Django 5.0:</span> <p>選択肢 <code class="docutils literal notranslate"><span class="pre">choices</span></code> で列挙型を直接使用できるようになりました。</p>
</div>
</section>
</section>
<section id="s-db-column">
<span id="db-column"></span><h3><code class="docutils literal notranslate"><span class="pre">db_column</span></code><a class="headerlink" href="#db-column" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.db_column">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">db_column</span></span><a class="headerlink" href="#django.db.models.Field.db_column" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このフィールドを使用するためのデータベースのカラムの名前です。もし与えられなければ、Django はフィールド名を使用します。</p>
<p>データベースのカラム名が SQL の予約語だったり、Python の変数名として使用できない文字 (特に多いのがハイフン) が含まれていたとしても大丈夫です。Django はカラムとテーブルの名前を自動的にクオートして処理してくれます。</p>
</section>
<section id="s-db-comment">
<span id="db-comment"></span><h3><code class="docutils literal notranslate"><span class="pre">db_comment</span></code><a class="headerlink" href="#db-comment" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.db_comment">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">db_comment</span></span><a class="headerlink" href="#django.db.models.Field.db_comment" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このフィールドに使うデータベースカラムのコメントです。あなたの Django コードを見ていないような、データベースに直接アクセスできる人のために、フィールドをドキュメント化するのに便利です。例えば：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
    <span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Date and time when the article was published&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="s-db-default">
<span id="db-default"></span><h3><code class="docutils literal notranslate"><span class="pre">db_default</span></code><a class="headerlink" href="#db-default" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 5.0.</span> </div>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.db_default">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">db_default</span></span><a class="headerlink" href="#django.db.models.Field.db_default" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>データベースによって計算されるこのフィールドのデフォルト値。これはリテラル値でも、 <a class="reference internal" href="database-functions.html#django.db.models.functions.Now" title="django.db.models.functions.Now"><code class="xref py py-class docutils literal notranslate"><span class="pre">Now</span></code></a> のようなデータベース関数でも構いません：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">db_default</span><span class="o">=</span><span class="n">Now</span><span class="p">())</span>
</pre></div>
</div>
<p>リテラルやデータベース関数から構成する限り、より複雑な式を使用できます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">month_due</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span>
    <span class="n">db_default</span><span class="o">=</span><span class="n">TruncMonth</span><span class="p">(</span>
        <span class="n">Now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">90</span><span class="p">),</span>
        <span class="n">output_field</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(),</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>データベースのデフォルトは、他のフィールドやモデルを参照することはできません。例えば、これは無効です：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">end</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">db_default</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<p>もし <code class="docutils literal notranslate"><span class="pre">db_default</span></code> と <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.default</span></code></a> の両方が指定された場合、Python コードでインスタンスを作成する際には <code class="docutils literal notranslate"><span class="pre">default</span></code> が優先されます。データベースレベルでも <code class="docutils literal notranslate"><span class="pre">db_default</span></code> が設定され、ORM の外部で行を挿入するときや、マイグレーションで新しいフィールドを追加するときに使用されます。</p>
<p>フィールドに <code class="docutils literal notranslate"><span class="pre">db_default</span></code> は設定されているが <code class="docutils literal notranslate"><span class="pre">default</span></code> が設定されておらず、フィールドに値が割り当てられていない場合、保存されていないモデルインスタンスでは <code class="docutils literal notranslate"><span class="pre">DatabaseDefault</span></code> オブジェクトがフィールドの値として返されます。フィールドの実際の値は、モデルインスタンスが保存されたときにデータベースによって決定されます。</p>
</section>
<section id="s-db-index">
<span id="db-index"></span><h3><code class="docutils literal notranslate"><span class="pre">db_index</span></code><a class="headerlink" href="#db-index" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.db_index">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">db_index</span></span><a class="headerlink" href="#django.db.models.Field.db_index" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、データベースインデックスがこのフィールドのために生成されます。</p>
<div class="admonition-use-the-attr-options-indexes-option-instead admonition">
<p class="admonition-title">代わりに <a class="reference internal" href="options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indexes</span></code></a> オプションを使用してください。</p>
<p>可能であれば、代わりに <a class="reference internal" href="options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.indexes</span></code></a> オプションを使用してください。ほとんどの場合、 <a class="reference internal" href="options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indexes</span></code></a> は <code class="docutils literal notranslate"><span class="pre">db_index</span></code> よりも多くの機能を提供します。 <code class="docutils literal notranslate"><span class="pre">db_index</span></code> は将来廃止される可能性があります。</p>
</div>
</section>
<section id="s-db-tablespace">
<span id="db-tablespace"></span><h3><code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code><a class="headerlink" href="#db-tablespace" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.db_tablespace">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">db_tablespace</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L924"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.db_tablespace" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このフィールドにインデックスが作成されている場合に、このフィールドのインデックスに使用する <a class="reference internal" href="../../topics/db/tablespaces.html"><span class="doc">データベース テーブル空間</span></a> の名前です。デフォルトはプロジェクトの <a class="reference internal" href="../settings.html#std-setting-DEFAULT_INDEX_TABLESPACE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_INDEX_TABLESPACE</span></code></a> が設定されている場合はその設定値、またはモデルの <a class="reference internal" href="options.html#django.db.models.Options.db_tablespace" title="django.db.models.Options.db_tablespace"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_tablespace</span></code></a> が設定されている場合はその設定値です。バックエンドがインデックスのテーブル空間をサポートしていない場合、このオプションは無視されます。</p>
</section>
<section id="s-default">
<span id="default"></span><h3><code class="docutils literal notranslate"><span class="pre">default</span></code><a class="headerlink" href="#default" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.default">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">default</span></span><a class="headerlink" href="#django.db.models.Field.default" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>そのフィールドのデフォルト値です。このオプションには特定の値もしくは呼び出し可能オブジェクトを渡すことができます。もし渡した値が呼び出し可能であれば新しくオブジェクトが生成される度に呼び出されます。</p>
<p>デフォルト値はミュータブルなオブジェクト（モデルのインスタンス、 <code class="docutils literal notranslate"><span class="pre">list</span></code> 、 <code class="docutils literal notranslate"><span class="pre">set</span></code> など）にはできません。そのオブジェクトの同じインスタンスへの参照が、すべての新しいモデルインスタンスのデフォルト値として使用されてしまうからです。代わりに、必要なデフォルト値を呼び出し可能オブジェクトでラップします。例えば、 <a class="reference internal" href="#django.db.models.JSONField" title="django.db.models.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> に対してデフォルトの <code class="docutils literal notranslate"><span class="pre">dict</span></code> を指定したい場合、下記のような関数を使用します：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">contact_default</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;to1@example.com&quot;</span><span class="p">}</span>


<span class="n">contact_info</span> <span class="o">=</span> <span class="n">JSONField</span><span class="p">(</span><span class="s2">&quot;ContactInfo&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">contact_default</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">lambda</span></code> は <a class="reference internal" href="../../topics/migrations.html#migration-serializing"><span class="std std-ref">マイグレーションでシリアライズ</span></a> できないので、<code class="docutils literal notranslate"><span class="pre">default</span></code> のようなフィールドオプションには使えません。その他の注意点についてはドキュメントを参照してください。</p>
<p><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> のようにモデルインスタンスにマッピングされるフィールドの場合、デフォルトはモデルインスタンスではなく、参照するフィールドの値 (<a class="reference internal" href="#django.db.models.ForeignKey.to_field" title="django.db.models.ForeignKey.to_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">to_field</span></code></a> が設定されていない限り <code class="docutils literal notranslate"><span class="pre">pk</span></code>) になります。</p>
<p>デフォルト値は、新しいモデルインスタンスが作成され、フィールドに値が提供されていない場合に使用されます。フィールドがプライマリキーの場合、フィールドが <code class="docutils literal notranslate"><span class="pre">None</span></code> に設定されているときにもデフォルト値が使われます。</p>
<p>デフォルト値は <a class="reference internal" href="#django.db.models.Field.db_default" title="django.db.models.Field.db_default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.db_default</span></code></a> でデータベースレベルで設定することもできます。</p>
</section>
<section id="s-editable">
<span id="editable"></span><h3><code class="docutils literal notranslate"><span class="pre">editable</span></code><a class="headerlink" href="#editable" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.editable">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">editable</span></span><a class="headerlink" href="#django.db.models.Field.editable" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">False</span></code> の場合、フィールドは管理画面や他の <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> に表示されません。また、 <a class="reference internal" href="instances.html#validating-objects"><span class="std std-ref">モデルのバリデーション</span></a> の間、フィールドはスキップされます。デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> です。</p>
</section>
<section id="s-error-messages">
<span id="error-messages"></span><h3><code class="docutils literal notranslate"><span class="pre">error_messages</span></code><a class="headerlink" href="#error-messages" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.error_messages">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">error_messages</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L762"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.error_messages" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>引数 <code class="docutils literal notranslate"><span class="pre">error_messages</span></code> を指定すると、フィールドが表示するデフォルトのメッセージを上書きできます。オーバーライドしたいエラーメッセージにマッチするキーを持つ辞書を渡してください。</p>
<p>エラーメッセージのキーには <code class="docutils literal notranslate"><span class="pre">null</span></code>, <code class="docutils literal notranslate"><span class="pre">blank</span></code>, <code class="docutils literal notranslate"><span class="pre">invalid</span></code>, <code class="docutils literal notranslate"><span class="pre">invalid_choice</span></code>, <code class="docutils literal notranslate"><span class="pre">unique</span></code>, <code class="docutils literal notranslate"><span class="pre">unique_for_date</span></code> があります。以下の <a class="reference internal" href="#field-types">Field types</a> セクションで説明する各フィールドには、追加のエラーメッセージキーが指定されています。</p>
<p>これらのエラーメッセージはフォームに反映されないことがよくあります。詳細は <a class="reference internal" href="../../topics/forms/modelforms.html#considerations-regarding-model-errormessages"><span class="std std-ref">モデルの error_messages についての注意</span></a> を参照してください。</p>
</section>
<section id="s-help-text">
<span id="help-text"></span><h3><code class="docutils literal notranslate"><span class="pre">help_text</span></code><a class="headerlink" href="#help-text" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.help_text">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">help_text</span></span><a class="headerlink" href="#django.db.models.Field.help_text" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>フォームウィジェットと共に表示される &quot;補助&quot; テキストになります。この値はフィールドがフォームとして利用されない場合でもドキュメント化する際に有用です。</p>
<p>この値は自動生成のフォームではHTMLエスケープ <em>されません</em> 。そのため、 <a class="reference internal" href="#django.db.models.Field.help_text" title="django.db.models.Field.help_text"><code class="xref py py-attr docutils literal notranslate"><span class="pre">help_text</span></code></a> にはHTMLが使えます。例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help_text</span> <span class="o">=</span> <span class="s2">&quot;Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;.&quot;</span>
</pre></div>
</div>
<p>あるいは、プレーンテキストを使い、 <a class="reference internal" href="../utils.html#django.utils.html.escape" title="django.utils.html.escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.html.escape()</span></code></a> で HTML の特殊文字をエスケープすることもできます。クロスサイトスクリプティング攻撃を避けるために、信頼できないユーザから来る可能性のあるヘルプテキストは必ずエスケープしてください。</p>
</section>
<section id="s-primary-key">
<span id="primary-key"></span><h3><code class="docutils literal notranslate"><span class="pre">primary_key</span></code><a class="headerlink" href="#primary-key" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.primary_key">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">primary_key</span></span><a class="headerlink" href="#django.db.models.Field.primary_key" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、設定したフィールドはそのモデルの主キーとなります。</p>
<p>モデル内のどのフィールドにも <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> を指定しなければ、Django は自動的にプライマリキーを保持するフィールドを追加するので、デフォルトのプライマリキーの動作を上書きしたくない限り、どのフィールドにも <code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> を設定する必要はありません。自動作成されるプライマリキーフィールドの種類は、 <a class="reference internal" href="../applications.html#django.apps.AppConfig.default_auto_field" title="django.apps.AppConfig.default_auto_field"><code class="xref py py-attr docutils literal notranslate"><span class="pre">AppConfig.default_auto_field</span></code></a> でアプリごとに指定するか、 <a class="reference internal" href="../settings.html#std-setting-DEFAULT_AUTO_FIELD"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_AUTO_FIELD</span></code></a> 設定でグローバルに指定できます。詳しくは <a class="reference internal" href="../../topics/db/models.html#automatic-primary-key-fields"><span class="std std-ref">自動インクリメントのプライマリーキーフィールド</span></a> を参照してください。</p>
<p><code class="docutils literal notranslate"><span class="pre">primary_key=True</span></code> は <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null=False</span></code></a> と <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique=True</span></code></a> を意味します。オブジェクトに指定できるプライマリキーは1つだけです。</p>
<p>プライマリキーフィールドは読み取り専用です。既存のオブジェクトのプライマリキーの値を変更して保存すると、古いオブジェクトはそのままで新しいオブジェクトが作成されます。</p>
<p>オブジェクトを <a class="reference internal" href="instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">削除する</span></code></a> 際に、プライマリキーフィールドは <code class="docutils literal notranslate"><span class="pre">None</span></code> に設定されます。</p>
</section>
<section id="s-unique">
<span id="unique"></span><h3><code class="docutils literal notranslate"><span class="pre">unique</span></code><a class="headerlink" href="#unique" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.unique">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">unique</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L920"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.unique" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、そのフィールドはテーブル上で一意となる制約を受けます。</p>
<p>これはデータベースレベルとモデルのバリデーションで強制されます。 <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique</span></code></a> フィールドの値が重複しているモデルを保存しようとすると、モデルの <a class="reference internal" href="instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a> メソッドによって <a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">django.db.IntegrityError</span></code></a> が発生します。</p>
<p>このオプションは <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> と <a class="reference internal" href="#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><code class="xref py py-class docutils literal notranslate"><span class="pre">OneToOneField</span></code></a> 以外の全てのフィールドタイプで有効です。</p>
<p><code class="docutils literal notranslate"><span class="pre">unique</span></code> が <code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、<a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_index</span></code></a> を指定する必要はないことに注意してください。なぜなら <code class="docutils literal notranslate"><span class="pre">unique</span></code> がインデックスの作成を意味するからです。</p>
</section>
<section id="s-unique-for-date">
<span id="unique-for-date"></span><h3><code class="docutils literal notranslate"><span class="pre">unique_for_date</span></code><a class="headerlink" href="#unique-for-date" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.unique_for_date">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">unique_for_date</span></span><a class="headerlink" href="#django.db.models.Field.unique_for_date" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>これを <a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> または <a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> の名前に設定すると、このフィールドが日付フィールドの値に対して一意であることを要求します。</p>
<p>例えば、 <code class="docutils literal notranslate"><span class="pre">title</span></code> フィールドに <code class="docutils literal notranslate"><span class="pre">unique_for_date=&quot;pub_date&quot;</span></code> を指定した場合、 Django は同じ <code class="docutils literal notranslate"><span class="pre">title</span></code> と <code class="docutils literal notranslate"><span class="pre">pub_date</span></code> を持つ 2 つのレコードの入力を許可しません。</p>
<p><a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> を指すように設定した場合は、フィールドの日付部分のみが考慮されることに注意してください。また、 <a class="reference internal" href="../settings.html#std-setting-USE_TZ"><code class="xref std std-setting docutils literal notranslate"><span class="pre">USE_TZ</span></code></a> が <code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、オブジェクトの保存時に <a class="reference internal" href="../../topics/i18n/timezones.html#default-current-time-zone"><span class="std std-ref">カレントタイムゾーン</span></a> でチェックが行われます。</p>
<p>これはモデルの検証時に <a class="reference internal" href="instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.validate_unique()</span></code></a> によって強制されますが、データベースレベルでは強制されません。 <a class="reference internal" href="#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique_for_date</span></code></a> 制約が <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> の一部ではないフィールドを含む場合 (例えば、フィールドの一つが <code class="docutils literal notranslate"><span class="pre">exclude</span></code> にリストされていたり、 <a class="reference internal" href="#django.db.models.Field.editable" title="django.db.models.Field.editable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">editable=False</span></code></a> を持っている場合)、 <a class="reference internal" href="instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.validate_unique()</span></code></a> はその特定の制約の検証をスキップします。</p>
</section>
<section id="s-unique-for-month">
<span id="unique-for-month"></span><h3><code class="docutils literal notranslate"><span class="pre">unique_for_month</span></code><a class="headerlink" href="#unique-for-month" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.unique_for_month">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">unique_for_month</span></span><a class="headerlink" href="#django.db.models.Field.unique_for_month" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique_for_date</span></code></a> と似ていますが、フィールドが月に対して一意である必要があります。</p>
</section>
<section id="s-unique-for-year">
<span id="unique-for-year"></span><h3><code class="docutils literal notranslate"><span class="pre">unique_for_year</span></code><a class="headerlink" href="#unique-for-year" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.unique_for_year">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">unique_for_year</span></span><a class="headerlink" href="#django.db.models.Field.unique_for_year" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique_for_date</span></code></a> や <a class="reference internal" href="#django.db.models.Field.unique_for_month" title="django.db.models.Field.unique_for_month"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique_for_month</span></code></a> と同様です。</p>
</section>
<section id="s-verbose-name">
<span id="verbose-name"></span><h3><code class="docutils literal notranslate"><span class="pre">verbose_name</span></code><a class="headerlink" href="#verbose-name" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.verbose_name">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">verbose_name</span></span><a class="headerlink" href="#django.db.models.Field.verbose_name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>人間が読めるフィールド名。verbose な名前が指定されていない場合、 Django はフィールドの属性名を使って自動的にフィールドを作成し、アンダースコアをスペースに変換します。詳しくは <a class="reference internal" href="../../topics/db/models.html#verbose-field-names"><span class="std std-ref">verbose なフィールド名</span></a> を参照してください。</p>
</section>
<section id="s-validators">
<span id="validators"></span><h3><code class="docutils literal notranslate"><span class="pre">validators</span></code><a class="headerlink" href="#validators" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.validators">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">validators</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L770"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.validators" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このフィールドに対して実行するバリデータのリスト。詳細は <a class="reference internal" href="../validators.html"><span class="doc">バリデータのドキュメント</span></a> を参照してください。</p>
</section>
</section>
<section id="s-field-types">
<span id="s-model-field-types"></span><span id="field-types"></span><span id="model-field-types"></span><h2>フィールドの型<a class="headerlink" href="#field-types" title="Link to this heading">¶</a></h2>
<section id="s-autofield">
<span id="autofield"></span><h3><code class="docutils literal notranslate"><span class="pre">AutoField</span></code><a class="headerlink" href="#autofield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.AutoField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AutoField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2864"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.AutoField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>利用可能な ID に応じて、自動的にインクリメントする <a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a> です。通常は直接使う必要はありません; 指定しない場合は、主キーのフィールドが自動的にモデルに追加されます。<a class="reference internal" href="../../topics/db/models.html#automatic-primary-key-fields"><span class="std std-ref">自動インクリメントのプライマリーキーフィールド</span></a> も参照してください。</p>
</section>
<section id="s-bigautofield">
<span id="bigautofield"></span><h3><code class="docutils literal notranslate"><span class="pre">BigAutoField</span></code><a class="headerlink" href="#bigautofield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.BigAutoField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BigAutoField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2872"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.BigAutoField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>64 ビットの数値です。<code class="docutils literal notranslate"><span class="pre">1</span></code> から <code class="docutils literal notranslate"><span class="pre">9223372036854775807</span></code> までの数を扱える以外は、<a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a> と同じです。</p>
</section>
<section id="s-bigintegerfield">
<span id="bigintegerfield"></span><h3><code class="docutils literal notranslate"><span class="pre">BigIntegerField</span></code><a class="headerlink" href="#bigintegerfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.BigIntegerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BigIntegerField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2157"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.BigIntegerField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>64 ビットの整数で、 <a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a> とよく似ていますが、 <code class="docutils literal notranslate"><span class="pre">-9223372036854775808</span></code> から <code class="docutils literal notranslate"><span class="pre">9223372036854775807</span></code> までの数値が入ることが保証されています。このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.NumberInput" title="django.forms.NumberInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumberInput</span></code></a> です。</p>
</section>
<section id="s-binaryfield">
<span id="binaryfield"></span><h3><code class="docutils literal notranslate"><span class="pre">BinaryField</span></code><a class="headerlink" href="#binaryfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.BinaryField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BinaryField</span></span>(<em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2660"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.BinaryField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>生のバイナリデータを格納するフィールドです。 <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytearray" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> または <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a> を指定できます。</p>
<p>デフォルトでは、 <code class="docutils literal notranslate"><span class="pre">BinaryField</span></code> は <a class="reference internal" href="#django.db.models.Field.editable" title="django.db.models.Field.editable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">editable</span></code></a> を <code class="docutils literal notranslate"><span class="pre">False</span></code> に設定します。この場合、 <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> に含めることはできません。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.BinaryField.max_length">
<span class="sig-prename descclassname"><span class="pre">BinaryField.</span></span><span class="sig-name descname"><span class="pre">max_length</span></span><a class="headerlink" href="#django.db.models.BinaryField.max_length" title="Link to this definition">¶</a></dt>
<dd><p>オプション。フィールドの最大長 (バイト単位)。最大長は <a class="reference internal" href="../validators.html#django.core.validators.MaxLengthValidator" title="django.core.validators.MaxLengthValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaxLengthValidator</span></code></a> を使ったDjango のバリデーションで強制されます。</p>
</dd></dl>

<div class="admonition-abusing-binaryfield admonition">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">BinaryField</span></code> を誤用する</p>
<p>ファイルをデータベース内に格納したいと考えるかもしれませんが、99%のケースにおいてそれは悪い設計です。このフィールドは、適切な <a class="reference internal" href="../../howto/static-files/index.html"><span class="doc">静的ファイル</span></a> の取り扱いに対する代替手段では <em>ありません</em> 。</p>
</div>
</section>
<section id="s-booleanfield">
<span id="booleanfield"></span><h3><code class="docutils literal notranslate"><span class="pre">BooleanField</span></code><a class="headerlink" href="#booleanfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.BooleanField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BooleanField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1153"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.BooleanField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>true/false のフィールドです。</p>
<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.CheckboxInput" title="django.forms.CheckboxInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">CheckboxInput</span></code></a> で、 <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null=True</span></code></a> の場合は <a class="reference internal" href="../forms/widgets.html#django.forms.NullBooleanSelect" title="django.forms.NullBooleanSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">NullBooleanSelect</span></code></a> です。</p>
<p><a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.default</span></code></a> が定義されていないときの <code class="docutils literal notranslate"><span class="pre">BooleanField</span></code> のデフォルト値は <code class="docutils literal notranslate"><span class="pre">None</span></code> です。</p>
</section>
<section id="s-charfield">
<span id="charfield"></span><h3><code class="docutils literal notranslate"><span class="pre">CharField</span></code><a class="headerlink" href="#charfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.CharField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CharField</span></span>(<em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1199"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.CharField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>小 - 大サイズの文字列のフィールドです。</p>
<p>多量のテキストを扱うときは <a class="reference internal" href="#django.db.models.TextField" title="django.db.models.TextField"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextField</span></code></a> を使ってください。</p>
<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextInput</span></code></a> です。</p>
<p><a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> には以下の追加引数があります：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.CharField.max_length">
<span class="sig-prename descclassname"><span class="pre">CharField.</span></span><span class="sig-name descname"><span class="pre">max_length</span></span><a class="headerlink" href="#django.db.models.CharField.max_length" title="Link to this definition">¶</a></dt>
<dd><p>フィールドの最大長 (文字数)。 <a class="reference internal" href="../validators.html#django.core.validators.MaxLengthValidator" title="django.core.validators.MaxLengthValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaxLengthValidator</span></code></a> を使って、 <code class="docutils literal notranslate"><span class="pre">max_length</span></code> をデータベースレベルと Django のバリデーションで強制します。これは PostgreSQL 以外の Django に含まれる全てのデータベースバックエンドで必要です。PostgreSQL は無制限の <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> カラムをサポートしています。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>複数のデータベースバックエンド間で使われるアプリケーションを作る場合は、いくつかのバックエンドで <code class="docutils literal notranslate"><span class="pre">max_length</span></code> に制限があることに注意しなければなりません。詳しくは <a class="reference internal" href="../databases.html"><span class="doc">データベースバックエンドの注意事項</span></a> を参照してください。</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.CharField.db_collation">
<span class="sig-prename descclassname"><span class="pre">CharField.</span></span><span class="sig-name descname"><span class="pre">db_collation</span></span><a class="headerlink" href="#django.db.models.CharField.db_collation" title="Link to this definition">¶</a></dt>
<dd><p>オプション。フィールドのデータベース照合順序名(collation name)です。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>照合順序名は標準化されていません。そのため、これは複数のデータベースバックエンド間でポータブルではありません。</p>
</div>
<div class="admonition-oracle admonition">
<p class="admonition-title">Oracle</p>
<p>Oracle が照合順序をサポートするのは、<code class="docutils literal notranslate"><span class="pre">MAX_STRING_SIZE</span></code> データベース初期化パラメータが <code class="docutils literal notranslate"><span class="pre">EXTENDED</span></code> に設定されている場合だけです。</p>
</div>
</dd></dl>

</section>
<section id="s-datefield">
<span id="datefield"></span><h3><code class="docutils literal notranslate"><span class="pre">DateField</span></code><a class="headerlink" href="#datefield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.DateField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DateField</span></span>(<em class="sig-param"><span class="n"><span class="pre">auto_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_now_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1417"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.DateField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Python で <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> インスタンスによって表される日付です。多少の追加的な省略可能な引数を持ちます:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.DateField.auto_now">
<span class="sig-prename descclassname"><span class="pre">DateField.</span></span><span class="sig-name descname"><span class="pre">auto_now</span></span><a class="headerlink" href="#django.db.models.DateField.auto_now" title="Link to this definition">¶</a></dt>
<dd><p>オブジェクトが保存される度に自動的に現在の日付をセットします。&quot;最後の変更&quot; タイムスタンプに役立ちます。現在の日付が常に使われる点に注意してください; オーバーライドできる単なるデフォルト値ではありません。</p>
<p><a class="reference internal" href="instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.save()</span></code></a> が呼ばれたとき、フィールドは自動的に更新されるだけです。<a class="reference internal" href="querysets.html#django.db.models.query.QuerySet.update" title="django.db.models.query.QuerySet.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.update()</span></code></a> のような別の方法で他のフィールドに更新を加えるとき、フィールドは更新されません。あのように更新の中でフィールドの独自の値を指定できるとしてもです。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.DateField.auto_now_add">
<span class="sig-prename descclassname"><span class="pre">DateField.</span></span><span class="sig-name descname"><span class="pre">auto_now_add</span></span><a class="headerlink" href="#django.db.models.DateField.auto_now_add" title="Link to this definition">¶</a></dt>
<dd><p>オブジェクトが最初に作成されるとき、自動的にフィールドに現在の日付をセットします。タイムスタンプの作成に役立ちます。現在の日付が <em>常に</em> 使われる点に注意してください; オーバーライドできる単なるデフォルト値ではありません。たとえオブジェクトを作成するときに値をセットしたとしても無視されます。このフィールドを修正できるようにしておきたい場合は、<code class="docutils literal notranslate"><span class="pre">auto_now_add=True</span></code> の代わりに以下をセットしてください:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> に対して: <code class="docutils literal notranslate"><span class="pre">default=date.today</span></code> - <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.date.today" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.date.today()</span></code></a> より</p></li>
<li><p><a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> に対して: <code class="docutils literal notranslate"><span class="pre">default=timezone.now</span></code> - <a class="reference internal" href="../utils.html#django.utils.timezone.now" title="django.utils.timezone.now"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.timezone.now()</span></code></a> より</p></li>
</ul>
</dd></dl>

<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.DateInput" title="django.forms.DateInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateInput</span></code></a> です。admin は JavaScript カレンダーと &quot;Today&quot; のショートカットを追加します。追加の <code class="docutils literal notranslate"><span class="pre">invalid_date</span></code> エラーメッセージキーを含みます。</p>
<p>オプション <code class="docutils literal notranslate"><span class="pre">auto_now_add</span></code>、<code class="docutils literal notranslate"><span class="pre">auto_now</span></code>、<code class="docutils literal notranslate"><span class="pre">default</span></code> は相互に排他的です。これらのオプションを組み合わせるとエラーが発生します。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>現在実装されているように、<code class="docutils literal notranslate"><span class="pre">auto_now</span></code> や <code class="docutils literal notranslate"><span class="pre">auto_now_add</span></code> を <code class="docutils literal notranslate"><span class="pre">True</span></code> にセットすると、フィールドは <code class="docutils literal notranslate"><span class="pre">editable=False</span></code> と <code class="docutils literal notranslate"><span class="pre">blank=True</span></code> にセットされます。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">auto_now</span></code> と <code class="docutils literal notranslate"><span class="pre">auto_now_add</span></code> オプションは、常に作成時または更新時の <a class="reference internal" href="../../topics/i18n/timezones.html#default-current-time-zone"><span class="std std-ref">デフォルトのタイムゾーン</span></a> の日付を使用します。もし別のものが必要であれば、<code class="docutils literal notranslate"><span class="pre">auto_now</span></code> や <code class="docutils literal notranslate"><span class="pre">auto_now_add</span></code> を使用する代わりに、独自の呼び出し可能オブジェクトをデフォルトとして使用するか、 <code class="docutils literal notranslate"><span class="pre">save()</span></code> をオーバーライドするか、あるいは <code class="docutils literal notranslate"><span class="pre">DateField</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code> を使用し、表示時に datetime から date への変換をどのように処理するかを検討するとよいでしょう。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> には常に <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> インスタンスを使用してください。</p>
<p><code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> インスタンスを持っている場合は、まずそれを <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> に変換することをお勧めします。変換しない場合、<a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> は <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> を <a class="reference internal" href="../../topics/i18n/timezones.html#default-current-time-zone"><span class="std std-ref">デフォルトのタイムゾーン</span></a> にローカライズし、<code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> インスタンスに変換してその時間部分を削除します。これは、保存および比較の両方において当てはまります。</p>
</div>
</section>
<section id="s-datetimefield">
<span id="datetimefield"></span><h3><code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code><a class="headerlink" href="#datetimefield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.DateTimeField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DateTimeField</span></span>(<em class="sig-param"><span class="n"><span class="pre">auto_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_now_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1552"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.DateTimeField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Python で <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> インスタンスによって表される日付と時刻です。<a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> と同じくいくつかの追加的な引数を持ちます:</p>
<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.DateTimeInput" title="django.forms.DateTimeInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeInput</span></code></a> です。管理画面では、JavaScript のショートカットを使って <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextInput</span></code></a> ウィジェットを 2 つに分けて使用します。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> には常に <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> インスタンスを使用してください。</p>
<p><code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> インスタンスを持っている場合は、まずそれを <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> に変換することをお勧めします。変換しない場合、<a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> は時間部分に <a class="reference internal" href="../../topics/i18n/timezones.html#default-current-time-zone"><span class="std std-ref">デフォルトのタイムゾーン</span></a> の午前0時を使用します。これは、保存および比較の両方において当てはまります。<code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> インスタンスと <a class="reference internal" href="#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a> の日付部分を比較するには、<a class="reference internal" href="querysets.html#std-fieldlookup-date"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">date</span></code></a> ルックアップを使用してください。</p>
</div>
</section>
<section id="s-decimalfield">
<span id="decimalfield"></span><h3><code class="docutils literal notranslate"><span class="pre">DecimalField</span></code><a class="headerlink" href="#decimalfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.DecimalField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DecimalField</span></span>(<em class="sig-param"><span class="n"><span class="pre">max_digits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimal_places</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1693"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.DecimalField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>固定精度の10進数で、Python では <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> インスタンスで表されます。これは <a class="reference internal" href="../validators.html#django.core.validators.DecimalValidator" title="django.core.validators.DecimalValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecimalValidator</span></code></a> を使用して入力を検証します。</p>
<p>以下の <strong>必須の</strong> 引数があります：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.DecimalField.max_digits">
<span class="sig-prename descclassname"><span class="pre">DecimalField.</span></span><span class="sig-name descname"><span class="pre">max_digits</span></span><a class="headerlink" href="#django.db.models.DecimalField.max_digits" title="Link to this definition">¶</a></dt>
<dd><p>数値内で使える桁数の最大値です。 <code class="docutils literal notranslate"><span class="pre">decimal_places</span></code> 以上でなければならない点に注意してください。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.DecimalField.decimal_places">
<span class="sig-prename descclassname"><span class="pre">DecimalField.</span></span><span class="sig-name descname"><span class="pre">decimal_places</span></span><a class="headerlink" href="#django.db.models.DecimalField.decimal_places" title="Link to this definition">¶</a></dt>
<dd><p>数値とともに保持される小数点以下の位の数です。</p>
</dd></dl>

<p>例えば、小数点以下2桁の分解能で <code class="docutils literal notranslate"><span class="pre">999.99</span></code> までの数値を保存するには、次のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>小数点以下第10位の精度で約10億までを保持するには:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>このフィールドのデフォルトのフォームウィジェットは、<a class="reference internal" href="../forms/fields.html#django.forms.Field.localize" title="django.forms.Field.localize"><code class="xref py py-attr docutils literal notranslate"><span class="pre">localize</span></code></a> が <code class="docutils literal notranslate"><span class="pre">False</span></code> のとき <a class="reference internal" href="../forms/widgets.html#django.forms.NumberInput" title="django.forms.NumberInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumberInput</span></code></a> で、そうでなければ <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextInput</span></code></a> となります。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><a class="reference internal" href="#django.db.models.FloatField" title="django.db.models.FloatField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatField</span></code></a> クラスと <a class="reference internal" href="#django.db.models.DecimalField" title="django.db.models.DecimalField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecimalField</span></code></a> クラスの違いについては <a class="reference internal" href="#floatfield-vs-decimalfield"><span class="std std-ref">FloatField vs. DecimalField</span></a> を参照してください。また、Decimal に関する <a class="reference internal" href="../databases.html#sqlite-decimal-handling"><span class="std std-ref">SQLite の制限</span></a> についても注意してください。</p>
</div>
</section>
<section id="s-durationfield">
<span id="durationfield"></span><h3><code class="docutils literal notranslate"><span class="pre">DurationField</span></code><a class="headerlink" href="#durationfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.DurationField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DurationField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1848"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.DurationField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>時刻の期間を保持するフィールドで、 Python の <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> によってモデル化されます。PostgreSQL で使われるときに用いられるデータ型は <code class="docutils literal notranslate"><span class="pre">interval</span></code> で、Oracle でのデータ型は <code class="docutils literal notranslate"><span class="pre">INTERVAL</span> <span class="pre">DAY(9)</span> <span class="pre">TO</span> <span class="pre">SECOND(6)</span></code> です。 それ以外では、マイクロ秒の <code class="docutils literal notranslate"><span class="pre">bigint</span></code> が使われます。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">DurationField</span></code> での演算はほとんどの場合で機能します。ただし、PostgreSQL 以外のデータベースでは、<code class="docutils literal notranslate"><span class="pre">DurationField</span></code> の値と <code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code> インスタンス上の演算を比較することは期待通りに機能しません。</p>
</div>
</section>
<section id="s-emailfield">
<span id="emailfield"></span><h3><code class="docutils literal notranslate"><span class="pre">EmailField</span></code><a class="headerlink" href="#emailfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.EmailField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">EmailField</span></span>(<em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">254</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1913"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.EmailField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="../validators.html#django.core.validators.EmailValidator" title="django.core.validators.EmailValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmailValidator</span></code></a> を使って、値が有効なメールアドレスであるかどうかをチェックする <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> です。</p>
</section>
<section id="s-filefield">
<span id="filefield"></span><h3><code class="docutils literal notranslate"><span class="pre">FileField</span></code><a class="headerlink" href="#filefield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.FileField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FileField</span></span>(<em class="sig-param"><span class="n"><span class="pre">upload_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L236"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.FileField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>ファイルアップロードのフィールドです。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">primary_key</span></code> 引数はサポートされておらず、使用するとエラーになります。</p>
</div>
<p>以下のオプション引数があります：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FileField.upload_to">
<span class="sig-prename descclassname"><span class="pre">FileField.</span></span><span class="sig-name descname"><span class="pre">upload_to</span></span><a class="headerlink" href="#django.db.models.FileField.upload_to" title="Link to this definition">¶</a></dt>
<dd><p>この属性は、アップロードディレクトリとファイル名を設定する方法を提供し、2 つの方法でセットできます。どちらの場合も、値は <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.save" title="django.core.files.storage.Storage.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Storage.save()</span></code></a> メソッドに渡されます。</p>
<p>文字列値または <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a> を指定する場合、 <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">strftime()</span></code></a> フォーマットを含むことができます。これはファイルアップロードの日時に置き換えられます（アップロードされたファイルで指定されたディレクトリが一杯にならないようにするためです）。例えば以下のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># file will be uploaded to MEDIA_ROOT/uploads</span>
    <span class="n">upload</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&quot;uploads/&quot;</span><span class="p">)</span>
    <span class="c1"># or...</span>
    <span class="c1"># file will be saved to MEDIA_ROOT/uploads/2015/01/30</span>
    <span class="n">upload</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s2">&quot;uploads/%Y/%m/</span><span class="si">%d</span><span class="s2">/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>デフォルトの <a class="reference internal" href="../files/storage.html#django.core.files.storage.FileSystemStorage" title="django.core.files.storage.FileSystemStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileSystemStorage</span></code></a> を使用している場合、この文字列の値が <a class="reference internal" href="../settings.html#std-setting-MEDIA_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code></a> パスに追加され、アップロードされたファイルが保存されるローカルファイルシステムの場所になります。別のストレージを使用している場合は、そのストレージのドキュメントで <code class="docutils literal notranslate"><span class="pre">upload_to</span></code> の扱い方を確認してください。</p>
<p><code class="docutils literal notranslate"><span class="pre">upload_to</span></code> は関数のなどの呼び出し可能オブジェクトにすることもできます。これはファイル名を含むアップロードパスを取得するために呼び出されます。この呼び出し可能オブジェクトは2つの引数を受け取り、ストレージシステムに渡すUnixスタイルのパス（フォワードスラッシュ付き）を返さなければなりません。2つの引数は</p>
<table class="docutils">
<thead>
<tr class="row-odd"><th class="head"><p>引数</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">instance</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FileField</span></code> が定義されているモデルのインスタンス。具体的には、そのファイルが格納されている特定のインスタンスです。</p>
<p>ほとんどの場合、このオブジェクトはまだデータベースに保存されていないため、デフォルトの <code class="docutils literal notranslate"><span class="pre">AutoField</span></code> を使用している場合、 <em>プライマリキーフィールドの値をまだ持っていない可能性があります</em> 。</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>ファイルに元々与えられていたファイル名。これは、最終的な宛先パスを決定するときに考慮されることもあれば、考慮されないこともあります。</p></td>
</tr>
</tbody>
</table>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">user_directory_path</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="c1"># file will be uploaded to MEDIA_ROOT/user_&lt;id&gt;/&lt;filename&gt;</span>
    <span class="k">return</span> <span class="s2">&quot;user_</span><span class="si">{0}</span><span class="s2">/</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">upload</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="n">user_directory_path</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FileField.storage">
<span class="sig-prename descclassname"><span class="pre">FileField.</span></span><span class="sig-name descname"><span class="pre">storage</span></span><a class="headerlink" href="#django.db.models.FileField.storage" title="Link to this definition">¶</a></dt>
<dd><p>ストレージオブジェクト、またはストレージオブジェクトを返す呼び出し可能オブジェクトです。これはファイルの保存と取得を行います。このオブジェクトの渡し方の詳細については <a class="reference internal" href="../../topics/files.html"><span class="doc">ファイルの管理</span></a> を参照してください。</p>
</dd></dl>

<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClearableFileInput</span></code></a> です。</p>
<p>モデル内で a <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> や <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> (後述) 使うにはいくつかのステップを取ります:</p>
<ol class="arabic simple">
<li><p>設定ファイルでは、 <a class="reference internal" href="../settings.html#std-setting-MEDIA_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code></a> を Django にアップロードされたファイルを保存するディレクトリへのフルパスを指定する必要があります（パフォーマンス上、これらのファイルはデータベースには保存されません）。 <a class="reference internal" href="../settings.html#std-setting-MEDIA_URL"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_URL</span></code></a> をそのディレクトリの公開 URL にします。このディレクトリは Web サーバのユーザアカウントで書き込み可能である必要があります。</p></li>
<li><p>モデルに <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> または <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> を追加し、 <a class="reference internal" href="#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upload_to</span></code></a> オプションを定義して、ファイルをアップロードする <a class="reference internal" href="../settings.html#std-setting-MEDIA_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code></a> のサブディレクトリを指定します。</p></li>
<li><p>データベースに保存されるのは、ファイルへのパス (<a class="reference internal" href="../settings.html#std-setting-MEDIA_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code></a> からの相対パス) だけです。Django 組み込みの <a class="reference internal" href="#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><code class="xref py py-attr docutils literal notranslate"><span class="pre">url</span></code></a> 属性を使うと便利です。例えば、 <a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> が <code class="docutils literal notranslate"><span class="pre">mug_shot</span></code> という名前の場合、 <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">object.mug_shot.url</span> <span class="pre">}}</span></code> でテンプレート内の画像の絶対パスを取得できます。</p></li>
</ol>
<p>例えば、 <a class="reference internal" href="../settings.html#std-setting-MEDIA_ROOT"><code class="xref std std-setting docutils literal notranslate"><span class="pre">MEDIA_ROOT</span></code></a> が <code class="docutils literal notranslate"><span class="pre">'/home/media'</span></code> に設定され、 <a class="reference internal" href="#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upload_to</span></code></a> が <code class="docutils literal notranslate"><span class="pre">'photos/%Y/%m/%d'</span></code> に設定されているとします。 <a class="reference internal" href="#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">upload_to</span></code></a> の <code class="docutils literal notranslate"><span class="pre">'%Y/%m/%d'</span></code> の部分は <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.13)"><code class="xref py py-func docutils literal notranslate"><span class="pre">strftime()</span></code></a> フォーマットです。<code class="docutils literal notranslate"><span class="pre">'%Y'</span></code> は4桁の年、<code class="docutils literal notranslate"><span class="pre">'%m'</span></code> は2桁の月、<code class="docutils literal notranslate"><span class="pre">'%d'</span></code> は2桁の日です。2007年1月15日にファイルをアップロードすると、 <code class="docutils literal notranslate"><span class="pre">/home/media/photos/2007/01/15</span></code> というディレクトリに保存されます。</p>
<p>アップロードされたファイルのディスク上のファイル名やファイルサイズを取得したい場合は、それぞれ <a class="reference internal" href="../files/file.html#django.core.files.File.name" title="django.core.files.File.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> 属性と <a class="reference internal" href="../files/file.html#django.core.files.File.size" title="django.core.files.File.size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">size</span></code></a> 属性を使うことができます。利用可能な属性やメソッドの詳細については <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> クラスリファレンス と <a class="reference internal" href="../../topics/files.html"><span class="doc">ファイルの管理</span></a> トピックガイド を参照してください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>このファイルは、モデルをデータベースに保存する際に一緒に保存されるため、ディスク上で実際に使用されるファイル名は、モデルが保存されるまで当てになりません。</p>
</div>
<p>アップロードされたファイルの相対URLは <a class="reference internal" href="#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><code class="xref py py-attr docutils literal notranslate"><span class="pre">url</span></code></a> 属性で取得できます。内部的には、 <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> クラスの <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">url()</span></code></a> メソッドを呼び出します。</p>
<p id="file-upload-security">アップロードされたファイルを扱うときは常に、セキュリティホールを避けるために、アップロードする場所とファイルの種類に細心の注意を払う必要があることに注意してください。 <em>アップロードされたすべてのファイルを検証し</em> 、そのファイルがあなたが考えているものであることを確認してください。例えば、誰かがあなたのウェブサーバーのドキュメントルートにあるディレクトリに、検証なしでファイルをアップロードするのをやみくもに許可すると、誰かがCGIやPHPスクリプトをアップロードし、あなたのサイトのそのURLにアクセスしてスクリプトを実行できます。それを許してはいけません。</p>
<p>また、アップロードされたHTMLファイルであっても、ブラウザが実行できるため（サーバは実行できませんが）、XSS攻撃やCSRF攻撃と同様のセキュリティ上の脅威をもたらす可能性があることに注意してください。</p>
<p><a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> インスタンスは <code class="docutils literal notranslate"><span class="pre">varchar</span></code> カラムとしてデータベースに作成され、デフォルトの最大長は100文字です。他のフィールドと同様に、 <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> 引数を使用して最大長を変更できます。</p>
<section id="s-filefield-and-fieldfile">
<span id="filefield-and-fieldfile"></span><h4><code class="docutils literal notranslate"><span class="pre">FileField</span></code> と <code class="docutils literal notranslate"><span class="pre">FieldFile</span></code><a class="headerlink" href="#filefield-and-fieldfile" title="Link to this heading">¶</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FieldFile</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L20"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>モデル上の <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> にアクセスするとき、元となるファイルにアアクセスするためのプロキシとして、<a class="reference internal" href="#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldFile</span></code></a> のインスタンスが与えられます。</p>
<p><a class="reference internal" href="#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldFile</span></code></a>  の API は <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> の API を反映していますが、主な違いが 1 つあります: <em>クラスによってラップされたオブジェクトは必ずしも Python のビルトインのファイルオブジェクトのラッパーであるとは限りません。</em> 代わりに、<a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.open" title="django.core.files.storage.Storage.open"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Storage.open()</span></code></a> メソッドの結果を包むラッパーで、これは  <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> オブジェクトもしくは <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> API の独自ストレージの実装となります。</p>
<p><code class="docutils literal notranslate"><span class="pre">read()</span></code> や <code class="docutils literal notranslate"><span class="pre">write()</span></code> など、<a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> から継承されたAPIに加えて、<a class="reference internal" href="#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">FieldFile</span></code></a> には基になるファイルとやり取りするために使用できるいくつかのメソッドが含まれています：</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>このクラスの 2 つのメソッド、<a class="reference internal" href="#django.db.models.fields.files.FieldFile.save" title="django.db.models.fields.files.FieldFile.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a> と <a class="reference internal" href="#django.db.models.fields.files.FieldFile.delete" title="django.db.models.fields.files.FieldFile.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code></a> は、デフォルトで、関連する FieldFile のモデルオブジェクトをデータベースに保存します。</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.name">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#django.db.models.fields.files.FieldFile.name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>関連する <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> の <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> のルートからの相対パスを含むファイル名です。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.path">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">path</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L63"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.path" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>ファイルのローカルファイルシステムパスにアクセスするための読み取り専用プロパティ。基になる <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> クラスの <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.path" title="django.core.files.storage.Storage.path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">path()</span></code></a> メソッドを呼び出します。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.size">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">size</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L73"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.size" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>元となる <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.size" title="django.core.files.storage.Storage.size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Storage.size()</span></code></a> メソッドの結果です。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.url">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">url</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L68"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.url" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>元となる <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> クラス の <a class="reference internal" href="../files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><code class="xref py py-meth docutils literal notranslate"><span class="pre">url()</span></code></a> メソッドを呼ぶことによって、ファイルの相対 URL にアクセスするための読み取り専用プロパティです。</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.open">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">open</span></span>(<em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rb'</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L79"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.open" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このインスタンスに関連付けられたファイルを、指定された <code class="docutils literal notranslate"><span class="pre">モード</span></code> で開くか、開き直します。標準の Python の <code class="docutils literal notranslate"><span class="pre">open()</span></code> メソッドとは違い、ファイルのデスクリプタを返しません。</p>
<p>元となるファイルはアクセスするときに暗黙的に開かれるので、元となるファイルにポインタをリセットするためか <code class="docutils literal notranslate"><span class="pre">モード</span></code> を変更するため以外には、このメソッドを呼ぶ必要はないでしょう。</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.close">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">close</span></span>()<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L134"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.close" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>標準の Python の <code class="docutils literal notranslate"><span class="pre">file.close()</span></code> メソッドのように動作し、このインスタンスに関連付けられたファイルを閉じます。</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.save">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">save</span></span>(<em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L97"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.save" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このメソッドは、ファイル名とファイルの内容を取り、それらをフィールドのストレージクラスに渡し、格納されたファイルをモデルフィールドに関連付けます。 手動でファイルデータをモデル上の <a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> インスタンスに関連付けるには、 <code class="docutils literal notranslate"><span class="pre">save()</span></code> メソッドを使用してそのファイルデータを保持します。</p>
<p>2 つの必要な引数をとります: <code class="docutils literal notranslate"><span class="pre">name</span></code> はファイルの名前で、<code class="docutils literal notranslate"><span class="pre">content</span></code> はファイルの内容を含むオブジェクトです。 省略可能な <code class="docutils literal notranslate"><span class="pre">save</span></code> 引数は、このフィールドに関連付けられたファイルが変更された後にモデルインスタンスが保存されるかどうかをコントロールします。 デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> です。</p>
<p><code class="docutils literal notranslate"><span class="pre">content</span></code> 引数は、Python のビルトインのファイルオブジェクトではなく、<a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.files.File</span></code></a> のインスタンスでなければならないことに注意してください。 以下のように、既存の Python ファイルオブジェクトから <a class="reference internal" href="../files/file.html#django.core.files.File" title="django.core.files.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> を構築できます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.core.files</span><span class="w"> </span><span class="kn">import</span> <span class="n">File</span>

<span class="c1"># Open an existing file using Python&#39;s built-in open()</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;/path/to/hello.world&quot;</span><span class="p">)</span>
<span class="n">myfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>もしくは、以下のように Python の文字列から構築することもできます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.core.files.base</span><span class="w"> </span><span class="kn">import</span> <span class="n">ContentFile</span>

<span class="n">myfile</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>より詳しくは <a class="reference internal" href="../../topics/files.html"><span class="doc">ファイルの管理</span></a> を参照してください。</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.fields.files.FieldFile.delete">
<span class="sig-prename descclassname"><span class="pre">FieldFile.</span></span><span class="sig-name descname"><span class="pre">delete</span></span>(<em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L109"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.fields.files.FieldFile.delete" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このインスタンスに関連付けられているファイルを削除し、フィールドのすべての属性をクリアします。 注: このメソッドは、<code class="docutils literal notranslate"><span class="pre">delete()</span></code> が呼び出されたときにファイルが開いた場合、ファイルを閉じます。</p>
<p>省略可能な <code class="docutils literal notranslate"><span class="pre">save</span></code> 引数は、このフィールドに関連付けられたファイルが削除された後にモデルインスタンスを保存するかどうかをコントロールします。 デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> です。</p>
<p>モデルを削除するとき、関連ファイルは削除されない点に注意してください。 孤立したファイルをクリーンアップする必要がある場合、自分で処理する必要があります (たとえば、手動で実行したり、cron などを通して定期的に実行される独自の管理コマンドです)。</p>
</section>
</section>
<section id="s-filepathfield">
<span id="filepathfield"></span><h3><code class="docutils literal notranslate"><span class="pre">FilePathField</span></code><a class="headerlink" href="#filepathfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.FilePathField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FilePathField</span></span>(<em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_folders</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1939"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.FilePathField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> は選択肢をファイルシステム上の特定のディレクトリにあるファイル名に限定します。いくつかの特別な引数を持ちますが、最初の引数は <strong>必須</strong> です：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FilePathField.path">
<span class="sig-prename descclassname"><span class="pre">FilePathField.</span></span><span class="sig-name descname"><span class="pre">path</span></span><a class="headerlink" href="#django.db.models.FilePathField.path" title="Link to this definition">¶</a></dt>
<dd><p>必須です。<a class="reference internal" href="#django.db.models.FilePathField" title="django.db.models.FilePathField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePathField</span></code></a> が選択肢から取得するディレクトリへの、ファイルシステムの絶対パスです。例: <code class="docutils literal notranslate"><span class="pre">&quot;/home/images&quot;</span></code>。</p>
<p><code class="docutils literal notranslate"><span class="pre">path</span></code> には呼び出し可能オブジェクトを指定することもでき、これは例えば実行時に動的にパスを設定する関数などです。例：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">def</span><span class="w"> </span><span class="nf">images_path</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">LOCAL_FILE_DIR</span><span class="p">,</span> <span class="s2">&quot;images&quot;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FilePathField</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">images_path</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FilePathField.match">
<span class="sig-prename descclassname"><span class="pre">FilePathField.</span></span><span class="sig-name descname"><span class="pre">match</span></span><a class="headerlink" href="#django.db.models.FilePathField.match" title="Link to this definition">¶</a></dt>
<dd><p>省略可能です。正規表現で、文字列として、<a class="reference internal" href="#django.db.models.FilePathField" title="django.db.models.FilePathField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePathField</span></code></a> がファイル名をフィルタリングするために使用します。 正規表現は、フルパスではなくベースファイル名に適用される点に注意してください。 例: <code class="docutils literal notranslate"><span class="pre">&quot;foo.*\.txt$&quot;</span></code>。これは <code class="docutils literal notranslate"><span class="pre">foo23.txt</span></code> とは合致しますが、<code class="docutils literal notranslate"><span class="pre">bar.txt</span></code> や <code class="docutils literal notranslate"><span class="pre">foo23.png</span></code> とは合致しません。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FilePathField.recursive">
<span class="sig-prename descclassname"><span class="pre">FilePathField.</span></span><span class="sig-name descname"><span class="pre">recursive</span></span><a class="headerlink" href="#django.db.models.FilePathField.recursive" title="Link to this definition">¶</a></dt>
<dd><p>省略可能です。<code class="docutils literal notranslate"><span class="pre">True</span></code> か <code class="docutils literal notranslate"><span class="pre">False</span></code> のどちらかを取り、デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。<a class="reference internal" href="#django.db.models.FilePathField.path" title="django.db.models.FilePathField.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a> の全てのサブディレクトリを含むかどうかを指定します。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FilePathField.allow_files">
<span class="sig-prename descclassname"><span class="pre">FilePathField.</span></span><span class="sig-name descname"><span class="pre">allow_files</span></span><a class="headerlink" href="#django.db.models.FilePathField.allow_files" title="Link to this definition">¶</a></dt>
<dd><p>省略可能です。<code class="docutils literal notranslate"><span class="pre">True</span></code> か <code class="docutils literal notranslate"><span class="pre">False</span></code> を取り、デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> です。指定された場所にあるファイルを含むかどうかを指定します。 これか <a class="reference internal" href="#django.db.models.FilePathField.allow_folders" title="django.db.models.FilePathField.allow_folders"><code class="xref py py-attr docutils literal notranslate"><span class="pre">allow_folders</span></code></a> のどちらかを <code class="docutils literal notranslate"><span class="pre">True</span></code> にする必要があります。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.FilePathField.allow_folders">
<span class="sig-prename descclassname"><span class="pre">FilePathField.</span></span><span class="sig-name descname"><span class="pre">allow_folders</span></span><a class="headerlink" href="#django.db.models.FilePathField.allow_folders" title="Link to this definition">¶</a></dt>
<dd><p>省略可能です。<code class="docutils literal notranslate"><span class="pre">True</span></code> か <code class="docutils literal notranslate"><span class="pre">False</span></code> を取り、デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。指定した場所にあるフォルダーを含むかどうかを指定します。これか <a class="reference internal" href="#django.db.models.FilePathField.allow_files" title="django.db.models.FilePathField.allow_files"><code class="xref py py-attr docutils literal notranslate"><span class="pre">allow_files</span></code></a> のどちらかを <code class="docutils literal notranslate"><span class="pre">True</span></code> にする必要があります。</p>
</dd></dl>

<p>1つの可能性は、フルパスではなく、ベースファイル名に <a class="reference internal" href="#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><code class="xref py py-attr docutils literal notranslate"><span class="pre">match</span></code></a> が適用されることです。 したがって、この例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FilePathField</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/home/images&quot;</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;foo.*&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>...は、<code class="docutils literal notranslate"><span class="pre">/home/images/foo/bar.png</span></code> ではなく <code class="docutils literal notranslate"><span class="pre">/home/images/foo.png</span></code> とマッチします。これは、<a class="reference internal" href="#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><code class="xref py py-attr docutils literal notranslate"><span class="pre">match</span></code></a> がベースのファイル名に適用されるからです (<code class="docutils literal notranslate"><span class="pre">foo.png</span></code> と <code class="docutils literal notranslate"><span class="pre">bar.png</span></code>)。</p>
<p><a class="reference internal" href="#django.db.models.FilePathField" title="django.db.models.FilePathField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilePathField</span></code></a> のインスタンスは、デフォルトが最大 100 文字の <code class="docutils literal notranslate"><span class="pre">varchar</span></code> カラムとして、データベース上に生成されます。他のフィールドと同様に、<a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> 引数を使って最大文字数を変更できます。</p>
</section>
<section id="s-floatfield">
<span id="floatfield"></span><h3><code class="docutils literal notranslate"><span class="pre">FloatField</span></code><a class="headerlink" href="#floatfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.FloatField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">FloatField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2015"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.FloatField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">float</span></code> インスタンスによって表される Python の浮動小数点数です。</p>
<p>このフィールドのデフォルトのフォームウィジェットは、<a class="reference internal" href="../forms/fields.html#django.forms.Field.localize" title="django.forms.Field.localize"><code class="xref py py-attr docutils literal notranslate"><span class="pre">localize</span></code></a> が <code class="docutils literal notranslate"><span class="pre">False</span></code> のとき <a class="reference internal" href="../forms/widgets.html#django.forms.NumberInput" title="django.forms.NumberInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumberInput</span></code></a> で、そうでなければ <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextInput</span></code></a> となります。</p>
<div class="admonition-floatfield-vs-decimalfield admonition" id="floatfield-vs-decimalfield">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">FloatField</span></code> と <code class="docutils literal notranslate"><span class="pre">DecimalField</span></code> の比較</p>
<p><a class="reference internal" href="#django.db.models.FloatField" title="django.db.models.FloatField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatField</span></code></a> クラスは、<a class="reference internal" href="#django.db.models.DecimalField" title="django.db.models.DecimalField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecimalField</span></code></a> クラスと混同されることがあります。両方とも実数を表しますが、異なる方法で表現しています。<code class="docutils literal notranslate"><span class="pre">FloatField</span></code> は内部的には Python の <code class="docutils literal notranslate"><span class="pre">float</span></code> 型を使い、<code class="docutils literal notranslate"><span class="pre">DecimalField</span></code> は Python の <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> 型を使います。この 2 つの違いについては、 Python のドキュメント <a class="reference external" href="https://docs.python.org/3/library/decimal.html#module-decimal" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> module を参照してください。</p>
</div>
</section>
<section id="s-generatedfield">
<span id="generatedfield"></span><h3><code class="docutils literal notranslate"><span class="pre">GeneratedField</span></code><a class="headerlink" href="#generatedfield" title="Link to this heading">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 5.0.</span> </div>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.GeneratedField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GeneratedField</span></span>(<em class="sig-param"><span class="n"><span class="pre">expression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_persist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/generated.py#L11"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.GeneratedField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>常にモデル内の他のフィールドに基づいて計算されるフィールド。このフィールドはデータベース自身によって管理・更新されます。 <code class="docutils literal notranslate"><span class="pre">GENERATED</span> <span class="pre">ALWAYS</span></code> SQL 構文を使います。</p>
<p>生成カラムには、格納と仮想の2種類があります。格納生成カラムは書き込まれる (挿入もしくは更新される) ときに計算され、通常のカラムと同じようにストレージを占有します。仮想生成カラムはストレージを占有せず、読み込まれるときに計算されます。したがって、仮想生成カラムはビューに似ており、格納生成カラムはマテリアライズド・ビューに似ています。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.GeneratedField.expression">
<span class="sig-prename descclassname"><span class="pre">GeneratedField.</span></span><span class="sig-name descname"><span class="pre">expression</span></span><a class="headerlink" href="#django.db.models.GeneratedField.expression" title="Link to this definition">¶</a></dt>
<dd><p>モデルが変更されるたびにフィールドの値を自動的に設定するためにデータベースによって使用される <a class="reference internal" href="expressions.html#django.db.models.Expression" title="django.db.models.Expression"><code class="xref py py-class docutils literal notranslate"><span class="pre">Expression</span></code></a> 。</p>
<p>式は決定論的でなければならず、モデル内の（同じデータベース・テーブル内の）フィールドだけを参照しなければなりません。生成フィールドは他の生成フィールドを参照することはできません。データベースのバックエンドはさらなる制限を課すことができます。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.GeneratedField.output_field">
<span class="sig-prename descclassname"><span class="pre">GeneratedField.</span></span><span class="sig-name descname"><span class="pre">output_field</span></span><a class="headerlink" href="#django.db.models.GeneratedField.output_field" title="Link to this definition">¶</a></dt>
<dd><p>フィールドのデータ型を定義するモデルフィールドインスタンス。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.GeneratedField.db_persist">
<span class="sig-prename descclassname"><span class="pre">GeneratedField.</span></span><span class="sig-name descname"><span class="pre">db_persist</span></span><a class="headerlink" href="#django.db.models.GeneratedField.db_persist" title="Link to this definition">¶</a></dt>
<dd><p>データベースカラムが実際のカラムのようにストレージを占有するかどうかを決定します。 <code class="docutils literal notranslate"><span class="pre">False</span></code> の場合、カラムは仮想カラムとして動作し、データベースのストレージ領域を占有しません。</p>
<p>PostgreSQLは永続化 (persist) 列のみをサポートしています。Oracle は仮想列のみをサポートしています。</p>
</dd></dl>

<div class="admonition-refresh-the-data admonition">
<p class="admonition-title">データをリフレッシュしてください</p>
<p>データベースは常に値を計算しているので、 <a class="reference internal" href="instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save()</span></code></a> の後に新しい値にアクセスするには、例えば <a class="reference internal" href="instances.html#django.db.models.Model.refresh_from_db" title="django.db.models.Model.refresh_from_db"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_from_db()</span></code></a> を使ってオブジェクトをリロードする必要があります。</p>
</div>
<div class="admonition-database-limitations admonition">
<p class="admonition-title">データベースの制約</p>
<p>生成フィールドに関しては多くのデータベース固有の制限があり、Djangoはそれらを検証しないため、データベースがエラーを発生させる可能性があります。例えば、PostgreSQLでは、生成カラムで参照される関数や演算子は <code class="docutils literal notranslate"><span class="pre">IMMUTABLE</span></code> としてマークされている必要があります。</p>
<p>あなたのデータベースで <code class="docutils literal notranslate"><span class="pre">expression</span></code> がサポートされているかどうかを常に確認する必要があります。 <a class="reference external" href="https://mariadb.com/kb/en/generated-columns/#expression-support">MariaDB</a>, <a class="reference external" href="https://dev.mysql.com/doc/refman/en/create-table-generated-columns.html">MySQL</a>, <a class="reference external" href="https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__BABIIGBD">Oracle</a>, <a class="reference external" href="https://www.postgresql.org/docs/current/ddl-generated-columns.html">PostgreSQL</a>, <a class="reference external" href="https://www.sqlite.org/gencol.html#limitations">SQLite</a> のドキュメントを確認してください。</p>
</div>
</section>
<section id="s-genericipaddressfield">
<span id="genericipaddressfield"></span><h3><code class="docutils literal notranslate"><span class="pre">GenericIPAddressField</span></code><a class="headerlink" href="#genericipaddressfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.GenericIPAddressField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">GenericIPAddressField</span></span>(<em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'both'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack_ipv4</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2212"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.GenericIPAddressField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>IPv4 か IPv6 のアドレスで、文字列フォーマットです (例: <code class="docutils literal notranslate"><span class="pre">192.0.2.30</span></code> ないし <code class="docutils literal notranslate"><span class="pre">2a02:42fe::4</span></code>)。このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextInput</span></code></a> です。</p>
<p>IPv6 アドレスは、 <span class="target" id="index-2"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4291.html#section-2.2"><strong>RFC 4291 Section 2.2</strong></a> section 2.2 (同セクションの paragraph 3 で提案された IPv4 のフォーマットの使用を含む) にしたがって、 <code class="docutils literal notranslate"><span class="pre">::ffff:192.0.2.0</span></code> のように正規化します。たとえば、 <code class="docutils literal notranslate"><span class="pre">2001:0::0:01</span></code> は <code class="docutils literal notranslate"><span class="pre">2001::1</span></code> と正規化され、 <code class="docutils literal notranslate"><span class="pre">::ffff:0a0a:0a0a</span></code> は <code class="docutils literal notranslate"><span class="pre">::ffff:10.10.10.10</span></code> と正規化されます。そして、すべての文字は小文字に変換されます。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.GenericIPAddressField.protocol">
<span class="sig-prename descclassname"><span class="pre">GenericIPAddressField.</span></span><span class="sig-name descname"><span class="pre">protocol</span></span><a class="headerlink" href="#django.db.models.GenericIPAddressField.protocol" title="Link to this definition">¶</a></dt>
<dd><p>有効なインプットを、指定したプロトコルに制限します。 使用可能な値は <code class="docutils literal notranslate"><span class="pre">'both'</span></code> (デフォルト)、<code class="docutils literal notranslate"><span class="pre">'IPv4'</span></code>、<code class="docutils literal notranslate"><span class="pre">'IPv6'</span></code> のどれかです。マッチングは大文字と小文字を区別しません。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.GenericIPAddressField.unpack_ipv4">
<span class="sig-prename descclassname"><span class="pre">GenericIPAddressField.</span></span><span class="sig-name descname"><span class="pre">unpack_ipv4</span></span><a class="headerlink" href="#django.db.models.GenericIPAddressField.unpack_ipv4" title="Link to this definition">¶</a></dt>
<dd><p>IPv4 にマッピングされた <code class="docutils literal notranslate"><span class="pre">::ffff:192.0.2.1</span></code> のようなアドレスをアンパックします。このオプションを有効にすると、このアドレスは <code class="docutils literal notranslate"><span class="pre">192.0.2.1</span></code> とアンパックされます。デフォルトは無効です。<code class="docutils literal notranslate"><span class="pre">protocol</span></code> が <code class="docutils literal notranslate"><span class="pre">'both'</span></code> に設定されている場合にだけ使用できます。</p>
</dd></dl>

<p>ブランク値を要する場合、ブランク値は null として保持されるため、null 値を許容する必要があります。</p>
</section>
<section id="s-imagefield">
<span id="imagefield"></span><h3><code class="docutils literal notranslate"><span class="pre">ImageField</span></code><a class="headerlink" href="#imagefield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.ImageField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ImageField</span></span>(<em class="sig-param"><span class="n"><span class="pre">upload_to</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/files.py#L417"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.ImageField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> から全ての属性とメソッドを継承して、さらにアップロードされたオブジェクトが有効な画像であることを検証します。</p>
<p><a class="reference internal" href="#django.db.models.FileField" title="django.db.models.FileField"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileField</span></code></a> で使える専用の属性に加えて、<a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> には <code class="docutils literal notranslate"><span class="pre">height</span></code> と <code class="docutils literal notranslate"><span class="pre">width</span></code> 属性があります。</p>
<p>これらの属性に対するクエリを容易にするために、<a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> は以下のオプション引数を持ちます：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ImageField.height_field">
<span class="sig-prename descclassname"><span class="pre">ImageField.</span></span><span class="sig-name descname"><span class="pre">height_field</span></span><a class="headerlink" href="#django.db.models.ImageField.height_field" title="Link to this definition">¶</a></dt>
<dd><p>画像オブジェクトがセットされるたびに自動的に画像の高さが入力されるモデルフィールドの名前。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ImageField.width_field">
<span class="sig-prename descclassname"><span class="pre">ImageField.</span></span><span class="sig-name descname"><span class="pre">width_field</span></span><a class="headerlink" href="#django.db.models.ImageField.width_field" title="Link to this definition">¶</a></dt>
<dd><p>画像オブジェクトがセットされるたびに自動的に画像の幅が入力されるモデルフィールドの名前。</p>
</dd></dl>

<p><a class="extlink-pypi reference external" href="https://pypi.org/project/pillow/">pillow</a> ライブラリを必要とします。</p>
<p><a class="reference internal" href="#django.db.models.ImageField" title="django.db.models.ImageField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ImageField</span></code></a> のインスタンスは、デフォルトが最大 100 文字の <code class="docutils literal notranslate"><span class="pre">varchar</span></code> カラムとして、データベース上に生成されます。他のフィールドと同様に、<a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> 引数を使って最大文字数を変更できます。</p>
<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClearableFileInput</span></code></a> です。</p>
</section>
<section id="s-integerfield">
<span id="integerfield"></span><h3><code class="docutils literal notranslate"><span class="pre">IntegerField</span></code><a class="headerlink" href="#integerfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.IntegerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">IntegerField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2057"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.IntegerField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>整数。 <code class="docutils literal notranslate"><span class="pre">-2147483648</span></code> から <code class="docutils literal notranslate"><span class="pre">2147483647</span></code> までの値は、 Django がサポートする全てのデータベースで安全です。</p>
<p><a class="reference internal" href="../validators.html#django.core.validators.MinValueValidator" title="django.core.validators.MinValueValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MinValueValidator</span></code></a> と <a class="reference internal" href="../validators.html#django.core.validators.MaxValueValidator" title="django.core.validators.MaxValueValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaxValueValidator</span></code></a> を使って、デフォルトのデータベースがサポートする値に基づいて入力を検証します。</p>
<p>このフィールドのデフォルトのフォームウィジェットは、<a class="reference internal" href="../forms/fields.html#django.forms.Field.localize" title="django.forms.Field.localize"><code class="xref py py-attr docutils literal notranslate"><span class="pre">localize</span></code></a> が <code class="docutils literal notranslate"><span class="pre">False</span></code> のとき <a class="reference internal" href="../forms/widgets.html#django.forms.NumberInput" title="django.forms.NumberInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumberInput</span></code></a> で、そうでなければ <a class="reference internal" href="../forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextInput</span></code></a> となります。</p>
</section>
<section id="s-jsonfield">
<span id="jsonfield"></span><h3><code class="docutils literal notranslate"><span class="pre">JSONField</span></code><a class="headerlink" href="#jsonfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.JSONField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">JSONField</span></span>(<em class="sig-param"><span class="n"><span class="pre">encoder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decoder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/json.py#L22"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.JSONField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>JSON エンコードされたデータを格納するためのフィールドです。Python では、データは Python ネイティブフォーマットで表現されます。辞書、リスト、文字列、数値、真偽値、そして <code class="docutils literal notranslate"><span class="pre">None</span></code> です。</p>
<p><code class="docutils literal notranslate"><span class="pre">JSONField</span></code> はMariaDB、MySQL、Oracle、PostgreSQL、(<a class="reference internal" href="../databases.html#sqlite-json1"><span class="std std-ref">JSON1 エクステンションが有効な</span></a>) SQLite でサポートされています。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.JSONField.encoder">
<span class="sig-prename descclassname"><span class="pre">JSONField.</span></span><span class="sig-name descname"><span class="pre">encoder</span></span><a class="headerlink" href="#django.db.models.JSONField.encoder" title="Link to this definition">¶</a></dt>
<dd><p>オプションの <a class="reference external" href="https://docs.python.org/3/library/json.html#json.JSONEncoder" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">json.JSONEncoder</span></code></a> サブクラスで、標準の JSON シリアライザがサポートしていないデータ型 (<code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> や <a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UUID</span></code></a> など) をシリアライズできます。例えば、 <a class="reference internal" href="../../topics/serialization.html#django.core.serializers.json.DjangoJSONEncoder" title="django.core.serializers.json.DjangoJSONEncoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DjangoJSONEncoder</span></code></a> クラスが使用できます。</p>
<p>デフォルトは <code class="docutils literal notranslate"><span class="pre">json.JSONEncoder</span></code> です。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.JSONField.decoder">
<span class="sig-prename descclassname"><span class="pre">JSONField.</span></span><span class="sig-name descname"><span class="pre">decoder</span></span><a class="headerlink" href="#django.db.models.JSONField.decoder" title="Link to this definition">¶</a></dt>
<dd><p>オプションの <a class="reference external" href="https://docs.python.org/3/library/json.html#json.JSONDecoder" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">json.JSONDecoder</span></code></a> サブクラスで、データベースから取得した値をデシリアライズします。値はカスタムエンコーダーによって選択されたフォーマット(多くの場合文字列)になります。デシリアライズは、入力の型が確定できないことを考慮する必要があります。たとえば、<code class="docutils literal notranslate"><span class="pre">datetime</span></code> で設定されたのと同じフォーマットでたまたま存在していた文字列があたかも <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 型であるかのように返却されるリスクがあります。</p>
<p>デフォルトは <code class="docutils literal notranslate"><span class="pre">json.JSONDecoder</span></code> です。</p>
</dd></dl>

<p>データベース内の <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> をクエリするには、 <a class="reference internal" href="../../topics/db/queries.html#querying-jsonfield"><span class="std std-ref">JSONField へのクエリ</span></a> を参照してください。</p>
<div class="admonition-default-value admonition">
<p class="admonition-title">デフォルト値について</p>
<p>フィールドに <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default</span></code></a> を指定する場合、 <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> クラスのような呼び出し可能オブジェクトか、毎回新しいオブジェクトを返す関数にしてください。 <code class="docutils literal notranslate"><span class="pre">default={}</span></code> や <code class="docutils literal notranslate"><span class="pre">default=[]</span></code> のようなミュータブルなオブジェクトを誤って使用すると、すべてのインスタンス間で共有されるミュータブルなデフォルト値が作成されます。</p>
</div>
<div class="admonition-indexing admonition">
<p class="admonition-title">インデックスの作成</p>
<p><a class="reference internal" href="indexes.html#django.db.models.Index" title="django.db.models.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> と <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.db_index</span></code></a> はどちらも B-tree インデックスを作成しますが、<code class="docutils literal notranslate"><span class="pre">JSONField</span></code> をクエリする際には特に役に立ちません。PostgreSQL でだけ、より適した <a class="reference internal" href="../contrib/postgres/indexes.html#django.contrib.postgres.indexes.GinIndex" title="django.contrib.postgres.indexes.GinIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">GinIndex</span></code></a> を使うことができます。</p>
</div>
<div class="admonition-postgresql-users admonition">
<p class="admonition-title">PostgreSQL ユーザーの場合</p>
<p>PostgreSQLには2つのJSONベースのデータ型があります。 <code class="docutils literal notranslate"><span class="pre">json</span></code> と <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> です。これらの主な違いは、格納方法とクエリ方法です。PostgreSQLの <code class="docutils literal notranslate"><span class="pre">json</span></code> フィールドはJSONの元の文字列表現として格納され、キーに基づいてクエリを行うにはその場でデコードする必要があります。 <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> フィールドはJSONの実際の構造に基づいて格納され、インデックスを作成できます。そのトレードオフとして、<code class="docutils literal notranslate"><span class="pre">jsonb</span></code> フィールドへの書き込みに若干の追加コストが発生します。 <code class="docutils literal notranslate"><span class="pre">JSONField</span></code> は <code class="docutils literal notranslate"><span class="pre">jsonb</span></code> を使用します。</p>
</div>
<div class="admonition-oracle-users admonition">
<p class="admonition-title">Oracle のユーザーの場合</p>
<p>Oracle Database は JSON スカラー値の格納をサポートしていません。JSONオブジェクトと配列 (Pythonでは <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> と <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> を使って表現されます) だけがサポートされています。</p>
</div>
</section>
<section id="s-positivebigintegerfield">
<span id="positivebigintegerfield"></span><h3><code class="docutils literal notranslate"><span class="pre">PositiveBigIntegerField</span></code><a class="headerlink" href="#positivebigintegerfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.PositiveBigIntegerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PositiveBigIntegerField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2358"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.PositiveBigIntegerField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code></a> のようなものですが、特定の (データベース依存の) 値以下の値しか許しません。 <code class="docutils literal notranslate"><span class="pre">0</span></code> から <code class="docutils literal notranslate"><span class="pre">9223372036854775807</span></code> までの値は、 Django がサポートする全てのデータベースで安全です。</p>
</section>
<section id="s-positiveintegerfield">
<span id="positiveintegerfield"></span><h3><code class="docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code><a class="headerlink" href="#positiveintegerfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.PositiveIntegerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PositiveIntegerField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2373"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.PositiveIntegerField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a> とほぼ同じですが、正の値かゼロ (<code class="docutils literal notranslate"><span class="pre">0</span></code>) でなければなりません。Django によってサポートされる全てのデータベースで、<code class="docutils literal notranslate"><span class="pre">0</span></code> から <code class="docutils literal notranslate"><span class="pre">2147483647</span></code> までの値は安全です。後方互換性の理由から、値 <code class="docutils literal notranslate"><span class="pre">0</span></code> が有効となっています。</p>
</section>
<section id="s-positivesmallintegerfield">
<span id="positivesmallintegerfield"></span><h3><code class="docutils literal notranslate"><span class="pre">PositiveSmallIntegerField</span></code><a class="headerlink" href="#positivesmallintegerfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.PositiveSmallIntegerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PositiveSmallIntegerField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2388"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.PositiveSmallIntegerField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code></a> とほぼ同じですが、一定の (データベースに依存した) 値より下の値のみを許容します。Django でサポートされている全てのデータベースで、<code class="docutils literal notranslate"><span class="pre">0</span></code> から <code class="docutils literal notranslate"><span class="pre">32767</span></code> までの値は安全です。</p>
</section>
<section id="s-slugfield">
<span id="slugfield"></span><h3><code class="docutils literal notranslate"><span class="pre">SlugField</span></code><a class="headerlink" href="#slugfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.SlugField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SlugField</span></span>(<em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2403"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.SlugField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="../../glossary.html#term-slug"><span class="xref std std-term">スラグ (slug)</span></a> は新聞用語です。スラグとは、アルファベット、数字、アンダースコア、またはハイフンのみを含む、何かの短いラベルです。一般的にURLで使われます。</p>
<p>CharField のように、<a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> を指定することもできます (データベースの可搬性についてのノートとそのセクションの <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> も参照してください)。<a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> が指定されていないとき、Django はデフォルトの文字数 50 を使います。</p>
<p>暗黙的に <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.db_index</span></code></a> を <code class="docutils literal notranslate"><span class="pre">True</span></code> にセットします。</p>
<p>他の値に基づいて SlugField に自動的に値を事前入力すると便利なことがあります。 これは <a class="reference internal" href="../contrib/admin/index.html#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">prepopulated_fields</span></code></a> を使って管理画面で自動で実行できます。</p>
<p>バリデーションには <a class="reference internal" href="../validators.html#django.core.validators.validate_slug" title="django.core.validators.validate_slug"><code class="xref py py-class docutils literal notranslate"><span class="pre">validate_slug</span></code></a> または <a class="reference internal" href="../validators.html#django.core.validators.validate_unicode_slug" title="django.core.validators.validate_unicode_slug"><code class="xref py py-class docutils literal notranslate"><span class="pre">validate_unicode_slug</span></code></a> を使用します。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.SlugField.allow_unicode">
<span class="sig-prename descclassname"><span class="pre">SlugField.</span></span><span class="sig-name descname"><span class="pre">allow_unicode</span></span><a class="headerlink" href="#django.db.models.SlugField.allow_unicode" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> なら、フィールドはASCII文字に加えてUnicode文字も受け付けます。デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。</p>
</dd></dl>

</section>
<section id="s-smallautofield">
<span id="smallautofield"></span><h3><code class="docutils literal notranslate"><span class="pre">SmallAutoField</span></code><a class="headerlink" href="#smallautofield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.SmallAutoField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SmallAutoField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2880"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.SmallAutoField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a> のようなものですが、一定の (データベース依存の) 制限値以下の値しか許しません。 <code class="docutils literal notranslate"><span class="pre">1</span></code> から <code class="docutils literal notranslate"><span class="pre">32767</span></code> までの値は Django がサポートする全てのデータベースで安全です。</p>
</section>
<section id="s-smallintegerfield">
<span id="smallintegerfield"></span><h3><code class="docutils literal notranslate"><span class="pre">SmallIntegerField</span></code><a class="headerlink" href="#smallintegerfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.SmallIntegerField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SmallIntegerField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2174"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.SmallIntegerField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#django.db.models.IntegerField" title="django.db.models.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a> とほぼ同じですが、一定の (データベースに依存した) 値より下の値のみを許容します。Django でサポートされている全てのデータベースで、<code class="docutils literal notranslate"><span class="pre">-32768</span></code> から <code class="docutils literal notranslate"><span class="pre">32767</span></code> までの値は安全です。</p>
</section>
<section id="s-textfield">
<span id="textfield"></span><h3><code class="docutils literal notranslate"><span class="pre">TextField</span></code><a class="headerlink" href="#textfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.TextField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TextField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2440"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.TextField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>多量のテキストのフィールドです。このフィールドのデフォルトのフォームウィジェットは  <a class="reference internal" href="../forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><code class="xref py py-class docutils literal notranslate"><span class="pre">Textarea</span></code></a> です。</p>
<p><code class="docutils literal notranslate"><span class="pre">max_length</span></code> 属性を指定した場合、自動生成されたフォームフィールドの <a class="reference internal" href="../forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><code class="xref py py-class docutils literal notranslate"><span class="pre">Textarea</span></code></a> ウィジェット内で反映されます。ただし、モデルやデータベースのレベルでは施行されません。そのためには <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> を使用してください。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.TextField.db_collation">
<span class="sig-prename descclassname"><span class="pre">TextField.</span></span><span class="sig-name descname"><span class="pre">db_collation</span></span><a class="headerlink" href="#django.db.models.TextField.db_collation" title="Link to this definition">¶</a></dt>
<dd><p>オプション。フィールドのデータベース照合順序名(collation name)です。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>照合順序名は標準化されていません。そのため、これは複数のデータベースバックエンド間でポータブルではありません。</p>
</div>
<div class="admonition-oracle admonition">
<p class="admonition-title">Oracle</p>
<p>Oracle は <code class="docutils literal notranslate"><span class="pre">TextField</span></code> の照合順序 (collation) をサポートしていません。</p>
</div>
</dd></dl>

</section>
<section id="s-timefield">
<span id="timefield"></span><h3><code class="docutils literal notranslate"><span class="pre">TimeField</span></code><a class="headerlink" href="#timefield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.TimeField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">TimeField</span></span>(<em class="sig-param"><span class="n"><span class="pre">auto_now</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_now_add</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2517"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.TimeField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Python で <code class="docutils literal notranslate"><span class="pre">datetime.time</span></code> インスタンスによって表される時刻です。<a class="reference internal" href="#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a> と同じ自動入力されるオプションを受け入れます。</p>
<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.TimeInput" title="django.forms.TimeInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeInput</span></code></a> です。admin はいくつかの JavaScript ショートカットを追加します。</p>
</section>
<section id="s-urlfield">
<span id="urlfield"></span><h3><code class="docutils literal notranslate"><span class="pre">URLField</span></code><a class="headerlink" href="#urlfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.URLField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">URLField</span></span>(<em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2635"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.URLField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>URLの <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> で、 <a class="reference internal" href="../validators.html#django.core.validators.URLValidator" title="django.core.validators.URLValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">URLValidator</span></code></a> によってバリデーションされます。</p>
<p>このフィールドのデフォルトのフォームウィジェットは <a class="reference internal" href="../forms/widgets.html#django.forms.URLInput" title="django.forms.URLInput"><code class="xref py py-class docutils literal notranslate"><span class="pre">URLInput</span></code></a> です。</p>
<p>全ての <a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> サブクラスと同じく、<a class="reference internal" href="#django.db.models.URLField" title="django.db.models.URLField"><code class="xref py py-class docutils literal notranslate"><span class="pre">URLField</span></code></a> は省略可能な <a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> 引数を取ります。<a class="reference internal" href="#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_length</span></code></a> を指定しない場合、デフォルトの 200 が使われます。</p>
</section>
<section id="s-uuidfield">
<span id="uuidfield"></span><h3><code class="docutils literal notranslate"><span class="pre">UUIDField</span></code><a class="headerlink" href="#uuidfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.UUIDField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">UUIDField</span></span>(<em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L2724"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.UUIDField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>一意な識別子を格納するためのフィールドです。Python の <a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UUID</span></code></a> クラスを使用します。PostgreSQL と MariaDB 10.7+ で使用する場合、 <code class="docutils literal notranslate"><span class="pre">uuid</span></code> データ型で保存されます。</p>
<p>UUID は <a class="reference internal" href="#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><code class="xref py py-attr docutils literal notranslate"><span class="pre">primary_key</span></code></a> に代わる <a class="reference internal" href="#django.db.models.AutoField" title="django.db.models.AutoField"><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoField</span></code></a> への良い選択肢です。 データベースはあなたのための UUID を生成しないため、 <a class="reference internal" href="#django.db.models.Field.default" title="django.db.models.Field.default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default</span></code></a> を使うことが推奨されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyUUIDModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># other fields</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">UUID</span></code> のインスタンスではなく、呼び出し可能オブジェクト（カッコは書かない）を <code class="docutils literal notranslate"><span class="pre">default</span></code> に渡すことに注意してください。</p>
<div class="admonition-lookups-on-postgresql-and-mariadb-10-7 admonition">
<p class="admonition-title">PostgreSQL と MariaDB 10.7+ におけるルックアップ</p>
<p>PostgreSQL や MariaDB 10.7 以降では、ハイフンがない値に対して <a class="reference internal" href="querysets.html#std-fieldlookup-iexact"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">iexact</span></code></a>, <a class="reference internal" href="querysets.html#std-fieldlookup-contains"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">contains</span></code></a>, <a class="reference internal" href="querysets.html#std-fieldlookup-icontains"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">icontains</span></code></a>, <a class="reference internal" href="querysets.html#std-fieldlookup-startswith"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">startswith</span></code></a>, <a class="reference internal" href="querysets.html#std-fieldlookup-istartswith"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">istartswith</span></code></a>, <a class="reference internal" href="querysets.html#std-fieldlookup-endswith"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">endswith</span></code></a>, <a class="reference internal" href="querysets.html#std-fieldlookup-iendswith"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">iendswith</span></code></a> のルックアップを使用しても機能しません。これは、これらのデータベースがハイフン付きのuuidデータ型でそれらを格納するためです。</p>
</div>
</section>
</section>
<section id="s-module-django.db.models.fields.related">
<span id="s-relationship-fields"></span><span id="module-django.db.models.fields.related"></span><span id="relationship-fields"></span><h2>リレーションシップフィールド<a class="headerlink" href="#module-django.db.models.fields.related" title="Link to this heading">¶</a></h2>
<p>Djangoは、リレーションを表すフィールドのセットも定義しています。</p>
<section id="s-foreignkey">
<span id="s-ref-foreignkey"></span><span id="foreignkey"></span><span id="ref-foreignkey"></span><h3><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code><a class="headerlink" href="#foreignkey" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.ForeignKey">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ForeignKey</span></span>(<em class="sig-param"><span class="n"><span class="pre">to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_delete</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/related.py#L912"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.ForeignKey" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>多対一のリレーションシップです。モデルが関連するクラスと、<a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">on_delete</span></code></a> オプションの2つの位置引数が必要です。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Manufacturer</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
</pre></div>
</div>
<p>最初の位置引数には、具象モデルクラスまたはモデルクラスへの <a class="reference internal" href="#lazy-relationships"><span class="std std-ref">遅延参照</span></a> のいずれかを指定できます。モデルが自分自身とリレーションシップを持つ <a class="reference internal" href="#recursive-relationships"><span class="std std-ref">再帰的リレーションシップ</span></a> もサポートされています。</p>
<p>2番目の位置引数の詳細については、<a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ForeignKey.on_delete</span></code></a> を参照してください。</p>
<p>データベースインデックスは自動的に <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> に作成されます。これを無効にするには <a class="reference internal" href="#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_index</span></code></a> を <code class="docutils literal notranslate"><span class="pre">False</span></code> に設定してください。 結合ではなく一貫性を保つために外部キーを作成する場合や、部分カラムインデックスや複数カラムインデックスのような代替インデックスを作成する場合に、インデックスのオーバーヘッドを避けることができます。</p>
<section id="s-database-representation">
<span id="database-representation"></span><h4>データベース上の表現<a class="headerlink" href="#database-representation" title="Link to this heading">¶</a></h4>
<p>内部的に、Django はフィールド名に <code class="docutils literal notranslate"><span class="pre">&quot;_id&quot;</span></code> を追加してデータベースのカラム名を作成します。上記の例では、<code class="docutils literal notranslate"><span class="pre">Car</span></code> モデルのデータベーステーブルには <code class="docutils literal notranslate"><span class="pre">manufacturer_id</span></code> カラムが作成されます。この名前は <a class="reference internal" href="#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_column</span></code></a> を指定することで明示的に変更できますが、通常はデータベースのカラム名を直接操作する必要はありません（カスタムSQLを記述する場合を除く）。あなたのコードは常にモデルオブジェクトのフィールド名を操作します。</p>
</section>
<section id="s-arguments">
<span id="s-foreign-key-arguments"></span><span id="arguments"></span><span id="foreign-key-arguments"></span><h4>引数<a class="headerlink" href="#arguments" title="Link to this heading">¶</a></h4>
<p><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> はリレーションシップの動作の詳細を定義する他の引数を取ることができます。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.on_delete">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">on_delete</span></span><a class="headerlink" href="#django.db.models.ForeignKey.on_delete" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> で参照されているオブジェクトが削除されると、 Django は <a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">on_delete</span></code></a> 引数で指定された SQL 制約の動作をエミュレートします。例えば、Null 許容の <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> があり、参照オブジェクトが削除されたときに <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> を NULL にしたい場合、次のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
    <span class="n">User</span><span class="p">,</span>
    <span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">,</span>
    <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">on_delete</span></code> はデータベースにSQL制約を作成しません。データベースレベルのカスケードオプションのサポートは、 <a class="extlink-ticket reference external" href="https://code.djangoproject.com/ticket/21961">将来的に実装される可能性があります</a> 。</p>
</dd></dl>

<p><a class="reference internal" href="#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><code class="xref py py-attr docutils literal notranslate"><span class="pre">on_delete</span></code></a> に指定できる値は <a class="reference internal" href="../../topics/db/models.html#module-django.db.models" title="django.db.models"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.db.models</span></code></a> にあります：</p>
<ul>
<li><dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.CASCADE">
<span class="sig-name descname"><span class="pre">CASCADE</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L22"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.CASCADE" title="Link to this definition">¶</a></dt>
<dd><p>カスケード削除。Django は SQL の制約 ON DELETE CASCADE の動作をエミュレートし、 ForeignKey を含むオブジェクトも削除します。</p>
<p><a class="reference internal" href="instances.html#django.db.models.Model.delete" title="django.db.models.Model.delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.delete()</span></code></a> はリレーション先モデルでは呼び出されませんが、 <a class="reference internal" href="../signals.html#django.db.models.signals.pre_delete" title="django.db.models.signals.pre_delete"><code class="xref py py-data docutils literal notranslate"><span class="pre">pre_delete</span></code></a> と <a class="reference internal" href="../signals.html#django.db.models.signals.post_delete" title="django.db.models.signals.post_delete"><code class="xref py py-data docutils literal notranslate"><span class="pre">post_delete</span></code></a> シグナルは削除された全てのオブジェクトに対して送られます。</p>
</dd></dl>

</li>
<li><dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.PROTECT">
<span class="sig-name descname"><span class="pre">PROTECT</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L34"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.PROTECT" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">django.db.IntegrityError</span></code></a> のサブクラスである <a class="reference internal" href="../exceptions.html#django.db.models.ProtectedError" title="django.db.models.ProtectedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ProtectedError</span></code></a> を発生させて、参照オブジェクトの削除を防ぎます。</p>
</dd></dl>

</li>
<li><dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.RESTRICT">
<span class="sig-name descname"><span class="pre">RESTRICT</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L47"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.RESTRICT" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../exceptions.html#django.db.models.RestrictedError" title="django.db.models.RestrictedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RestrictedError</span></code></a> (<a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">django.db.IntegrityError</span></code></a> のサブクラス) を発生させて、参照オブジェクトの削除を防ぎます。 <a class="reference internal" href="#django.db.models.PROTECT" title="django.db.models.PROTECT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PROTECT</span></code></a> とは異なり、同じ操作で削除されるオブジェクトが <a class="reference internal" href="#django.db.models.CASCADE" title="django.db.models.CASCADE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CASCADE</span></code></a> リレーションシップで参照されている場合、参照オブジェクトの削除は許可されます。</p>
<p>以下のような一連のモデルを考えてみましょう:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Artist</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Album</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Artist</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Song</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Artist</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">album</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Album</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">RESTRICT</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Song</span></code> によって参照されている <code class="docutils literal notranslate"><span class="pre">Album</span></code> を削除することになるとしても、 <code class="docutils literal notranslate"><span class="pre">Artist</span></code> を削除することは可能です。なぜなら <code class="docutils literal notranslate"><span class="pre">Song</span></code> も、カスケードリレーションシップを通して <code class="docutils literal notranslate"><span class="pre">Artist</span></code> 自身を参照しているからです。例えば以下のようになります：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">artist_one</span> <span class="o">=</span> <span class="n">Artist</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;artist one&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artist_two</span> <span class="o">=</span> <span class="n">Artist</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;artist two&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">album_one</span> <span class="o">=</span> <span class="n">Album</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">artist</span><span class="o">=</span><span class="n">artist_one</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">album_two</span> <span class="o">=</span> <span class="n">Album</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">artist</span><span class="o">=</span><span class="n">artist_two</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">song_one</span> <span class="o">=</span> <span class="n">Song</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">artist</span><span class="o">=</span><span class="n">artist_one</span><span class="p">,</span> <span class="n">album</span><span class="o">=</span><span class="n">album_one</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">song_two</span> <span class="o">=</span> <span class="n">Song</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">artist</span><span class="o">=</span><span class="n">artist_one</span><span class="p">,</span> <span class="n">album</span><span class="o">=</span><span class="n">album_two</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">album_one</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="go"># Raises RestrictedError.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artist_two</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="go"># Raises RestrictedError.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">artist_one</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="go">(4, {&#39;Song&#39;: 2, &#39;Album&#39;: 1, &#39;Artist&#39;: 1})</span>
</pre></div>
</div>
</dd></dl>

</li>
<li><dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.SET_NULL">
<span class="sig-name descname"><span class="pre">SET_NULL</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L69"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.SET_NULL" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> に null をセットします。これは <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> が <code class="docutils literal notranslate"><span class="pre">True</span></code> の場合のみ可能です。</p>
</dd></dl>

</li>
<li><dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.SET_DEFAULT">
<span class="sig-name descname"><span class="pre">SET_DEFAULT</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L76"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.SET_DEFAULT" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> にデフォルト値を設定します。 <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> にデフォルト値が設定されている必要があります。</p>
</dd></dl>

</li>
<li><dl class="py function">
<dt class="sig sig-object py" id="django.db.models.SET">
<span class="sig-name descname"><span class="pre">SET</span></span>()<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L52"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.SET" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> に <a class="reference internal" href="#django.db.models.SET" title="django.db.models.SET"><code class="xref py py-func docutils literal notranslate"><span class="pre">SET()</span></code></a> に渡された値をセットします。呼び出し可能オブジェクトが渡された場合は、呼び出した結果をセットします。ほとんどの場合、 <code class="docutils literal notranslate"><span class="pre">models.py</span></code> のインポート時にクエリを実行しないようにするため、呼び出し可能オブジェクトを渡す必要があります：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_sentinel_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;deleted&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET</span><span class="p">(</span><span class="n">get_sentinel_user</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</li>
<li><dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.DO_NOTHING">
<span class="sig-name descname"><span class="pre">DO_NOTHING</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/deletion.py#L80"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.DO_NOTHING" title="Link to this definition">¶</a></dt>
<dd><p>何もしません。データベースのバックエンドが参照整合性を強制している場合、手動で SQL の <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">DELETE</span></code> 制約をデータベースフィールドに追加しない限り、 <a class="reference internal" href="../exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IntegrityError</span></code></a> が発生します。</p>
</dd></dl>

</li>
</ul>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.limit_choices_to">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">limit_choices_to</span></span><a class="headerlink" href="#django.db.models.ForeignKey.limit_choices_to" title="Link to this definition">¶</a></dt>
<dd><p>このフィールドが <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> や管理画面でレンダリングされる際に、このフィールドで選択可能な選択肢に制限を設定します（デフォルトでは、クエリセット内のすべてのオブジェクトが選択可能です）。辞書、<a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><code class="xref py py-class docutils literal notranslate"><span class="pre">Q</span></code></a> オブジェクト、または辞書や <a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><code class="xref py py-class docutils literal notranslate"><span class="pre">Q</span></code></a> オブジェクトを返す呼び出し可能オブジェクトのいずれかを使用できます。</p>
<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">staff_member</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
    <span class="n">User</span><span class="p">,</span>
    <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="n">limit_choices_to</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;is_staff&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>上記を指定すると、 <code class="docutils literal notranslate"><span class="pre">ModelForm</span></code> の対応するフィールドに、 <code class="docutils literal notranslate"><span class="pre">is_staff=True</span></code> を持つ <code class="docutils literal notranslate"><span class="pre">Users</span></code> のみがリストされます。これは Django の管理画面で役に立つかもしれません。</p>
<p>呼び出し可能なオブジェクトは、例えば、Python の <code class="docutils literal notranslate"><span class="pre">datetime</span></code> モジュールと組み合わせて使用することで、日付の範囲で選択を制限するのに役立ちます。例えば下記のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">limit_pub_date_choices</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pub_date__lte&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()}</span>


<span class="n">limit_choices_to</span> <span class="o">=</span> <span class="n">limit_pub_date_choices</span>
</pre></div>
</div>
<p>もし <code class="docutils literal notranslate"><span class="pre">limit_choices_to</span></code> が <a class="reference internal" href="querysets.html#django.db.models.Q" title="django.db.models.Q"><code class="xref py py-class docutils literal notranslate"><span class="pre">Q</span> <span class="pre">オブジェクト</span></code></a> を返す場合、これは <a class="reference internal" href="../../topics/db/queries.html#complex-lookups-with-q"><span class="std std-ref">複雑なクエリ</span></a> に便利です。これが管理画面で利用可能な選択肢に効果を及ぼすのは、そのフィールドがモデルの <code class="docutils literal notranslate"><span class="pre">ModelAdmin</span></code> の <a class="reference internal" href="../contrib/admin/index.html#django.contrib.admin.ModelAdmin.raw_id_fields" title="django.contrib.admin.ModelAdmin.raw_id_fields"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_id_fields</span></code></a> にリストされていない場合だけです。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">limit_choices_to</span></code> に呼び出し可能オブジェクトが指定されている場合、新しいフォームがインスタンス化されるたびに呼び出されます。また、管理コマンドや admin によってモデルが検証されるときにも呼び出されます。admin は様々なエッジケースでフォームの入力を検証するためにクエリセットを複数回構築するので、呼び出し可能オブジェクトが複数回呼び出される可能性があります。</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.related_name">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">related_name</span></span><a class="headerlink" href="#django.db.models.ForeignKey.related_name" title="Link to this definition">¶</a></dt>
<dd><p>リレーション先オブジェクトからこのオブジェクトへのリレーションに使用する名前です。これは <a class="reference internal" href="#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_query_name</span></code></a> (ターゲットモデルからの逆フィルタに使用する名前) のデフォルト値でもあります。詳しい説明と例については <a class="reference internal" href="../../topics/db/queries.html#backwards-related-objects"><span class="std std-ref">リレーション先オブジェクトのドキュメント</span></a> を参照してください。 <a class="reference internal" href="../../topics/db/models.html#abstract-base-classes"><span class="std std-ref">抽象モデル</span></a> のリレーションを定義する際には、この値を設定する必要があることに注意してください。それにより、 <a class="reference internal" href="../../topics/db/models.html#abstract-related-name"><span class="std std-ref">いくつかの特別な構文</span></a> が使えるようになります。</p>
<p>Django が逆方向のリレーションを作らないようにしたい場合は、 <code class="docutils literal notranslate"><span class="pre">related_name</span></code> を <code class="docutils literal notranslate"><span class="pre">'+'</span></code> に設定するか、 <code class="docutils literal notranslate"><span class="pre">'+'</span></code> で終わらせてください。例えば、 <code class="docutils literal notranslate"><span class="pre">User</span></code> モデルがこのモデルと逆方向のリレーションを持たないようにするには下記のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
    <span class="n">User</span><span class="p">,</span>
    <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.related_query_name">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">related_query_name</span></span><a class="headerlink" href="#django.db.models.ForeignKey.related_query_name" title="Link to this definition">¶</a></dt>
<dd><p>ターゲットモデルからの逆フィルタに使用する名前です。デフォルトは <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a> か、 <a class="reference internal" href="options.html#django.db.models.Options.default_related_name" title="django.db.models.Options.default_related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default_related_name</span></code></a> が設定されていればその値、そうでなければモデルの名前になります：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Declare the ForeignKey with related_query_name</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">article</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Article</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span>
        <span class="n">related_query_name</span><span class="o">=</span><span class="s2">&quot;tag&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>


<span class="c1"># That&#39;s now the name of the reverse filter</span>
<span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">tag__name</span><span class="o">=</span><span class="s2">&quot;important&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a> と同様に、<code class="docutils literal notranslate"><span class="pre">related_query_name</span></code> は <a class="reference internal" href="../../topics/db/models.html#abstract-related-name"><span class="std std-ref">いくつかの特別な構文</span></a> によるアプリのラベルとクラスの補間をサポートします。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.to_field">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">to_field</span></span><a class="headerlink" href="#django.db.models.ForeignKey.to_field" title="Link to this definition">¶</a></dt>
<dd><p>リレーション先オブジェクト上の、リレーション対象となるフィールドです。デフォルトでは、Djangoはリレーション先オブジェクトのプライマリキーを使用します。別のフィールドを参照する場合、そのフィールドには <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> が設定されている必要があります。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.db_constraint">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">db_constraint</span></span><a class="headerlink" href="#django.db.models.ForeignKey.db_constraint" title="Link to this definition">¶</a></dt>
<dd><p>この外部キーに対してデータベースに制約を作成するかどうかを制御します。デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> で、ほとんどの場合それが望ましい設定です。これを <code class="docutils literal notranslate"><span class="pre">False</span></code> に設定すると、データの整合性に大きな悪影響を及ぼす可能性があります。それでも、以下のようなシナリオではこの設定を行いたくなるかもしれません：</p>
<ul class="simple">
<li><p>無効なレガシーデータを持っている場合。</p></li>
<li><p>データベースをシャーディング（分割）している場合。</p></li>
</ul>
<p>これが <code class="docutils literal notranslate"><span class="pre">False</span></code> にセットされている場合、存在しないリレーション先オブジェクトにアクセスすると <code class="docutils literal notranslate"><span class="pre">DoesNotExist</span></code> 例外が発生します。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ForeignKey.swappable">
<span class="sig-prename descclassname"><span class="pre">ForeignKey.</span></span><span class="sig-name descname"><span class="pre">swappable</span></span><a class="headerlink" href="#django.db.models.ForeignKey.swappable" title="Link to this definition">¶</a></dt>
<dd><p>この <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> がスワップ可能なモデルを指している場合のマイグレーションフレームワークの対応を制御します。デフォルトの <code class="docutils literal notranslate"><span class="pre">True</span></code> の場合、<a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> が <code class="docutils literal notranslate"><span class="pre">settings.AUTH_USER_MODEL</span></code> (または他のスワップ可能なモデルの設定) の現在の値と一致するモデルを指している場合、リレーションシップはモデルに直接ではなく、設定への参照を使用してマイグレーションに保存されます。</p>
<p>この設定を <code class="docutils literal notranslate"><span class="pre">False</span></code> に上書きしてよいのは、モデルが常にスワップされたモデルを指すべきであると確信している場合のみです。例えば、カスタムユーザーモデル用に特別に設計されたプロフィールモデルの場合などが該当します。</p>
<p><code class="docutils literal notranslate"><span class="pre">False</span></code> を設定しても、スワップ可能モデルがスワップアウトされた方のモデルを参照できるわけではありません。具体的には、この設定を <code class="docutils literal notranslate"><span class="pre">False</span></code> にすると、この外部キーを使用して作成されるマイグレーションは、指定されたモデルを常に直接参照します（そのため、例えば、対応していないユーザーモデルを使用してマイグレーションを実行しようとした場合、明確なエラーが発生します）。</p>
<p>迷ったときは、デフォルトの <code class="docutils literal notranslate"><span class="pre">True</span></code> のままにしてください。</p>
</dd></dl>

</section>
</section>
<section id="s-manytomanyfield">
<span id="manytomanyfield"></span><h3><code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code><a class="headerlink" href="#manytomanyfield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ManyToManyField</span></span>(<em class="sig-param"><span class="n"><span class="pre">to</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/related.py#L1317"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.ManyToManyField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>多対多のリレーションシップ。位置引数が必要で、モデルがリレーションを持つクラスを指定します。これは <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> での使用と全く同じ方法で機能し、<a class="reference internal" href="#recursive-relationships"><span class="std std-ref">再帰的なリレーションシップ</span></a> や <a class="reference internal" href="#lazy-relationships"><span class="std std-ref">遅延リレーションシップ</span></a> を含みます。</p>
<p>リレーション先オブジェクトはフィールドの <a class="reference internal" href="relations.html#django.db.models.fields.related.RelatedManager" title="django.db.models.fields.related.RelatedManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">RelatedManager</span></code></a> で追加、削除、作成ができます。</p>
<section id="s-id1">
<span id="id1"></span><h4>データベース上の表現<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<p>裏では、Django は多対多のリレーションシップを表現するために、中間的な join テーブルを作成します。デフォルトでは、このテーブル名は多対多のフィールド名と、それを含むモデルのテーブル名を使って生成されます。データベースによっては一定以上の長さのテーブル名をサポートしていないため、これらのテーブル名は自動的に切り捨てられ、一意性のハッシュが使用されます (例:  <code class="docutils literal notranslate"><span class="pre">author_books_9cdf</span></code>)。 <a class="reference internal" href="#django.db.models.ManyToManyField.db_table" title="django.db.models.ManyToManyField.db_table"><code class="xref py py-attr docutils literal notranslate"><span class="pre">db_table</span></code></a> オプションを使用すれば、手動でjoinテーブルの名前を指定できます。</p>
</section>
<section id="s-manytomany-arguments">
<span id="s-id2"></span><span id="manytomany-arguments"></span><span id="id2"></span><h4>引数<a class="headerlink" href="#manytomany-arguments" title="Link to this heading">¶</a></h4>
<p><a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> はリレーションシップがどう機能するかをコントロールする複数のオプション引数を受け付けます。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.related_name">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">related_name</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.related_name" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ForeignKey.related_name</span></code></a> と同様です。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.related_query_name">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">related_query_name</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.related_query_name" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ForeignKey.related_query_name</span></code></a> と同様です。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.limit_choices_to">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">limit_choices_to</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.limit_choices_to" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.ForeignKey.limit_choices_to" title="django.db.models.ForeignKey.limit_choices_to"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ForeignKey.limit_choices_to</span></code></a>  と同様です。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.symmetrical">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">symmetrical</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.symmetrical" title="Link to this definition">¶</a></dt>
<dd><p>self の ManyToManyFields の定義でのみ使用されます。次のモデルを考えてみましょう：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">friends</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;self&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Django はこのモデルを処理するとき、 <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> を持つことを識別し、その結果 <code class="docutils literal notranslate"><span class="pre">Person</span></code> クラスに <code class="docutils literal notranslate"><span class="pre">person_set</span></code> 属性を追加しません。その代わりに、 <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> は対称であると仮定されます。つまり、もし私があなたの友達なら、あなたは私の友達です。</p>
<p>もし <code class="docutils literal notranslate"><span class="pre">self</span></code> との多対多のリレーションシップに対称性を持たせたくない場合は、 <a class="reference internal" href="#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><code class="xref py py-attr docutils literal notranslate"><span class="pre">symmetrical</span></code></a> を <code class="docutils literal notranslate"><span class="pre">False</span></code> に設定してください。これにより Django は逆リレーションシップの記述子を追加し、 <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> リレーションシップが非対称になるようにします。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.through">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">through</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.through" title="Link to this definition">¶</a></dt>
<dd><p>Django は多対多のリレーションシップを管理するテーブルを自動生成します。しかし、中間テーブルを手動で指定したい場合は、 <a class="reference internal" href="#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><code class="xref py py-attr docutils literal notranslate"><span class="pre">through</span></code></a> オプションを使って、使いたい中間テーブルを表す Django モデルを指定できます。</p>
<p>このオプションの最も一般的な利用法は、 <a class="reference internal" href="../../topics/db/models.html#intermediary-manytomany"><span class="std std-ref">多対多のリレーションシップに追加のデータを関連付けたい</span></a> 場合です。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>同じインスタンス間で複数の関連付けをしたくない場合は、 <a class="reference internal" href="constraints.html#django.db.models.UniqueConstraint" title="django.db.models.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> を、from フィールドと to フィールドを含めて追加してください。Django が自動生成する多対多のテーブルには、このような制約が含まれています。</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>中間モデルを使用した再帰的リレーションシップでは、逆アクセサ名 (reverse accessor name) を決定することはできません。同じ名前になってしまうからです。少なくともどちらかに <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a> を設定する必要があります。もし Django が逆リレーションを作成しないことを望むなら、 <code class="docutils literal notranslate"><span class="pre">related_name</span></code> を <code class="docutils literal notranslate"><span class="pre">'+'</span></code> に設定してください。</p>
</div>
<p>明示的な <code class="docutils literal notranslate"><span class="pre">through</span></code> モデルを指定しない場合でも、暗黙的な <code class="docutils literal notranslate"><span class="pre">through</span></code> モデルクラスが用意されており、関連付けを保持するために作成されたテーブルに直接アクセスできます。このクラスにはモデルをリンクするための3つのフィールドがあります。</p>
<p>ソース・モデルとターゲット・モデルが異なる場合、以下のフィールドが生成されます：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: リレーションのプライマリキー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;containing_model&gt;_id</span></code>: <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> を宣言したモデルの <code class="docutils literal notranslate"><span class="pre">id</span></code> 。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;other_model&gt;_id</span></code>: <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> が指すモデルの <code class="docutils literal notranslate"><span class="pre">id</span></code> 。</p></li>
</ul>
<p>もし <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> が同じモデルを指している場合、以下のフィールドが生成されます：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: リレーションのプライマリキー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from_&lt;model&gt;_id</span></code>: モデルを指すインスタンス (つまりソースインスタンス) の <code class="docutils literal notranslate"><span class="pre">id</span></code> です。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_&lt;model&gt;_id</span></code>: リレーションシップの対象となるインスタンス (つまり、ターゲットモデル・インスタンス) の <code class="docutils literal notranslate"><span class="pre">id</span></code> 。</p></li>
</ul>
<p>このクラスは、通常のモデルのように、指定されたモデルのインスタンスに関連するレコードをクエリするために使用できます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Model</span><span class="o">.</span><span class="n">m2mfield</span><span class="o">.</span><span class="n">through</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.through_fields">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">through_fields</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.through_fields" title="Link to this definition">¶</a></dt>
<dd><p>カスタムの中間モデルが指定されている場合にだけ使われます。Django は通常、多対多のリレーションシップを確立するために、仲介モデルのどのフィールドを使うかを自動的に決定します。しかし、以下のモデルを考えてみてください：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span>
        <span class="n">Person</span><span class="p">,</span>
        <span class="n">through</span><span class="o">=</span><span class="s2">&quot;Membership&quot;</span><span class="p">,</span>
        <span class="n">through_fields</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;group&quot;</span><span class="p">,</span> <span class="s2">&quot;person&quot;</span><span class="p">),</span>
    <span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Membership</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">inviter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Person</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;membership_invites&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">invite_reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Membership</span></code> は <code class="docutils literal notranslate"><span class="pre">Person</span></code> に対する外部キーを <em>2つ</em> 持っています (<code class="docutils literal notranslate"><span class="pre">person</span></code> と <code class="docutils literal notranslate"><span class="pre">inviter</span></code>) ので、リレーションシップが曖昧になり、Django はどちらを使うべきか分からなくなります。この場合、上の例のように <code class="docutils literal notranslate"><span class="pre">through_fields</span></code> を使って、 Django がどの外部キーを使うかを明示的に指定する必要があります。</p>
<p><code class="docutils literal notranslate"><span class="pre">through_fields</span></code> は2値タプル <code class="docutils literal notranslate"><span class="pre">('field1',</span> <span class="pre">'field2')</span></code> を受け付けます。ここで <code class="docutils literal notranslate"><span class="pre">field1</span></code> は <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> が定義されているモデルの外部キーの名前 (この場合は <code class="docutils literal notranslate"><span class="pre">group</span></code>) で、 <code class="docutils literal notranslate"><span class="pre">field2</span></code> は対象のモデルの外部キーの名前 (この場合は <code class="docutils literal notranslate"><span class="pre">person</span></code>) です。</p>
<p>多対多のリレーションシップに参加するモデルのいずれか(あるいは両方)に対して、仲介モデルに複数の外部キーがある場合、 <code class="docutils literal notranslate"><span class="pre">through_fields</span></code> を指定する必要があります。これは <a class="reference internal" href="#recursive-relationships"><span class="std std-ref">再帰的なリレーションシップ</span></a> にも当てはまり、中間モデルが使われ、そのモデルへの外部キーが2つ以上ある場合、あるいは Django がどの2つを使うかを明示的に指定したい場合に適用されます。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.db_table">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">db_table</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.db_table" title="Link to this definition">¶</a></dt>
<dd><p>多対多のデータを格納するために作成するテーブルの名前です。これが指定されない場合、 Django はリレーションシップを定義するモデルのテーブル名と、 フィールド名に基づいてデフォルトの名前を決めます。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.db_constraint">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">db_constraint</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.db_constraint" title="Link to this definition">¶</a></dt>
<dd><p>中間テーブルの外部キーに対して制約を作成するかどうかを制御します。デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> で、ほとんどの場合それが望ましい設定です。これを <code class="docutils literal notranslate"><span class="pre">False</span></code> に設定すると、データの整合性に大きな悪影響を及ぼす可能性があります。それでも、以下のようなシナリオでこの設定を行いたくなるかもしれません：</p>
<ul class="simple">
<li><p>無効なレガシーデータを持っている場合。</p></li>
<li><p>データベースをシャーディング（分割）している場合。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">db_constraint</span></code> と <code class="docutils literal notranslate"><span class="pre">through</span></code> の両方を渡すとエラーになります。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.ManyToManyField.swappable">
<span class="sig-prename descclassname"><span class="pre">ManyToManyField.</span></span><span class="sig-name descname"><span class="pre">swappable</span></span><a class="headerlink" href="#django.db.models.ManyToManyField.swappable" title="Link to this definition">¶</a></dt>
<dd><p>この <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> がスワップ可能なモデルを指している場合のマイグレーションフレームワークの対応を制御します。もし <code class="docutils literal notranslate"><span class="pre">True</span></code> (デフォルト) であれば、 <a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> が <code class="docutils literal notranslate"><span class="pre">settings.AUTH_USER_MODEL</span></code> (または他のスワップ可能なモデルの設定) の現在の値と一致するモデルを指している場合、リレーションシップはモデルに直接ではなく、設定への参照を使用してマイグレーションに保存されます。</p>
<p>この設定を <code class="docutils literal notranslate"><span class="pre">False</span></code> に上書きしてよいのは、モデルが常にスワップされたモデルを指すべきであると確信している場合のみです。例えば、カスタムユーザーモデル用に特別に設計されたプロフィールモデルの場合などが該当します。</p>
<p>迷ったときは、デフォルトの <code class="docutils literal notranslate"><span class="pre">True</span></code> のままにしてください。</p>
</dd></dl>

<p><a class="reference internal" href="#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> は <a class="reference internal" href="#django.db.models.Field.validators" title="django.db.models.Field.validators"><code class="xref py py-attr docutils literal notranslate"><span class="pre">validators</span></code></a> をサポートしていません。</p>
<p><a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> は、データベースレベルでリレーションシップを要求する方法がないので、何の効果もありません。</p>
</section>
</section>
<section id="s-onetoonefield">
<span id="onetoonefield"></span><h3><code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code><a class="headerlink" href="#onetoonefield" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.OneToOneField">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">OneToOneField</span></span>(<em class="sig-param"><span class="n"><span class="pre">to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on_delete</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_link</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/related.py#L1210"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.OneToOneField" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>一対一のリレーションシップです。概念的には <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> に <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique=True</span></code></a> を指定したものと似ていますが、リレーションの &quot;反対側&quot; が直接1つのオブジェクトを返します。</p>
<p>これは、何らかの方法で別のモデルを「拡張」するモデルのプライマリキーとして最も有用です。例えば、<a class="reference internal" href="../../topics/db/models.html#multi-table-inheritance"><span class="std std-ref">マルチテーブル継承</span></a> は、子モデルから親モデルへの暗黙の一対一リレーションシップを追加することによって実装されます。</p>
<p>位置引数が1つ必要で、モデルが関連付けられるクラスを指定します。これは <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> と全く同じ方法で機能し、<a class="reference internal" href="#recursive-relationships"><span class="std std-ref">再帰的なリレーションシップ</span></a> や <a class="reference internal" href="#lazy-relationships"><span class="std std-ref">遅延リレーションシップ</span></a> に関するすべてのオプションが含まれます。</p>
<p>もし <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> に <a class="reference internal" href="#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_name</span></code></a> 引数を指定しなければ、 Django は現在のモデルの小文字の名前をデフォルト値として使用します。</p>
<p>次の例では、</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MySpecialUser</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">supervisor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;supervisor_of&quot;</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>出来上がった <code class="docutils literal notranslate"><span class="pre">User</span></code> モデルは以下の属性を持つことになります：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s2">&quot;myspecialuser&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s2">&quot;supervisor_of&quot;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>リレーション先テーブルにエントリが存在しない場合、逆リレーションシップにアクセスすると <code class="docutils literal notranslate"><span class="pre">RelatedObjectDoesNotExist</span></code> 例外が発生します。これは対象モデルの <a class="reference internal" href="class.html#django.db.models.Model.DoesNotExist" title="django.db.models.Model.DoesNotExist"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Model.DoesNotExist</span></code></a> 例外のサブクラスであり、逆アクセサ (reverse accessor) の属性としてアクセスできます。たとえば、ユーザーに <code class="docutils literal notranslate"><span class="pre">MySpecialUser</span></code> によって指定されたスーパーバイザーがいない場合：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="n">user</span><span class="o">.</span><span class="n">supervisor_of</span>
<span class="k">except</span> <span class="n">User</span><span class="o">.</span><span class="n">supervisor_of</span><span class="o">.</span><span class="n">RelatedObjectDoesNotExist</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p id="onetoone-arguments">さらに、<code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> は <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> が受け付ける全ての引数に加え、1つの追加引数を受け付けます：</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.OneToOneField.parent_link">
<span class="sig-prename descclassname"><span class="pre">OneToOneField.</span></span><span class="sig-name descname"><span class="pre">parent_link</span></span><a class="headerlink" href="#django.db.models.OneToOneField.parent_link" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> に設定され、他の <a class="reference internal" href="../../glossary.html#term-concrete-model"><span class="xref std std-term">concrete model</span></a> から継承されたモデルで使用された場合、サブクラス化によって通常は暗黙的に作成される追加の <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> の代わりに、このフィールドが親クラスへのリンクとして使用されるべきことを示します。</p>
</dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> の使用例については <a class="reference internal" href="../../topics/db/examples/one_to_one.html"><span class="doc">一対一のリレーションシップ</span></a> を参照してください。</p>
</section>
<section id="s-lazy-relationships">
<span id="s-id3"></span><span id="lazy-relationships"></span><span id="id3"></span><h3>遅延リレーションシップ<a class="headerlink" href="#lazy-relationships" title="Link to this heading">¶</a></h3>
<p>遅延リレーションシップを使用すると、モデルを名前（文字列）で参照したり、再帰的リレーションシップを作成したりできます。文字列は、任意のリレーションシップフィールドの最初の引数として使用でき、モデルを遅延参照します。遅延参照には、<a class="reference internal" href="#recursive-relationships"><span class="std std-ref">再帰的</span></a>、<a class="reference internal" href="#relative-relationships"><span class="std std-ref">相対的</span></a>、または <a class="reference internal" href="#absolute-relationships"><span class="std std-ref">絶対的</span></a> 参照が含まれます。</p>
<section id="s-recursive">
<span id="s-recursive-relationships"></span><span id="recursive"></span><span id="recursive-relationships"></span><h4>再帰的参照<a class="headerlink" href="#recursive" title="Link to this heading">¶</a></h4>
<p>モデルが自分自身を参照するリレーションシップを定義するには、リレーションシップフィールドの最初の引数に <code class="docutils literal notranslate"><span class="pre">&quot;self&quot;</span></code> を次のように使用します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">suppliers</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;self&quot;</span><span class="p">,</span> <span class="n">symmetrical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="../../topics/db/models.html#abstract-base-classes"><span class="std std-ref">抽象モデル</span></a> で使用される場合、再帰的リレーションシップは、各具象サブクラスが自分自身を参照するように解決されます。</p>
</section>
<section id="s-relative">
<span id="s-relative-relationships"></span><span id="relative"></span><span id="relative-relationships"></span><h4>相対参照<a class="headerlink" href="#relative" title="Link to this heading">¶</a></h4>
<p>まだ定義されていないモデルとのリレーションシップを作成する必要がある場合、そのモデルオブジェクト自体ではなく、モデル名の文字列で参照できます。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;Manufacturer&quot;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="n">suppliers</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;self&quot;</span><span class="p">,</span> <span class="n">symmetrical</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>以下のような方法で <a class="reference internal" href="../../topics/db/models.html#abstract-base-classes"><span class="std std-ref">抽象モデル</span></a> で定義されたリレーションシップは、モデルが具象モデルとしてサブクラス化されたときに解決され、抽象モデルの <code class="docutils literal notranslate"><span class="pre">app_label</span></code> とリレーションシップがあるわけではありません：</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">products/models.py</span></code></span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">AbstractCar</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;Manufacturer&quot;</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">production/models.py</span></code></span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">products.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">AbstractCar</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Car</span><span class="p">(</span><span class="n">AbstractCar</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<p>この例では、<code class="docutils literal notranslate"><span class="pre">Car.manufacturer</span></code> リレーションシップは <code class="docutils literal notranslate"><span class="pre">production.Manufacturer</span></code> に解決されます。なぜなら、<code class="docutils literal notranslate"><span class="pre">production/models.py</span></code> ファイル内で定義された具象モデルを指しているからです。</p>
<div class="admonition-reusable-models-with-relative-references admonition">
<p class="admonition-title">相対参照を使った再利用可能なモデル</p>
<p>相対参照を使うことで、再利用可能な抽象モデルを作成できます。相手のモデルが異なるアプリケーション内にあり、さまざまなサブクラスにおいて違う実装を持っていたとしも、そのモデルへの参照を解決できるようなリレーションシップを持つことができます。</p>
</div>
</section>
<section id="s-absolute">
<span id="s-absolute-relationships"></span><span id="absolute"></span><span id="absolute-relationships"></span><h4>絶対参照<a class="headerlink" href="#absolute" title="Link to this heading">¶</a></h4>
<p>絶対参照は、<code class="docutils literal notranslate"><span class="pre">app_label</span></code> とクラス名を使ってモデルを指定し、異なるアプリケーション間でモデルを参照できるようにします。このタイプの遅延リレーションシップは、循環インポートの解決にも役立ちます。</p>
<p>例えば、<code class="docutils literal notranslate"><span class="pre">Manufacturer</span></code> モデルが別のアプリケーション <code class="docutils literal notranslate"><span class="pre">thirdpartyapp</span></code> に定義されている場合、次のように参照できます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;thirdpartyapp.Manufacturer&quot;</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>絶対参照は、<a class="reference internal" href="../../topics/db/models.html#abstract-base-classes"><span class="std std-ref">抽象モデル</span></a> で使用される場合でも、常に同じモデルを指し示します。</p>
</section>
</section>
</section>
<section id="s-field-api-reference">
<span id="field-api-reference"></span><h2>フィールド API リファレンス<a class="headerlink" href="#field-api-reference" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="django.db.models.Field">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Field</span></span><a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L119"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field" title="Link to this definition">¶</a></dt>
<dd><p>フィールドはデータベーステーブルのカラムを表す抽象クラスです。Django はフィールドを使ってデータベーステーブルを作成したり (<a class="reference internal" href="#django.db.models.Field.db_type" title="django.db.models.Field.db_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">db_type()</span></code></a>)、 Python の型をデータベースにマッピングしたり (<a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prep_value()</span></code></a>)、逆にしたり (<a class="reference internal" href="#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_db_value()</span></code></a>) します。</p>
<p>したがって、フィールドは、特に <a class="reference internal" href="instances.html#django.db.models.Model" title="django.db.models.Model"><code class="xref py py-class docutils literal notranslate"><span class="pre">モデル</span></code></a> や <a class="reference internal" href="querysets.html#django.db.models.query.QuerySet" title="django.db.models.query.QuerySet"><code class="xref py py-class docutils literal notranslate"><span class="pre">クエリセット</span></code></a> など、他のDjango APIにおける基本的な要素です。</p>
<p>モデルでは、フィールドはクラス属性としてインスタンス化され、特定のテーブルのカラムを表します (<a class="reference internal" href="../../topics/db/models.html"><span class="doc">モデル</span></a> 参照)。フィールドには <a class="reference internal" href="#django.db.models.Field.null" title="django.db.models.Field.null"><code class="xref py py-attr docutils literal notranslate"><span class="pre">null</span></code></a> や <a class="reference internal" href="#django.db.models.Field.unique" title="django.db.models.Field.unique"><code class="xref py py-attr docutils literal notranslate"><span class="pre">unique</span></code></a> といった属性と、 Django がフィールドの値をデータベース固有の値にマッピングするためのメソッドがあります。</p>
<p>フィールド <code class="docutils literal notranslate"><span class="pre">Field</span></code> は <a class="reference internal" href="lookups.html#django.db.models.lookups.RegisterLookupMixin" title="django.db.models.lookups.RegisterLookupMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">RegisterLookupMixin</span></code></a> のサブクラスなので、 <a class="reference internal" href="lookups.html#django.db.models.Transform" title="django.db.models.Transform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Transform</span></code></a> と <a class="reference internal" href="lookups.html#django.db.models.Lookup" title="django.db.models.Lookup"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lookup</span></code></a> の両方を登録して <code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> で使用できます (例: <code class="docutils literal notranslate"><span class="pre">field_name__exact=&quot;foo&quot;</span></code>) 。デフォルトでは全ての <a class="reference internal" href="querysets.html#field-lookups"><span class="std std-ref">組み込みのルックアップ</span></a> が登録されています。</p>
<p><a class="reference internal" href="#django.db.models.CharField" title="django.db.models.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> のような Django 組み込みのフィールドは全て <code class="docutils literal notranslate"><span class="pre">Field</span></code> の具体的な実装です。独自のフィールドが必要な場合は、組み込みフィールドをサブクラス化するか、一から <code class="docutils literal notranslate"><span class="pre">Field</span></code> を書いてください。どちらの場合でも <a class="reference internal" href="../../howto/custom-model-fields.html"><span class="doc">カスタムのモデルフィールドを作成する</span></a> を参照してください。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.description">
<span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#django.db.models.Field.description" title="Link to this definition">¶</a></dt>
<dd><p>フィールドの詳細な説明。例えば <a class="reference internal" href="../contrib/admin/admindocs.html#module-django.contrib.admindocs" title="django.contrib.admindocs: Django's admin documentation generator."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admindocs</span></code></a> アプリケーションなどのためのものです。</p>
<p>説明文は以下のような形式です：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;String (up to </span><span class="si">%(max_length)s</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>引数はフィールドの <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> から補間されます。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.descriptor_class">
<span class="sig-name descname"><span class="pre">descriptor_class</span></span><a class="headerlink" href="#django.db.models.Field.descriptor_class" title="Link to this definition">¶</a></dt>
<dd><p>インスタンス化され、モデルのインスタンス属性に割り当てられる <a class="reference external" href="https://docs.python.org/3/reference/datamodel.html#descriptors" title="(in Python v3.13)"><span class="xref std std-ref">デスクリプタ・プロトコル</span></a> を実装したクラスです。コンストラクタは単一の引数 <code class="docutils literal notranslate"><span class="pre">Field</span></code> インスタンスを受け取る必要があります。このクラス属性をオーバーライドすることで、get と set の動作をカスタマイズできます。</p>
</dd></dl>

<p>フィールド <code class="docutils literal notranslate"><span class="pre">Field</span></code> をデータベース固有の型にマッピングするために、 Django はいくつかのメソッドを公開しています：</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.get_internal_type">
<span class="sig-name descname"><span class="pre">get_internal_type</span></span>()<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L981"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.get_internal_type" title="Link to this definition">¶</a></dt>
<dd><p>バックエンド固有の目的のために、このフィールドの名前を文字列で返します。デフォルトでは、クラス名を返します。</p>
<p>カスタムフィールドでの使用法については <a class="reference internal" href="../../howto/custom-model-fields.html#emulating-built-in-field-types"><span class="std std-ref">組み込みフィールド・タイプのエミュレート</span></a> を参照してください。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.db_type">
<span class="sig-name descname"><span class="pre">db_type</span></span>(<em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L852"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.db_type" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> のデータベースカラムのデータ型を、<code class="docutils literal notranslate"><span class="pre">connection</span></code> を考慮して返します。</p>
<p>カスタムフィールドでの使用法については <a class="reference internal" href="../../howto/custom-model-fields.html#custom-database-types"><span class="std std-ref">カスタムデータベースタイプ</span></a> を参照してください。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.rel_db_type">
<span class="sig-name descname"><span class="pre">rel_db_type</span></span>(<em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L883"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.rel_db_type" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> を指す <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> や <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> などのフィールドのデータベースカラムのデータ型を、<code class="docutils literal notranslate"><span class="pre">connection</span></code> を考慮して返します。</p>
<p>カスタムフィールドでの使用法については <a class="reference internal" href="../../howto/custom-model-fields.html#custom-database-types"><span class="std std-ref">カスタムデータベースタイプ</span></a> を参照してください。</p>
</dd></dl>

<p>Django がデータベースのバックエンドやフィールドとやり取りする必要がある場面は、 主に3つあります：</p>
<ul class="simple">
<li><p>データベースへのクエリ時 (Python の値 -&gt; データベースのバックエンドの値)</p></li>
<li><p>データベースからデータを読み込むとき (データベースのバックエンドの値 -&gt; Python の値)</p></li>
<li><p>データベースへの保存時 (Python の値 -&gt; データベースのバックエンドの値)</p></li>
</ul>
<p>クエリでは <a class="reference internal" href="#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_db_prep_value()</span></code></a> と <a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prep_value()</span></code></a> が使用されます：</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.get_prep_value">
<span class="sig-name descname"><span class="pre">get_prep_value</span></span>(<em class="sig-param"><span class="n"><span class="pre">value</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L988"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.get_prep_value" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">value</span></code> はモデルの属性の現在の値で、メソッドはクエリのパラメータとして使用できるように書かれた形式のデータを返す必要があります。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#converting-python-objects-to-query-values"><span class="std std-ref">Python オブジェクトをクエリ変数に変換する</span></a> を参照してください。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.get_db_prep_value">
<span class="sig-name descname"><span class="pre">get_db_prep_value</span></span>(<em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepared</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L994"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.get_db_prep_value" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">value</span></code> をバックエンド固有の値に変換します。デフォルトでは、 <code class="docutils literal notranslate"><span class="pre">prepared=True</span></code> の場合は <code class="docutils literal notranslate"><span class="pre">value</span></code> を返し、 <code class="docutils literal notranslate"><span class="pre">False</span></code> の場合は <a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prep_value()</span></code></a> を返します。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#converting-query-values-to-database-values"><span class="std std-ref">クエリの変数をデータベースの変数に変換する</span></a> を参照してください。</p>
</dd></dl>

<p>データを読み込む際には <a class="reference internal" href="#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_db_value()</span></code></a> が使用されます：</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.from_db_value">
<span class="sig-name descname"><span class="pre">from_db_value</span></span>(<em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>)<a class="headerlink" href="#django.db.models.Field.from_db_value" title="Link to this definition">¶</a></dt>
<dd><p>データベースが返す値を Python オブジェクトに変換します。これは <a class="reference internal" href="#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_prep_value()</span></code></a> の逆です。</p>
<p>データベースのバックエンドはすでに正しい Python 型を返すか、バックエンド自身が変換を行うので、このメソッドはほとんどの組み込みフィールドには使われません。</p>
<p><code class="docutils literal notranslate"><span class="pre">expression</span></code> は <code class="docutils literal notranslate"><span class="pre">self</span></code> と同様です。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#converting-values-to-python-objects"><span class="std std-ref">変数を Python オブジェクトに変換する</span></a> を参照してください。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>パフォーマンス上の理由から、 <code class="docutils literal notranslate"><span class="pre">from_db_value</span></code> は、それを必要としないフィールド (Django の全てのフィールド) では何もしない関数としては実装されていません。そのため、定義内で <code class="docutils literal notranslate"><span class="pre">super</span></code> を呼び出してはいけません。</p>
</div>
</dd></dl>

<p>保存時には <a class="reference internal" href="#django.db.models.Field.pre_save" title="django.db.models.Field.pre_save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pre_save()</span></code></a> と <a class="reference internal" href="#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_db_prep_save()</span></code></a> が使用されます：</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.get_db_prep_save">
<span class="sig-name descname"><span class="pre">get_db_prep_save</span></span>(<em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1004"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.get_db_prep_save" title="Link to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_db_prep_value()</span></code></a> と同じですが、フィールドの値をデータベースに <em>保存</em> しなければならない場合に呼び出されます。デフォルトでは <a class="reference internal" href="#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_db_prep_value()</span></code></a> を返します。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.pre_save">
<span class="sig-name descname"><span class="pre">pre_save</span></span>(<em class="sig-param"><span class="n"><span class="pre">model_instance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L984"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.pre_save" title="Link to this definition">¶</a></dt>
<dd><p>保存する前に値を整えるために <a class="reference internal" href="#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_db_prep_save()</span></code></a> の前に呼び出されるメソッドです (例えば <a class="reference internal" href="#django.db.models.DateField.auto_now" title="django.db.models.DateField.auto_now"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DateField.auto_now</span></code></a> の場合など)。</p>
<p><code class="docutils literal notranslate"><span class="pre">model_instance</span></code> はこのフィールドが属するインスタンスで、<code class="docutils literal notranslate"><span class="pre">add</span></code> はインスタンスが初めてデータベースに保存されるかどうかです。</p>
<p>このフィールドの <code class="docutils literal notranslate"><span class="pre">model_instance</span></code> からは適切な属性の値を返す必要があります。属性名は <code class="docutils literal notranslate"><span class="pre">self.attname</span></code> にあります (これは <a class="reference internal" href="#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> で設定します)。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#preprocessing-values-before-saving"><span class="std std-ref">保存する前に値を前処理する場合</span></a> を参照してください。</p>
</dd></dl>

<p>フィールドは多くの場合、シリアライズやフォームから別の型として値を受け取ります。</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.to_python">
<span class="sig-name descname"><span class="pre">to_python</span></span>(<em class="sig-param"><span class="n"><span class="pre">value</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L753"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.to_python" title="Link to this definition">¶</a></dt>
<dd><p>値を正しい Python オブジェクトに変換します。これは <a class="reference internal" href="#django.db.models.Field.value_to_string" title="django.db.models.Field.value_to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">value_to_string()</span></code></a> の逆として動作し、 <a class="reference internal" href="instances.html#django.db.models.Model.clean" title="django.db.models.Model.clean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clean()</span></code></a> でも呼び出されます。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#converting-values-to-python-objects"><span class="std std-ref">変数を Python オブジェクトに変換する</span></a> を参照してください。</p>
</dd></dl>

<p>データベースに保存する方法だけでなく、フィールドはその値をシリアライズする方法も知っておく必要があります：</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.value_from_object">
<span class="sig-name descname"><span class="pre">value_from_object</span></span>(<em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1144"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.value_from_object" title="Link to this definition">¶</a></dt>
<dd><p>指定されたモデルのインスタンスのフィールドの値を返します。</p>
<p>このメソッドは <a class="reference internal" href="#django.db.models.Field.value_to_string" title="django.db.models.Field.value_to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">value_to_string()</span></code></a> でよく使われます。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.value_to_string">
<span class="sig-name descname"><span class="pre">value_to_string</span></span>(<em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1080"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.value_to_string" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">obj</span></code> を文字列に変換します。フィールドの値をシリアライズするために使用します。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#converting-model-field-to-serialization"><span class="std std-ref">シリアライズするためにフィールドデータを変換する場合</span></a> を参照してください。</p>
</dd></dl>

<p><a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">モデルフォーム</span></code></a> を使用する場合、 <code class="docutils literal notranslate"><span class="pre">Field</span></code> はどのフォームフィールドで表現されるべきかを知る必要があります：</p>
<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.formfield">
<span class="sig-name descname"><span class="pre">formfield</span></span>(<em class="sig-param"><span class="n"><span class="pre">form_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">choices_form_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em>)<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L1095"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.formfield" title="Link to this definition">¶</a></dt>
<dd><p>このフィールドの <a class="reference internal" href="../../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> に対するデフォルトの <a class="reference internal" href="../forms/fields.html#django.forms.Field" title="django.forms.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.forms.Field</span></code></a> を返します。</p>
<p>デフォルトでは、 <code class="docutils literal notranslate"><span class="pre">form_class</span></code> と <code class="docutils literal notranslate"><span class="pre">choices_form_class</span></code> の両方が <code class="docutils literal notranslate"><span class="pre">None</span></code> の場合、 <a class="reference internal" href="../forms/fields.html#django.forms.CharField" title="django.forms.CharField"><code class="xref py py-class docutils literal notranslate"><span class="pre">CharField</span></code></a> を使用します。フィールドに <a class="reference internal" href="#django.db.models.Field.choices" title="django.db.models.Field.choices"><code class="xref py py-attr docutils literal notranslate"><span class="pre">choices</span></code></a> が指定されていて、 <code class="docutils literal notranslate"><span class="pre">choices_form_class</span></code> が指定されていない場合、 <a class="reference internal" href="../forms/fields.html#django.forms.TypedChoiceField" title="django.forms.TypedChoiceField"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypedChoiceField</span></code></a> を使用します。</p>
<p>使い方は <a class="reference internal" href="../../howto/custom-model-fields.html#specifying-form-field-for-model-field"><span class="std std-ref">モデルフィールドのフォームフィールドの指定</span></a> を参照してください。</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="django.db.models.Field.deconstruct">
<span class="sig-name descname"><span class="pre">deconstruct</span></span>()<a class="reference external" href="https://github.com/django/django/blob/stable/5.1.x/django/db/models/fields/__init__.py#L567"><span class="viewcode-link"><span class="pre">[ソース]</span></span></a><a class="headerlink" href="#django.db.models.Field.deconstruct" title="Link to this definition">¶</a></dt>
<dd><p>フィールドを再作成するのに十分な情報を持つ4値タプルを返します：</p>
<ol class="arabic simple">
<li><p>モデルのフィールド名。</p></li>
<li><p>フィールドのインポートパス (例 <code class="docutils literal notranslate"><span class="pre">&quot;django.db.models.IntegerField&quot;</span></code>)。移植性は高く保つべきなので、あまり特定しすぎない方が良いかもしれません。</p></li>
<li><p>位置引数のリスト。</p></li>
<li><p>キーワード引数の辞書。</p></li>
</ol>
<p>1.7 より前のバージョンでは、 <a class="reference internal" href="../../topics/migrations.html"><span class="doc">マイグレーション</span></a> を使用してデータをマイグレーションするために、このメソッドをフィールドに追加する必要がありました。</p>
</dd></dl>

</dd></dl>

</section>
<section id="s-registering-and-fetching-lookups">
<span id="registering-and-fetching-lookups"></span><h2>ルックアップの登録と取得<a class="headerlink" href="#registering-and-fetching-lookups" title="Link to this heading">¶</a></h2>
<p>フィールド <code class="docutils literal notranslate"><span class="pre">Field</span></code> は <a class="reference internal" href="lookups.html#lookup-registration-api"><span class="std std-ref">ルックアップ レジストレーション API</span></a> を実装しています。このAPIを使用して、フィールドクラスとそのインスタンスでどのルックアップを利用できるか、またフィールドからどのようにルックアップを取得するかをカスタマイズできます。</p>
</section>
</section>
<section id="s-field-attribute-reference">
<span id="s-model-field-attributes"></span><span id="field-attribute-reference"></span><span id="model-field-attributes"></span><h1>フィールド属性 リファレンス<a class="headerlink" href="#field-attribute-reference" title="Link to this heading">¶</a></h1>
<p>すべての <code class="docutils literal notranslate"><span class="pre">Field</span></code> インスタンスには、その動作を詳しく調べるための属性がいくつか含まれています。フィールドの機能に依存するコードを書く必要がある場合には、 <code class="docutils literal notranslate"><span class="pre">isinstance</span></code> チェックの代わりにこれらの属性を使用してください。これらの属性は <a class="reference internal" href="meta.html#model-meta-field-api"><span class="std std-ref">Model._meta API</span></a> と一緒に使うことで、特定のフィールドタイプを絞り込むことができます。カスタムモデルフィールドはこれらのフラグを実装する必要があります。</p>
<section id="s-attributes-for-fields">
<span id="attributes-for-fields"></span><h2>フィールドの属性<a class="headerlink" href="#attributes-for-fields" title="Link to this heading">¶</a></h2>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.auto_created">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">auto_created</span></span><a class="headerlink" href="#django.db.models.Field.auto_created" title="Link to this definition">¶</a></dt>
<dd><p>モデル継承で使用される <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> のように、フィールドが自動的に作成されたかどうかを示す真偽値フラグ。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.concrete">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">concrete</span></span><a class="headerlink" href="#django.db.models.Field.concrete" title="Link to this definition">¶</a></dt>
<dd><p>フィールドにデータベース・カラムが関連付けられているかどうかを示す真偽値。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.hidden">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">hidden</span></span><a class="headerlink" href="#django.db.models.Field.hidden" title="Link to this definition">¶</a></dt>
<dd><p>デフォルトでは <a class="reference internal" href="meta.html#django.db.models.options.Options.get_fields" title="django.db.models.options.Options.get_fields"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Options.get_fields()</span></code></a> によって返されない隠しフィールドがあるかどうかを示す真偽値のフラグです。例えば、 <a class="reference internal" href="#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForeignKey</span></code></a> の逆フィールドで、 <code class="docutils literal notranslate"><span class="pre">related_name</span></code> が <code class="docutils literal notranslate"><span class="pre">'+'</span></code> で始まる場合です。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.is_relation">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">is_relation</span></span><a class="headerlink" href="#django.db.models.Field.is_relation" title="Link to this definition">¶</a></dt>
<dd><p>真偽値フラグで、フィールドが機能のために一つまたは複数の他のモデルへの参照を含んでいるかどうかを示します（例: <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code>, <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code>, <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> など）。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.model">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#django.db.models.Field.model" title="Link to this definition">¶</a></dt>
<dd><p>フィールドが定義されているモデルを返します。フィールドがモデルの基底クラスに定義されている場合、<code class="docutils literal notranslate"><span class="pre">model</span></code> はインスタンスのクラスではなく基底クラスを参照します。</p>
</dd></dl>

</section>
<section id="s-attributes-for-fields-with-relations">
<span id="attributes-for-fields-with-relations"></span><h2>リレーションを持つフィールドの属性<a class="headerlink" href="#attributes-for-fields-with-relations" title="Link to this heading">¶</a></h2>
<p>これらの属性はリレーションのカーディナリティやその他の詳細をクエリするために使用されます。これらの属性は全てのフィールドに存在しますが、フィールドがリレーションタイプである場合のみ (<code class="docutils literal notranslate"><span class="pre">None</span></code> ではなく) 真偽値を持ちます (<a class="reference internal" href="#django.db.models.Field.is_relation" title="django.db.models.Field.is_relation"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.is_relation=True</span></code></a>)。</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.many_to_many">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">many_to_many</span></span><a class="headerlink" href="#django.db.models.Field.many_to_many" title="Link to this definition">¶</a></dt>
<dd><p>真偽値フラグで、フィールドが多対多のリレーションを持つ場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> となり、そうでない場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> となります。Django で <code class="docutils literal notranslate"><span class="pre">True</span></code> となるフィールドは <code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code> だけです。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.many_to_one">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">many_to_one</span></span><a class="headerlink" href="#django.db.models.Field.many_to_one" title="Link to this definition">¶</a></dt>
<dd><p>真偽値フラグで、フィールドが <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> のような多対一のリレーションを持っている場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> となり、そうでない場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> となります。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.one_to_many">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">one_to_many</span></span><a class="headerlink" href="#django.db.models.Field.one_to_many" title="Link to this definition">¶</a></dt>
<dd><p>真偽値フラグで、フィールドが <code class="docutils literal notranslate"><span class="pre">GenericRelation</span></code> や <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> のような一対多のリレーションを持っている場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> となり、そうでない場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> となります。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.one_to_one">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">one_to_one</span></span><a class="headerlink" href="#django.db.models.Field.one_to_one" title="Link to this definition">¶</a></dt>
<dd><p>真偽値フラグで、フィールドが <code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code> のような一対一のリレーションを持っている場合は <code class="docutils literal notranslate"><span class="pre">True</span></code> となり、そうでない場合は <code class="docutils literal notranslate"><span class="pre">False</span></code> となります。</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Field.related_model">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">related_model</span></span><a class="headerlink" href="#django.db.models.Field.related_model" title="Link to this definition">¶</a></dt>
<dd><p>フィールドのリレーション先となるモデルを指定します。例えば、 <code class="docutils literal notranslate"><span class="pre">ForeignKey(Author,</span> <span class="pre">on_delete=models.CASCADE)</span></code> の <code class="docutils literal notranslate"><span class="pre">Author</span></code> です。 <code class="docutils literal notranslate"><span class="pre">GenericForeignKey</span></code> の <code class="docutils literal notranslate"><span class="pre">related_model</span></code> は常に <code class="docutils literal notranslate"><span class="pre">None</span></code> です。</p>
</dd></dl>

</section>
</section>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">モデルフィールドリファレンス</a><ul>
<li><a class="reference internal" href="#field-options">フィールドオプション</a><ul>
<li><a class="reference internal" href="#null"><code class="docutils literal notranslate"><span class="pre">null</span></code></a></li>
<li><a class="reference internal" href="#blank"><code class="docutils literal notranslate"><span class="pre">blank</span></code></a></li>
<li><a class="reference internal" href="#choices"><code class="docutils literal notranslate"><span class="pre">choices</span></code></a><ul>
<li><a class="reference internal" href="#enumeration-types">列挙型</a></li>
</ul>
</li>
<li><a class="reference internal" href="#db-column"><code class="docutils literal notranslate"><span class="pre">db_column</span></code></a></li>
<li><a class="reference internal" href="#db-comment"><code class="docutils literal notranslate"><span class="pre">db_comment</span></code></a></li>
<li><a class="reference internal" href="#db-default"><code class="docutils literal notranslate"><span class="pre">db_default</span></code></a></li>
<li><a class="reference internal" href="#db-index"><code class="docutils literal notranslate"><span class="pre">db_index</span></code></a></li>
<li><a class="reference internal" href="#db-tablespace"><code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code></a></li>
<li><a class="reference internal" href="#default"><code class="docutils literal notranslate"><span class="pre">default</span></code></a></li>
<li><a class="reference internal" href="#editable"><code class="docutils literal notranslate"><span class="pre">editable</span></code></a></li>
<li><a class="reference internal" href="#error-messages"><code class="docutils literal notranslate"><span class="pre">error_messages</span></code></a></li>
<li><a class="reference internal" href="#help-text"><code class="docutils literal notranslate"><span class="pre">help_text</span></code></a></li>
<li><a class="reference internal" href="#primary-key"><code class="docutils literal notranslate"><span class="pre">primary_key</span></code></a></li>
<li><a class="reference internal" href="#unique"><code class="docutils literal notranslate"><span class="pre">unique</span></code></a></li>
<li><a class="reference internal" href="#unique-for-date"><code class="docutils literal notranslate"><span class="pre">unique_for_date</span></code></a></li>
<li><a class="reference internal" href="#unique-for-month"><code class="docutils literal notranslate"><span class="pre">unique_for_month</span></code></a></li>
<li><a class="reference internal" href="#unique-for-year"><code class="docutils literal notranslate"><span class="pre">unique_for_year</span></code></a></li>
<li><a class="reference internal" href="#verbose-name"><code class="docutils literal notranslate"><span class="pre">verbose_name</span></code></a></li>
<li><a class="reference internal" href="#validators"><code class="docutils literal notranslate"><span class="pre">validators</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#field-types">フィールドの型</a><ul>
<li><a class="reference internal" href="#autofield"><code class="docutils literal notranslate"><span class="pre">AutoField</span></code></a></li>
<li><a class="reference internal" href="#bigautofield"><code class="docutils literal notranslate"><span class="pre">BigAutoField</span></code></a></li>
<li><a class="reference internal" href="#bigintegerfield"><code class="docutils literal notranslate"><span class="pre">BigIntegerField</span></code></a></li>
<li><a class="reference internal" href="#binaryfield"><code class="docutils literal notranslate"><span class="pre">BinaryField</span></code></a></li>
<li><a class="reference internal" href="#booleanfield"><code class="docutils literal notranslate"><span class="pre">BooleanField</span></code></a></li>
<li><a class="reference internal" href="#charfield"><code class="docutils literal notranslate"><span class="pre">CharField</span></code></a></li>
<li><a class="reference internal" href="#datefield"><code class="docutils literal notranslate"><span class="pre">DateField</span></code></a></li>
<li><a class="reference internal" href="#datetimefield"><code class="docutils literal notranslate"><span class="pre">DateTimeField</span></code></a></li>
<li><a class="reference internal" href="#decimalfield"><code class="docutils literal notranslate"><span class="pre">DecimalField</span></code></a></li>
<li><a class="reference internal" href="#durationfield"><code class="docutils literal notranslate"><span class="pre">DurationField</span></code></a></li>
<li><a class="reference internal" href="#emailfield"><code class="docutils literal notranslate"><span class="pre">EmailField</span></code></a></li>
<li><a class="reference internal" href="#filefield"><code class="docutils literal notranslate"><span class="pre">FileField</span></code></a><ul>
<li><a class="reference internal" href="#filefield-and-fieldfile"><code class="docutils literal notranslate"><span class="pre">FileField</span></code> と <code class="docutils literal notranslate"><span class="pre">FieldFile</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#filepathfield"><code class="docutils literal notranslate"><span class="pre">FilePathField</span></code></a></li>
<li><a class="reference internal" href="#floatfield"><code class="docutils literal notranslate"><span class="pre">FloatField</span></code></a></li>
<li><a class="reference internal" href="#generatedfield"><code class="docutils literal notranslate"><span class="pre">GeneratedField</span></code></a></li>
<li><a class="reference internal" href="#genericipaddressfield"><code class="docutils literal notranslate"><span class="pre">GenericIPAddressField</span></code></a></li>
<li><a class="reference internal" href="#imagefield"><code class="docutils literal notranslate"><span class="pre">ImageField</span></code></a></li>
<li><a class="reference internal" href="#integerfield"><code class="docutils literal notranslate"><span class="pre">IntegerField</span></code></a></li>
<li><a class="reference internal" href="#jsonfield"><code class="docutils literal notranslate"><span class="pre">JSONField</span></code></a></li>
<li><a class="reference internal" href="#positivebigintegerfield"><code class="docutils literal notranslate"><span class="pre">PositiveBigIntegerField</span></code></a></li>
<li><a class="reference internal" href="#positiveintegerfield"><code class="docutils literal notranslate"><span class="pre">PositiveIntegerField</span></code></a></li>
<li><a class="reference internal" href="#positivesmallintegerfield"><code class="docutils literal notranslate"><span class="pre">PositiveSmallIntegerField</span></code></a></li>
<li><a class="reference internal" href="#slugfield"><code class="docutils literal notranslate"><span class="pre">SlugField</span></code></a></li>
<li><a class="reference internal" href="#smallautofield"><code class="docutils literal notranslate"><span class="pre">SmallAutoField</span></code></a></li>
<li><a class="reference internal" href="#smallintegerfield"><code class="docutils literal notranslate"><span class="pre">SmallIntegerField</span></code></a></li>
<li><a class="reference internal" href="#textfield"><code class="docutils literal notranslate"><span class="pre">TextField</span></code></a></li>
<li><a class="reference internal" href="#timefield"><code class="docutils literal notranslate"><span class="pre">TimeField</span></code></a></li>
<li><a class="reference internal" href="#urlfield"><code class="docutils literal notranslate"><span class="pre">URLField</span></code></a></li>
<li><a class="reference internal" href="#uuidfield"><code class="docutils literal notranslate"><span class="pre">UUIDField</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-django.db.models.fields.related">リレーションシップフィールド</a><ul>
<li><a class="reference internal" href="#foreignkey"><code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code></a><ul>
<li><a class="reference internal" href="#database-representation">データベース上の表現</a></li>
<li><a class="reference internal" href="#arguments">引数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#manytomanyfield"><code class="docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a><ul>
<li><a class="reference internal" href="#id1">データベース上の表現</a></li>
<li><a class="reference internal" href="#manytomany-arguments">引数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#onetoonefield"><code class="docutils literal notranslate"><span class="pre">OneToOneField</span></code></a></li>
<li><a class="reference internal" href="#lazy-relationships">遅延リレーションシップ</a><ul>
<li><a class="reference internal" href="#recursive">再帰的参照</a></li>
<li><a class="reference internal" href="#relative">相対参照</a></li>
<li><a class="reference internal" href="#absolute">絶対参照</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#field-api-reference">フィールド API リファレンス</a></li>
<li><a class="reference internal" href="#registering-and-fetching-lookups">ルックアップの登録と取得</a></li>
</ul>
</li>
<li><a class="reference internal" href="#field-attribute-reference">フィールド属性 リファレンス</a><ul>
<li><a class="reference internal" href="#attributes-for-fields">フィールドの属性</a></li>
<li><a class="reference internal" href="#attributes-for-fields-with-relations">リレーションを持つフィールドの属性</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="index.html"
                          title="前の章へ">モデル</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="indexes.html"
                          title="次の章へ">モデル index リファレンス</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ref/models/fields.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">1月 22, 2025</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="index.html" title="モデル">previous</a>
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="indexes.html" title="モデル index リファレンス">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>