<!DOCTYPE html>

<html lang="ja" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>モデルの Meta オプション &#8212; Django 5.1.6.dev20250122212402 ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=34bb78ad" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css?v=bf4d74af" />
    <script src="../../_static/documentation_options.js?v=d2885b0a"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=4755f45a"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="モデルインスタンスリファレンス" href="instances.html" />
    <link rel="prev" title="Model クラスのリファレンス" href="class.html" />



 
<script src="../../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../../index.html">Django 5.1.6.dev20250122212402 ドキュメント</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../../index.html">Home</a>  |
        <a title="Table of contents" href="../../contents.html">Table of contents</a>  |
        <a title="Global index" href="../../genindex.html">Index</a>  |
        <a title="Module index" href="../../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="class.html" title="Model クラスのリファレンス">previous</a>
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="instances.html" title="モデルインスタンスリファレンス">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="ref-models-options">
            
  <section id="s-model-meta-options">
<span id="model-meta-options"></span><h1>モデルの <code class="docutils literal notranslate"><span class="pre">Meta</span></code> オプション<a class="headerlink" href="#model-meta-options" title="Link to this heading">¶</a></h1>
<p>このドキュメントでは、モデル内部の <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Meta</span></code> 内でモデルに与えられる、すべての可能な <a class="reference internal" href="../../topics/db/models.html#meta-options"><span class="std std-ref">メタデータオプション</span></a> を説明します。</p>
<section id="s-available-meta-options">
<span id="available-meta-options"></span><h2>利用可能な <code class="docutils literal notranslate"><span class="pre">Meta</span></code> オプション<a class="headerlink" href="#available-meta-options" title="Link to this heading">¶</a></h2>
<section id="s-abstract">
<span id="abstract"></span><h3><code class="docutils literal notranslate"><span class="pre">abstract</span></code><a class="headerlink" href="#abstract" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.abstract">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">abstract</span></span><a class="headerlink" href="#django.db.models.Options.abstract" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">abstract</span> <span class="pre">=</span> <span class="pre">True</span></code> の場合、このモデルは <a class="reference internal" href="../../topics/db/models.html#abstract-base-classes"><span class="std std-ref">抽象基底クラス</span></a> になります。</p>
</dd></dl>

</section>
<section id="s-app-label">
<span id="app-label"></span><h3><code class="docutils literal notranslate"><span class="pre">app_label</span></code><a class="headerlink" href="#app-label" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.app_label">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">app_label</span></span><a class="headerlink" href="#django.db.models.Options.app_label" title="Link to this definition">¶</a></dt>
<dd><p>モデルが <a class="reference internal" href="../settings.html#std-setting-INSTALLED_APPS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code></a> でアプリケーションの外部で定義されている場合、どのアプリケーションに属するかを宣言する必要があります：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app_label</span> <span class="o">=</span> <span class="s2">&quot;myapp&quot;</span>
</pre></div>
</div>
<p>モデルを <code class="docutils literal notranslate"><span class="pre">app_label.object_name</span></code> または <code class="docutils literal notranslate"><span class="pre">app_label.model_name</span></code> という形式で表現したい場合は、それぞれ <code class="docutils literal notranslate"><span class="pre">model._meta.label</span></code> または <code class="docutils literal notranslate"><span class="pre">model._meta.label_lower</span></code> を使用します。</p>
</dd></dl>

</section>
<section id="s-base-manager-name">
<span id="base-manager-name"></span><h3><code class="docutils literal notranslate"><span class="pre">base_manager_name</span></code><a class="headerlink" href="#base-manager-name" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.base_manager_name">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">base_manager_name</span></span><a class="headerlink" href="#django.db.models.Options.base_manager_name" title="Link to this definition">¶</a></dt>
<dd><p>モデルの <a class="reference internal" href="../../topics/db/managers.html#django.db.models.Model._base_manager" title="django.db.models.Model._base_manager"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_base_manager</span></code></a> に使用するマネージャの属性名、例えば <code class="docutils literal notranslate"><span class="pre">'objects'</span></code> です。</p>
</dd></dl>

</section>
<section id="s-db-table">
<span id="db-table"></span><h3><code class="docutils literal notranslate"><span class="pre">db_table</span></code><a class="headerlink" href="#db-table" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.db_table">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">db_table</span></span><a class="headerlink" href="#django.db.models.Options.db_table" title="Link to this definition">¶</a></dt>
<dd><p>モデルに使用するデータベーステーブルの名前：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db_table</span> <span class="o">=</span> <span class="s2">&quot;music_album&quot;</span>
</pre></div>
</div>
</dd></dl>

<section id="s-table-names">
<span id="s-id1"></span><span id="table-names"></span><span id="id1"></span><h4>テーブル名<a class="headerlink" href="#table-names" title="Link to this heading">¶</a></h4>
<p>手間を省くために、Django はモデルクラスとそれを含むアプリの名前から、データベーステーブルの名前を自動的に生成します。モデルのデータベーステーブル名は、モデルの &quot;app label&quot; (<a class="reference internal" href="../django-admin.html#django-admin-startapp"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">startapp</span></code></a> で使った名前) とモデルのクラス名をアンダースコアでつないで作ります。</p>
<p>例えば、アプリ <code class="docutils literal notranslate"><span class="pre">bookstore</span></code> (<code class="docutils literal notranslate"><span class="pre">manage.py</span> <span class="pre">startapp</span> <span class="pre">bookstore</span></code> で作成) がある場合、<code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Book</span></code> として定義されたモデルは <code class="docutils literal notranslate"><span class="pre">bookstore_book</span></code> という名前のデータベーステーブルを持ちます。</p>
<p>データベーステーブル名を上書きするには、 <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Meta</span></code> の <code class="docutils literal notranslate"><span class="pre">db_table</span></code> パラメータを使用します。</p>
<p>データベースのテーブル名が SQL の予約語だったり、 Python の変数名では許されない文字（特にハイフン）を含んでいたりしても大丈夫です。Django は裏でカラム名とテーブル名をクォート処理します。</p>
<div class="admonition-use-lowercase-table-names-for-mariadb-and-mysql admonition">
<p class="admonition-title">MariaDB と MySQL では小文字のテーブル名を使いましょう</p>
<p>特に MySQL バックエンドを使用している場合は、<code class="docutils literal notranslate"><span class="pre">db_table</span></code> でテーブル名をオーバーライドする際に小文字のテーブル名を使うことを強くお勧めします。詳細は <a class="reference internal" href="../databases.html#mysql-notes"><span class="std std-ref">MySQLのノート</span></a> を参照してください。</p>
</div>
<div class="admonition-table-name-quoting-for-oracle admonition">
<p class="admonition-title">オラクルのテーブル名のクォート処理</p>
<p>Oracle のテーブル名の上限である 30 文字の制限を満たし、Oracle データベースの一般的な慣例に合わせるため、 Django はテーブル名を短くしたり、すべて大文字にしたりすることがあります。このような変換を防ぐには、 <code class="docutils literal notranslate"><span class="pre">db_table</span></code> の値として引用符で囲まれた名前を使います：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db_table</span> <span class="o">=</span> <span class="s1">&#39;&quot;name_left_in_lowercase&quot;&#39;</span>
</pre></div>
</div>
<p>このような引用符で囲まれた名前は、Django がサポートしている他のデータベースバックエンドでも使用できます。詳しくは <a class="reference internal" href="../databases.html#oracle-notes"><span class="std std-ref">Oracleのノート</span></a> を参照してください。</p>
</div>
</section>
</section>
<section id="s-db-table-comment">
<span id="db-table-comment"></span><h3><code class="docutils literal notranslate"><span class="pre">db_table_comment</span></code><a class="headerlink" href="#db-table-comment" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.db_table_comment">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">db_table_comment</span></span><a class="headerlink" href="#django.db.models.Options.db_table_comment" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>このモデルに使うデータベーステーブルのコメントです。あなたの Django コードを見ていない、直接データベースにアクセスできる人のために、 データベーステーブルをドキュメント化するのに便利です。たとえば以下のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Answer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Question</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table_comment</span> <span class="o">=</span> <span class="s2">&quot;Question answers&quot;</span>
</pre></div>
</div>
</section>
<section id="s-db-tablespace">
<span id="db-tablespace"></span><h3><code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code><a class="headerlink" href="#db-tablespace" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.db_tablespace">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">db_tablespace</span></span><a class="headerlink" href="#django.db.models.Options.db_tablespace" title="Link to this definition">¶</a></dt>
<dd><p>このモデルに使用する <a class="reference internal" href="../../topics/db/tablespaces.html"><span class="doc">データベーステーブル空間</span></a> の名前です。デフォルトはプロジェクトの <a class="reference internal" href="../settings.html#std-setting-DEFAULT_TABLESPACE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEFAULT_TABLESPACE</span></code></a> 設定です。バックエンドがテーブル空間をサポートしていない場合、このオプションは無視されます。</p>
</dd></dl>

</section>
<section id="s-default-manager-name">
<span id="default-manager-name"></span><h3><code class="docutils literal notranslate"><span class="pre">default_manager_name</span></code><a class="headerlink" href="#default-manager-name" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.default_manager_name">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">default_manager_name</span></span><a class="headerlink" href="#django.db.models.Options.default_manager_name" title="Link to this definition">¶</a></dt>
<dd><p>モデルの <a class="reference internal" href="../../topics/db/managers.html#django.db.models.Model._default_manager" title="django.db.models.Model._default_manager"><code class="xref py py-attr docutils literal notranslate"><span class="pre">_default_manager</span></code></a> に使用するマネージャの名前。</p>
</dd></dl>

</section>
<section id="s-default-related-name">
<span id="default-related-name"></span><h3><code class="docutils literal notranslate"><span class="pre">default_related_name</span></code><a class="headerlink" href="#default-related-name" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.default_related_name">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">default_related_name</span></span><a class="headerlink" href="#django.db.models.Options.default_related_name" title="Link to this definition">¶</a></dt>
<dd><p>リレーション先オブジェクトからこのオブジェクトへのリレーションにデフォルトで使用される名前です。デフォルトは <code class="docutils literal notranslate"><span class="pre">&lt;model_name&gt;_set</span></code> です。</p>
<p>このオプションは <a class="reference internal" href="fields.html#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">related_query_name</span></code></a> も設定します。</p>
<p>フィールドの逆引き名は一意でなければならないので、モデルをサブクラス化する場合は注意してください。名前の衝突を回避するため、名前の一部に <code class="docutils literal notranslate"><span class="pre">'%(app_label)s'</span></code> と <code class="docutils literal notranslate"><span class="pre">'%(model_name)s'</span></code> を含めるべきです。これらはそれぞれ、モデルが存在するアプリケーションの名前とモデルの名前に置き換えられます。<a class="reference internal" href="../../topics/db/models.html#abstract-related-name"><span class="std std-ref">抽象モデルの related name</span></a> の段落を参照してください。</p>
</dd></dl>

</section>
<section id="s-get-latest-by">
<span id="get-latest-by"></span><h3><code class="docutils literal notranslate"><span class="pre">get_latest_by</span></code><a class="headerlink" href="#get-latest-by" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.get_latest_by">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">get_latest_by</span></span><a class="headerlink" href="#django.db.models.Options.get_latest_by" title="Link to this definition">¶</a></dt>
<dd><p>モデル内のフィールド名またはフィールド名のリスト。通常は <a class="reference internal" href="fields.html#django.db.models.DateField" title="django.db.models.DateField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateField</span></code></a>,  <a class="reference internal" href="fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeField</span></code></a>, <a class="reference internal" href="fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerField</span></code></a> です。これはモデル <a class="reference internal" href="../../topics/db/managers.html#django.db.models.Manager" title="django.db.models.Manager"><code class="xref py py-class docutils literal notranslate"><span class="pre">Manager</span></code></a> の <a class="reference internal" href="querysets.html#django.db.models.query.QuerySet.latest" title="django.db.models.query.QuerySet.latest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">latest()</span></code></a> と <a class="reference internal" href="querysets.html#django.db.models.query.QuerySet.earliest" title="django.db.models.query.QuerySet.earliest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">earliest()</span></code></a> メソッドで使用するデフォルトのフィールドを指定します。</p>
<p>実装例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Latest by ascending order_date.</span>
<span class="n">get_latest_by</span> <span class="o">=</span> <span class="s2">&quot;order_date&quot;</span>

<span class="c1"># Latest by priority descending, order_date ascending.</span>
<span class="n">get_latest_by</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-priority&quot;</span><span class="p">,</span> <span class="s2">&quot;order_date&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>詳しくは <a class="reference internal" href="querysets.html#django.db.models.query.QuerySet.latest" title="django.db.models.query.QuerySet.latest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">latest()</span></code></a> のドキュメントを参照してください。</p>
</dd></dl>

</section>
<section id="s-managed">
<span id="managed"></span><h3><code class="docutils literal notranslate"><span class="pre">managed</span></code><a class="headerlink" href="#managed" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.managed">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">managed</span></span><a class="headerlink" href="#django.db.models.Options.managed" title="Link to this definition">¶</a></dt>
<dd><p>デフォルトは <code class="docutils literal notranslate"><span class="pre">True</span></code> です。つまり、 Django は <a class="reference internal" href="../django-admin.html#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a> やマイグレーションの一部として適切なデータベーステーブルを作成し、 <a class="reference internal" href="../django-admin.html#django-admin-flush"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">flush</span></code></a> 管理コマンドの一部として削除します。つまり、 Django はデータベーステーブルのライフサイクルを <em>管理</em> します。</p>
<p><code class="docutils literal notranslate"><span class="pre">False</span></code> の場合、このモデルに対してデータベーステーブルの作成、変更、削除の操作を行いません。これは、モデルが既存のテーブルや他の方法で作成されたデータベースビューを表す場合に便利です。これは <code class="docutils literal notranslate"><span class="pre">managed=False</span></code> の場合の <em>唯一の</em> 違いです。モデルの処理に関する他のすべての側面は、通常とまったく同じです。これには以下が含まれます。</p>
<ol class="arabic">
<li><p>プライマリキーフィールドを宣言しない場合、モデルに自動的にプライマリキーフィールドを追加します。 後でコードを読む人の混乱を避けるために、管理対象外のモデルを使うときには、モデル化しているデータベーステーブルのすべてのカラムを指定することをお勧めします。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">managed=False</span></code> のモデルが <a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> を含み、それが別の管理対象外モデルを指している場合、多対多の結合のための中間テーブルも作成されません。しかし、1つの管理モデルと1つの管理対象外モデル間の中間テーブルは <em>作成</em> されます。</p>
<p>このデフォルトの動作を変更する必要がある場合は、(<code class="docutils literal notranslate"><span class="pre">managed</span></code> を必要に応じて設定した) 明示的なモデルとして中間テーブルを作成し、 <a class="reference internal" href="fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ManyToManyField.through</span></code></a> 属性を使用してカスタムモデルとのリレーションを作成します。</p>
</li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">managed=False</span></code> のモデルを含むテストでは、テストのセットアップの一部として正しいテーブルが作成されるようにする必要があります。</p>
<p>モデルクラスの Python レベルでの動作を変更したい場合、 <code class="docutils literal notranslate"><span class="pre">managed=False</span></code> を使って既存のモデルのコピーを作成することもできます。しかし、その場合はもっと良い方法があります。 <a class="reference internal" href="../../topics/db/models.html#proxy-models"><span class="std std-ref">プロキシモデル</span></a> です。</p>
</dd></dl>

</section>
<section id="s-order-with-respect-to">
<span id="order-with-respect-to"></span><h3><code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code><a class="headerlink" href="#order-with-respect-to" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.order_with_respect_to">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">order_with_respect_to</span></span><a class="headerlink" href="#django.db.models.Options.order_with_respect_to" title="Link to this definition">¶</a></dt>
<dd><p>このオブジェクトを指定されたフィールドに対してソート可能にします。通常は <code class="docutils literal notranslate"><span class="pre">ForeignKey</span></code> です。これは、リレーション先オブジェクトを親オブジェクトに対してソート可能にするために使用できます。例えば、 <code class="docutils literal notranslate"><span class="pre">Answer</span></code> と <code class="docutils literal notranslate"><span class="pre">Question</span></code> オブジェクトにリレーションがあり、質問には複数の答えがあり、答えの順番が重要である場合、次のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Question</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
    <span class="c1"># ...</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Answer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Question</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
    <span class="c1"># ...</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">order_with_respect_to</span> <span class="o">=</span> <span class="s2">&quot;question&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> が指定されている場合、リレーション先オブジェクトの順序を取得・設定するための2つのメソッドが追加されます。 <code class="docutils literal notranslate"><span class="pre">get_RELATED_order()</span></code> と <code class="docutils literal notranslate"><span class="pre">set_RELATED_order()</span></code> で、 <code class="docutils literal notranslate"><span class="pre">RELATED</span></code> は小文字のモデル名です。たとえば、ある <code class="docutils literal notranslate"><span class="pre">Question</span></code> オブジェクトが複数の <code class="docutils literal notranslate"><span class="pre">Answer</span></code> オブジェクトにリレーションしているとすると、返されるリストにはリレーション先の <code class="docutils literal notranslate"><span class="pre">Answer</span></code> オブジェクトのプライマリキーが含まれます：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">question</span> <span class="o">=</span> <span class="n">Question</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">question</span><span class="o">.</span><span class="n">get_answer_order</span><span class="p">()</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
<p>Questionオブジェクトのリレーション先の <code class="docutils literal notranslate"><span class="pre">Answer</span></code> オブジェクトの順番は、 <code class="docutils literal notranslate"><span class="pre">Answer</span></code> のプライマリキーのリストを渡すことで設定できます：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">question</span><span class="o">.</span><span class="n">set_answer_order</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p>リレーション先オブジェクトには <code class="docutils literal notranslate"><span class="pre">get_next_in_order()</span></code> と <code class="docutils literal notranslate"><span class="pre">get_previous_in_order()</span></code> というメソッドもあり、これらのオブジェクトに適切な順番でアクセスできます。 <code class="docutils literal notranslate"><span class="pre">Answer</span></code> オブジェクトが <code class="docutils literal notranslate"><span class="pre">id</span></code> で並べられていると仮定すると、下記のようになります：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">answer</span> <span class="o">=</span> <span class="n">Answer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">answer</span><span class="o">.</span><span class="n">get_next_in_order</span><span class="p">()</span>
<span class="go">&lt;Answer: 3&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">answer</span><span class="o">.</span><span class="n">get_previous_in_order</span><span class="p">()</span>
<span class="go">&lt;Answer: 1&gt;</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition-order-with-respect-to-implicitly-sets-the-ordering-option admonition">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> は暗黙で <code class="docutils literal notranslate"><span class="pre">ordering</span></code> オプションを設定します。</p>
<p>内部的には、 <code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> は <code class="docutils literal notranslate"><span class="pre">_order</span></code> という追加のフィールド/データベースカラムを追加し、モデルの <a class="reference internal" href="#django.db.models.Options.ordering" title="django.db.models.Options.ordering"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ordering</span></code></a> オプションをこのフィールドに設定します。そのため、<code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> と <code class="docutils literal notranslate"><span class="pre">ordering</span></code> を一緒に使用することはできません。また、<code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> によって追加された順序は、このモデルのオブジェクトのリストを取得する際に常に適用されます。</p>
</div>
<div class="admonition-changing-order-with-respect-to admonition">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> を変更するとき</p>
<p><code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> は新しいデータベースカラムを追加するので、初期マイグレーションの <a class="reference internal" href="../django-admin.html#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a> の後に <code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code> を追加または変更する場合は、適切なマイグレーションを作成して適用してください。</p>
</div>
</section>
<section id="s-ordering">
<span id="ordering"></span><h3><code class="docutils literal notranslate"><span class="pre">ordering</span></code><a class="headerlink" href="#ordering" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.ordering">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">ordering</span></span><a class="headerlink" href="#django.db.models.Options.ordering" title="Link to this definition">¶</a></dt>
<dd><p>オブジェクトのリストを取得するときに使用する、オブジェクトのデフォルトの順序：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-order_date&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>これは文字列やクエリ式のタプルまたはリストです。各文字列はフィールド名で、オプションのプレフィックス &quot;-&quot; は降順を表します。先頭の &quot;-&quot; がないフィールドは昇順に並びます。ランダムに並び替えたい場合は、文字列 &quot;?&quot; を使用します。</p>
<p>例えば、 <code class="docutils literal notranslate"><span class="pre">pub_date</span></code> フィールドで昇順にソートするには、次のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;pub_date&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pub_date</span></code> の降順でソートするには、次のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-pub_date&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pub_date</span></code> の降順でソートし、 <code class="docutils literal notranslate"><span class="pre">author</span></code> の昇順でソートするには、次のようにします：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-pub_date&quot;</span><span class="p">,</span> <span class="s2">&quot;author&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><a class="reference internal" href="expressions.html"><span class="doc">クエリ式</span></a> を使うこともできます。 <code class="docutils literal notranslate"><span class="pre">author</span></code> の昇順で並び替え、null値を最後にソートしたい場合、これを使います:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">F</span>

<span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">asc</span><span class="p">(</span><span class="n">nulls_last</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>ソートには計算コストがかかります。ソート条件に追加した各フィールドに、データベースへのコストが発生します。追加する各外部キーには、暗黙的にすべてのデフォルトのソート条件が含まれます。</p>
<p>クエリでソートが指定されていない場合、データベースから返される結果の順序は指定されません。特定の順序が保証されるのは、結果内の各オブジェクトを一意に識別するフィールドの組み合わせでソートした場合だけです。例えば、 <code class="docutils literal notranslate"><span class="pre">name</span></code> フィールドが一意でない場合、そのフィールドでソートしても、同じ名前のオブジェクトが常に同じ順序で表示されるとは限りません。</p>
</div>
</section>
<section id="s-permissions">
<span id="permissions"></span><h3><code class="docutils literal notranslate"><span class="pre">permissions</span></code><a class="headerlink" href="#permissions" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.permissions">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">permissions</span></span><a class="headerlink" href="#django.db.models.Options.permissions" title="Link to this definition">¶</a></dt>
<dd><p>このオブジェクトを作成するときに permissions テーブルに入力する追加のパーミッション。追加、変更、削除、表示のパーミッションはそれぞれのモデルに対して自動的に作成されます。この例では <code class="docutils literal notranslate"><span class="pre">can_deliver_pizzas</span></code> という追加のパーミッションを指定しています：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">permissions</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;can_deliver_pizzas&quot;</span><span class="p">,</span> <span class="s2">&quot;Can deliver pizzas&quot;</span><span class="p">)]</span>
</pre></div>
</div>
<p>これは <code class="docutils literal notranslate"><span class="pre">(permission_code,</span> <span class="pre">human_readable_permission_name)</span></code> の形式の2値タプルのリストまたはタプルです。</p>
</dd></dl>

</section>
<section id="s-default-permissions">
<span id="default-permissions"></span><h3><code class="docutils literal notranslate"><span class="pre">default_permissions</span></code><a class="headerlink" href="#default-permissions" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.default_permissions">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">default_permissions</span></span><a class="headerlink" href="#django.db.models.Options.default_permissions" title="Link to this definition">¶</a></dt>
<dd><p>デフォルトは <code class="docutils literal notranslate"><span class="pre">('add',</span> <span class="pre">'change',</span> <span class="pre">'delete',</span> <span class="pre">'view')</span></code> です。このリストはカスタマイズできます。例えば、アプリがデフォルトのパーミッションを必要としない場合は、空のリストを指定します。暗黙的にパーミッションが作成されるのを防ぐには、 <a class="reference internal" href="../django-admin.html#django-admin-migrate"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">migrate</span></code></a> によってモデルが作成される前に、モデルに指定する必要があります。</p>
</dd></dl>

</section>
<section id="s-proxy">
<span id="proxy"></span><h3><code class="docutils literal notranslate"><span class="pre">proxy</span></code><a class="headerlink" href="#proxy" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.proxy">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">proxy</span></span><a class="headerlink" href="#django.db.models.Options.proxy" title="Link to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">proxy</span> <span class="pre">=</span> <span class="pre">True</span></code> の場合、他のモデルをサブクラス化したモデルは <a class="reference internal" href="../../topics/db/models.html#proxy-models"><span class="std std-ref">プロキシモデル</span></a> として扱われます。</p>
</dd></dl>

</section>
<section id="s-required-db-features">
<span id="required-db-features"></span><h3><code class="docutils literal notranslate"><span class="pre">required_db_features</span></code><a class="headerlink" href="#required-db-features" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.required_db_features">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">required_db_features</span></span><a class="headerlink" href="#django.db.models.Options.required_db_features" title="Link to this definition">¶</a></dt>
<dd><p>現在の接続が持つべきデータベースの機能のリストで、このリストに基づいてモデルがマイグレーションフェーズで考慮されます。たとえば、このリストを <code class="docutils literal notranslate"><span class="pre">['gis_enabled']</span></code> に設定すると、そのモデルはGISが有効なデータベース上でのみ同期されます。これは、複数のデータベースバックエンドでテストする際に、一部のモデルをスキップするのにも便利です。作成されるかどうかわからないモデル間のリレーションは避けてください。ORMはこれを処理しません。</p>
</dd></dl>

</section>
<section id="s-required-db-vendor">
<span id="required-db-vendor"></span><h3><code class="docutils literal notranslate"><span class="pre">required_db_vendor</span></code><a class="headerlink" href="#required-db-vendor" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.required_db_vendor">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">required_db_vendor</span></span><a class="headerlink" href="#django.db.models.Options.required_db_vendor" title="Link to this definition">¶</a></dt>
<dd><p>このモデルが特定する、サポートされているデータベース・ベンダーの名前。現在の組み込みベンダー名は <code class="docutils literal notranslate"><span class="pre">sqlite</span></code>, <code class="docutils literal notranslate"><span class="pre">postgresql</span></code>, <code class="docutils literal notranslate"><span class="pre">mysql</span></code>, <code class="docutils literal notranslate"><span class="pre">oracle</span></code> です。この属性が空ではなく、現在の接続ベンダーがこの属性と一致しない場合、モデルは同期されません。</p>
</dd></dl>

</section>
<section id="s-select-on-save">
<span id="select-on-save"></span><h3><code class="docutils literal notranslate"><span class="pre">select_on_save</span></code><a class="headerlink" href="#select-on-save" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.select_on_save">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">select_on_save</span></span><a class="headerlink" href="#django.db.models.Options.select_on_save" title="Link to this definition">¶</a></dt>
<dd><p>Django が 1.6 より前の <a class="reference internal" href="instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.db.models.Model.save()</span></code></a> アルゴリズムを使うかどうかを決定します。古いアルゴリズムでは、 <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> を使って、更新する既存の行があるかどうかを判断します。新しいアルゴリズムは <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> を直接試みます。まれに、既存の行の <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> が Django から見えない場合があります。たとえば、PostgreSQL の <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">UPDATE</span></code> トリガーは <code class="docutils literal notranslate"><span class="pre">NULL</span></code> を返します。このような場合、新しいアルゴリズムは、データベースに行が存在しても、 <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> を実行してしまいます。</p>
<p>通常、この属性を設定する必要はありません。デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。</p>
<p>新旧の保存アルゴリズムについては <a class="reference internal" href="instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.db.models.Model.save()</span></code></a> を参照してください。</p>
</dd></dl>

</section>
<section id="s-indexes">
<span id="indexes"></span><h3><code class="docutils literal notranslate"><span class="pre">indexes</span></code><a class="headerlink" href="#indexes" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.indexes">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">indexes</span></span><a class="headerlink" href="#django.db.models.Options.indexes" title="Link to this definition">¶</a></dt>
<dd><p>モデルに定義したい <a class="reference internal" href="indexes.html"><span class="doc">インデックス</span></a> のリストです：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Customer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span> <span class="s2">&quot;first_name&quot;</span><span class="p">]),</span>
            <span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first_name&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;first_name_idx&quot;</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="s-unique-together">
<span id="unique-together"></span><h3><code class="docutils literal notranslate"><span class="pre">unique_together</span></code><a class="headerlink" href="#unique-together" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.unique_together">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">unique_together</span></span><a class="headerlink" href="#django.db.models.Options.unique_together" title="Link to this definition">¶</a></dt>
<dd><div class="admonition-use-class-uniqueconstraint-with-the-attr-options-constraints-option-instead admonition">
<p class="admonition-title">代わりに <a class="reference internal" href="constraints.html#django.db.models.UniqueConstraint" title="django.db.models.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> を <a class="reference internal" href="#django.db.models.Options.constraints" title="django.db.models.Options.constraints"><code class="xref py py-attr docutils literal notranslate"><span class="pre">constraints</span></code></a> オプションとともに使用してください。</p>
<p><a class="reference internal" href="constraints.html#django.db.models.UniqueConstraint" title="django.db.models.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> は <code class="docutils literal notranslate"><span class="pre">unique_together</span></code> よりも多くの機能を提供します。 <code class="docutils literal notranslate"><span class="pre">unique_together</span></code> は将来廃止される可能性があります。</p>
</div>
<p>組み合わせが一意でなければならないフィールドのリストを指定します。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unique_together</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;driver&quot;</span><span class="p">,</span> <span class="s2">&quot;restaurant&quot;</span><span class="p">]]</span>
</pre></div>
</div>
<p>これは、一緒に考えたときに一意でなければならないリストのリストです。Django の管理画面で使われ、データベースレベルで強制されます (つまり、 <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> ステートメントに適切な <code class="docutils literal notranslate"><span class="pre">UNIQUE</span></code> ステートメントが含まれます)。</p>
<p>利便性のために、<code class="docutils literal notranslate"><span class="pre">unique_together</span></code> は1つのフィールドセットしかないときは1つのリストにできます：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unique_together</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;driver&quot;</span><span class="p">,</span> <span class="s2">&quot;restaurant&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> を <code class="docutils literal notranslate"><span class="pre">unique_together</span></code> に含めることはできません（それが何を意味するのかさえ不明です！）。<a class="reference internal" href="fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManyToManyField</span></code></a> に関連する一意性を検証する必要がある場合は、シグナルを使うか、明示的な <a class="reference internal" href="fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><code class="xref py py-attr docutils literal notranslate"><span class="pre">through</span></code></a> モデルを使用してみてください。</p>
<p>制約に違反したときにモデル検証中に発生する <code class="docutils literal notranslate"><span class="pre">ValidationError</span></code> は <code class="docutils literal notranslate"><span class="pre">unique_together</span></code> エラーコードを持ちます。</p>
</dd></dl>

</section>
<section id="s-constraints">
<span id="constraints"></span><h3><code class="docutils literal notranslate"><span class="pre">constraints</span></code><a class="headerlink" href="#constraints" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.constraints">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">constraints</span></span><a class="headerlink" href="#django.db.models.Options.constraints" title="Link to this definition">¶</a></dt>
<dd><p>モデルに定義したい <a class="reference internal" href="constraints.html"><span class="doc">制約</span></a> のリスト：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Customer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">models</span><span class="o">.</span><span class="n">CheckConstraint</span><span class="p">(</span><span class="n">condition</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Q</span><span class="p">(</span><span class="n">age__gte</span><span class="o">=</span><span class="mi">18</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;age_gte_18&quot;</span><span class="p">),</span>
        <span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="s-verbose-name">
<span id="verbose-name"></span><h3><code class="docutils literal notranslate"><span class="pre">verbose_name</span></code><a class="headerlink" href="#verbose-name" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.verbose_name">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">verbose_name</span></span><a class="headerlink" href="#django.db.models.Options.verbose_name" title="Link to this definition">¶</a></dt>
<dd><p>人間が読めるオブジェクトの名前（単数形）：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;pizza&quot;</span>
</pre></div>
</div>
<p>指定されない場合、 Django はクラス名を小文字にして使います。 <code class="docutils literal notranslate"><span class="pre">CamelCase</span></code> は <code class="docutils literal notranslate"><span class="pre">camel</span> <span class="pre">case</span></code> になります。</p>
</dd></dl>

</section>
<section id="s-verbose-name-plural">
<span id="verbose-name-plural"></span><h3><code class="docutils literal notranslate"><span class="pre">verbose_name_plural</span></code><a class="headerlink" href="#verbose-name-plural" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.verbose_name_plural">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">verbose_name_plural</span></span><a class="headerlink" href="#django.db.models.Options.verbose_name_plural" title="Link to this definition">¶</a></dt>
<dd><p>オブジェクトの名前の複数形：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="s2">&quot;stories&quot;</span>
</pre></div>
</div>
<p>指定されない場合、 Django は <a class="reference internal" href="#django.db.models.Options.verbose_name" title="django.db.models.Options.verbose_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name</span></code></a> + <code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code> を使用します。</p>
</dd></dl>

</section>
</section>
<section id="s-read-only-meta-attributes">
<span id="read-only-meta-attributes"></span><h2>読み取り専用の <code class="docutils literal notranslate"><span class="pre">Meta</span></code> 属性<a class="headerlink" href="#read-only-meta-attributes" title="Link to this heading">¶</a></h2>
<section id="s-label">
<span id="label"></span><h3><code class="docutils literal notranslate"><span class="pre">label</span></code><a class="headerlink" href="#label" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.label">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">label</span></span><a class="headerlink" href="#django.db.models.Options.label" title="Link to this definition">¶</a></dt>
<dd><p>オブジェクトの表現。<code class="docutils literal notranslate"><span class="pre">app_label.object_name</span></code> を返します。例： <code class="docutils literal notranslate"><span class="pre">'polls.Question'</span></code></p>
</dd></dl>

</section>
<section id="s-label-lower">
<span id="label-lower"></span><h3><code class="docutils literal notranslate"><span class="pre">label_lower</span></code><a class="headerlink" href="#label-lower" title="Link to this heading">¶</a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.db.models.Options.label_lower">
<span class="sig-prename descclassname"><span class="pre">Options.</span></span><span class="sig-name descname"><span class="pre">label_lower</span></span><a class="headerlink" href="#django.db.models.Options.label_lower" title="Link to this definition">¶</a></dt>
<dd><p>モデルの表現。<code class="docutils literal notranslate"><span class="pre">app_label.model_name'</span></code> を返します。例： <code class="docutils literal notranslate"><span class="pre">'polls.question'</span></code></p>
</dd></dl>

</section>
</section>
</section>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">モデルの <code class="docutils literal notranslate"><span class="pre">Meta</span></code> オプション</a><ul>
<li><a class="reference internal" href="#available-meta-options">利用可能な <code class="docutils literal notranslate"><span class="pre">Meta</span></code> オプション</a><ul>
<li><a class="reference internal" href="#abstract"><code class="docutils literal notranslate"><span class="pre">abstract</span></code></a></li>
<li><a class="reference internal" href="#app-label"><code class="docutils literal notranslate"><span class="pre">app_label</span></code></a></li>
<li><a class="reference internal" href="#base-manager-name"><code class="docutils literal notranslate"><span class="pre">base_manager_name</span></code></a></li>
<li><a class="reference internal" href="#db-table"><code class="docutils literal notranslate"><span class="pre">db_table</span></code></a><ul>
<li><a class="reference internal" href="#table-names">テーブル名</a></li>
</ul>
</li>
<li><a class="reference internal" href="#db-table-comment"><code class="docutils literal notranslate"><span class="pre">db_table_comment</span></code></a></li>
<li><a class="reference internal" href="#db-tablespace"><code class="docutils literal notranslate"><span class="pre">db_tablespace</span></code></a></li>
<li><a class="reference internal" href="#default-manager-name"><code class="docutils literal notranslate"><span class="pre">default_manager_name</span></code></a></li>
<li><a class="reference internal" href="#default-related-name"><code class="docutils literal notranslate"><span class="pre">default_related_name</span></code></a></li>
<li><a class="reference internal" href="#get-latest-by"><code class="docutils literal notranslate"><span class="pre">get_latest_by</span></code></a></li>
<li><a class="reference internal" href="#managed"><code class="docutils literal notranslate"><span class="pre">managed</span></code></a></li>
<li><a class="reference internal" href="#order-with-respect-to"><code class="docutils literal notranslate"><span class="pre">order_with_respect_to</span></code></a></li>
<li><a class="reference internal" href="#ordering"><code class="docutils literal notranslate"><span class="pre">ordering</span></code></a></li>
<li><a class="reference internal" href="#permissions"><code class="docutils literal notranslate"><span class="pre">permissions</span></code></a></li>
<li><a class="reference internal" href="#default-permissions"><code class="docutils literal notranslate"><span class="pre">default_permissions</span></code></a></li>
<li><a class="reference internal" href="#proxy"><code class="docutils literal notranslate"><span class="pre">proxy</span></code></a></li>
<li><a class="reference internal" href="#required-db-features"><code class="docutils literal notranslate"><span class="pre">required_db_features</span></code></a></li>
<li><a class="reference internal" href="#required-db-vendor"><code class="docutils literal notranslate"><span class="pre">required_db_vendor</span></code></a></li>
<li><a class="reference internal" href="#select-on-save"><code class="docutils literal notranslate"><span class="pre">select_on_save</span></code></a></li>
<li><a class="reference internal" href="#indexes"><code class="docutils literal notranslate"><span class="pre">indexes</span></code></a></li>
<li><a class="reference internal" href="#unique-together"><code class="docutils literal notranslate"><span class="pre">unique_together</span></code></a></li>
<li><a class="reference internal" href="#constraints"><code class="docutils literal notranslate"><span class="pre">constraints</span></code></a></li>
<li><a class="reference internal" href="#verbose-name"><code class="docutils literal notranslate"><span class="pre">verbose_name</span></code></a></li>
<li><a class="reference internal" href="#verbose-name-plural"><code class="docutils literal notranslate"><span class="pre">verbose_name_plural</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#read-only-meta-attributes">読み取り専用の <code class="docutils literal notranslate"><span class="pre">Meta</span></code> 属性</a><ul>
<li><a class="reference internal" href="#label"><code class="docutils literal notranslate"><span class="pre">label</span></code></a></li>
<li><a class="reference internal" href="#label-lower"><code class="docutils literal notranslate"><span class="pre">label_lower</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="class.html"
                          title="前の章へ">Model クラスのリファレンス</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="instances.html"
                          title="次の章へ">モデルインスタンスリファレンス</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/ref/models/options.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">1月 22, 2025</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="class.html" title="Model クラスのリファレンス">previous</a>
     |
    <a href="../index.html" title="API リファレンス" accesskey="U">up</a>
   |
    <a href="instances.html" title="モデルインスタンスリファレンス">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>