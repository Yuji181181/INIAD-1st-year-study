<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Djangoの設定 &#8212; Django 5.1.6.dev20250122212402 ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=34bb78ad" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css?v=bf4d74af" />
    <script src="../_static/documentation_options.js?v=d2885b0a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4755f45a"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="シグナル" href="signals.html" />
    <link rel="prev" title="Django オブジェクトのシリアライズ" href="serialization.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django 5.1.6.dev20250122212402 ドキュメント</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="serialization.html" title="Django オブジェクトのシリアライズ">previous</a>
     |
    <a href="index.html" title="Django を使う" accesskey="U">up</a>
   |
    <a href="signals.html" title="シグナル">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="topics-settings">
            
  <section id="s-django-settings">
<span id="django-settings"></span><h1>Djangoの設定<a class="headerlink" href="#django-settings" title="Link to this heading">¶</a></h1>
<p>Djangoの設定ファイルには、インストールしたDjangoの全ての設定が含まれています。このドキュメントでは、各設定の役割と、どのような設定を利用できるか説明していきます。</p>
<section id="s-the-basics">
<span id="the-basics"></span><h2>基礎<a class="headerlink" href="#the-basics" title="Link to this heading">¶</a></h2>
<p>設定ファイルはモジュールレベルの変数が記述された、ただのPythonモジュールです。</p>
<p>設定例を幾つか示します:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;www.example.com&quot;</span><span class="p">]</span>
<span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">DEFAULT_FROM_EMAIL</span> <span class="o">=</span> <span class="s2">&quot;webmaster@example.com&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>もし <a class="reference internal" href="../ref/settings.html#std-setting-DEBUG"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEBUG</span></code></a> を <code class="docutils literal notranslate"><span class="pre">False</span></code> にした場合、 <a class="reference internal" href="../ref/settings.html#std-setting-ALLOWED_HOSTS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ALLOWED_HOSTS</span></code></a> も設定する必要があります。</p>
</div>
<p>設定ファイルはPythonのモジュールなので、以下のような性質を備えています。</p>
<ul>
<li><p>Pythonの構文エラーになってはいけません。</p></li>
<li><p>通常の Pythonの構文を使って、動的に値を設定する事ができます。例えば:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MY_SETTING</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">)]</span>
</pre></div>
</div>
</li>
<li><p>他の設定ファイルから値を import できます。</p></li>
</ul>
</section>
<section id="s-designating-the-settings">
<span id="s-django-settings-module"></span><span id="designating-the-settings"></span><span id="django-settings-module"></span><h2>設定ファイルの指定<a class="headerlink" href="#designating-the-settings" title="Link to this heading">¶</a></h2>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-DJANGO_SETTINGS_MODULE">
<span class="sig-name descname"><span class="pre">DJANGO_SETTINGS_MODULE</span></span><a class="headerlink" href="#envvar-DJANGO_SETTINGS_MODULE" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Django を使うとき、どの設定を使うかを Django に伝える必要があります。そのためには環境変数 <span class="target" id="index-20"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> を使います。</p>
<p><span class="target" id="index-21"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> の値は Python のパス構文、例えば <code class="docutils literal notranslate"><span class="pre">mysite.settings</span></code> で指定します。設定モジュールはPythonの <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.path" title="(in Python v3.13)"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> にあることに注意してください。</p>
<section id="s-the-django-admin-utility">
<span id="the-django-admin-utility"></span><h3><code class="docutils literal notranslate"><span class="pre">django-admin</span></code> ユーティリティ<a class="headerlink" href="#the-django-admin-utility" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../ref/django-admin.html"><span class="doc">django-admin</span></a> を使う場合、環境変数を予め指定しておくか、ユーティリティを起動する度に設定モジュールを明示的に渡します。</p>
<p>例 (Unix Bash シェル):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>mysite.settings
django-admin<span class="w"> </span>runserver
</pre></div>
</div>
<p>例 (Windows シェル):</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="go">set DJANGO_SETTINGS_MODULE=mysite.settings</span>
<span class="go">django-admin runserver</span>
</pre></div>
</div>
<p>コマンドライン引数で設定モジュールを指定するには、次のように <code class="docutils literal notranslate"><span class="pre">--settings</span></code> を使用します。</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>django-admin<span class="w"> </span>runserver<span class="w"> </span>--settings<span class="o">=</span>mysite.settings
</pre></div>
</div>
</section>
<section id="s-on-the-server-mod-wsgi">
<span id="on-the-server-mod-wsgi"></span><h3>サーバ (<code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code>) の設定<a class="headerlink" href="#on-the-server-mod-wsgi" title="Link to this heading">¶</a></h3>
<p>実際のサーバ環境では、 WSGI アプリケーションにどの設定ファイルを使うのか教えてあげる必要があります。これには <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>:: を使います。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;DJANGO_SETTINGS_MODULE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mysite.settings&quot;</span>
</pre></div>
</div>
<p>さらなる情報や他のDjango WSGI アプリケーションでの共通の設定は <a class="reference internal" href="../howto/deployment/wsgi/modwsgi.html"><span class="doc">Django mod_wsgi ドキュメント</span></a> を参照してください。</p>
</section>
</section>
<section id="s-default-settings">
<span id="default-settings"></span><h2>デフォルトの設定<a class="headerlink" href="#default-settings" title="Link to this heading">¶</a></h2>
<p>Django の設定ファイルでは、特に必要のない限り設定を行う必要はありません。各々の設定には注意深く決められたデフォルト値が入っています。デフォルト値は <a class="extlink-source reference external" href="https://github.com/django/django/blob/main/django/conf/global_settings.py">django/conf/global_settings.py</a> に記述されています。</p>
<p>Django が設定をコンパイルする際には、以下のようなアルゴリズムを使います:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">global_settings.py</span></code> から設定を読みだす。</p></li>
<li><p>指定された設定ファイルから設定を読み込み、グローバルな設定を必要に応じて上書きします。</p></li>
</ul>
<p>設定ファイルから <code class="docutils literal notranslate"><span class="pre">global_settings</span></code> を読み込むのは冗長なのでやらないでください。</p>
<section id="s-seeing-which-settings-you-ve-changed">
<span id="seeing-which-settings-you-ve-changed"></span><h3>設定の変更を確かめる<a class="headerlink" href="#seeing-which-settings-you-ve-changed" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">diffsettings</span></code> コマンドは、現在の設定と Django のデフォルトの設定との違いを表示します。</p>
<p>詳しくは <a class="reference internal" href="../ref/django-admin.html#django-admin-diffsettings"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">diffsettings</span></code></a> のドキュメントを参照してください。</p>
</section>
</section>
<section id="s-using-settings-in-python-code">
<span id="using-settings-in-python-code"></span><h2>Pythonのコード内で設定を参照する<a class="headerlink" href="#using-settings-in-python-code" title="Link to this heading">¶</a></h2>
<p>自作のDjangoアプリケーションからは <code class="docutils literal notranslate"><span class="pre">django.conf.settings</span></code> をimportすることで設定を参照できます。例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>

<span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
    <span class="c1"># Do something</span>
    <span class="o">...</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">django.conf.settings</span></code> はモジュールではなく、ただのオブジェクトです。そのため個々の設定は別々にimportできません。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf.settings</span><span class="w"> </span><span class="kn">import</span> <span class="n">DEBUG</span>  <span class="c1"># This won&#39;t work.</span>
</pre></div>
</div>
<p>また <code class="docutils literal notranslate"><span class="pre">global_settings</span></code> や自作の設定ファイルをimportしてはいけません。 <code class="docutils literal notranslate"><span class="pre">django.conf.settings</span></code> はデフォルト設定とサイト固有の設定を抽象化し、単一のインタフェースを提供しています。また設定を使うコードと設定ファイルの場所を分離しています。</p>
</section>
<section id="s-altering-settings-at-runtime">
<span id="altering-settings-at-runtime"></span><h2>実行時に設定を変更する<a class="headerlink" href="#altering-settings-at-runtime" title="Link to this heading">¶</a></h2>
<p>アプリケーションの実行中に設定を変えてはいけません。例えば、viewの中で以下の実装を行ってはいけません。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>

<span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Don&#39;t do this!</span>
</pre></div>
</div>
<p>設定を変えて良いのは、設定ファイルの中だけです。</p>
</section>
<section id="s-security">
<span id="security"></span><h2>セキュリティ<a class="headerlink" href="#security" title="Link to this heading">¶</a></h2>
<p>設定ファイルにはデータベースのパスワードのような重要な情報が入っているため、設定ファイルへのアクセスはできるだけ制限してください。たとえば、設定ファイルのパーミッションを、あなたとウェブサーバだけが読み取れるようにしてください。共有ホスティング環境で運用する場合、これは極めて重要な事項です。</p>
</section>
<section id="s-available-settings">
<span id="available-settings"></span><h2>利用可能な設定<a class="headerlink" href="#available-settings" title="Link to this heading">¶</a></h2>
<p>利用可能な設定は <a class="reference internal" href="../ref/settings.html"><span class="doc">settings リファレンス</span></a> を参照してください。</p>
</section>
<section id="s-creating-your-own-settings">
<span id="creating-your-own-settings"></span><h2>設定項目を自作する<a class="headerlink" href="#creating-your-own-settings" title="Link to this heading">¶</a></h2>
<p>Django アプリケーションの設定項目は自由に作成できますが、以下のガイドラインに従ってください。</p>
<ul class="simple">
<li><p>設定項目の変数名は、全て大文字にしなければなりません。</p></li>
<li><p>既存の設定の再発明はやめましょう。</p></li>
</ul>
<p>設定値をシーケンスにする際は、リストを使ってください。ただしこれはDjangoの慣習です。</p>
</section>
<section id="s-using-settings-without-setting-django-settings-module">
<span id="s-settings-without-django-settings-module"></span><span id="using-settings-without-setting-django-settings-module"></span><span id="settings-without-django-settings-module"></span><h2><span class="target" id="index-12"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> 設定を使わない設定方法<a class="headerlink" href="#using-settings-without-setting-django-settings-module" title="Link to this heading">¶</a></h2>
<p><span class="target" id="index-22"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> 環境変数をパイパスしたい場合もあるかもしれません。たとえば、テンプレートシステムを単体で使いたい場合、設定モジュールを示すような環境変数は設定したくないでしょう。</p>
<p>こういったケースのため、Djangoでは以下の関数を呼ぶことで手動で設定できるようになっています。</p>
<dl class="py function">
<dt class="sig sig-object py" id="django.conf.settings.configure">
<span class="sig-prename descclassname"><span class="pre">django.conf.settings.</span></span><span class="sig-name descname"><span class="pre">configure</span></span>(<em class="sig-param"><span class="n"><span class="pre">default_settings</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">settings</span></span></em>)<a class="headerlink" href="#django.conf.settings.configure" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>実装例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>

<span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">DEBUG</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">configure()</span></code> には、キーワード引数を好きなだけ渡すことができ、各キーワード引数は設定とその値を表します。各引数名はすべて大文字で、上述の設定と同じ名前であるべきです。特定の設定が <code class="docutils literal notranslate"><span class="pre">configure()</span></code> に渡されず、後で必要になった場合、Djangoはデフォルトの設定値を使用します。</p>
<p>この方法でDjangoを設定することは、主にフレームワークの一部をより大きなアプリケーション内で使用している場合に必要であり、実際に推奨されています。</p>
<p>したがって、<code class="docutils literal notranslate"><span class="pre">settings.configure()</span></code> を介して設定された場合、Djangoはプロセス環境変数を変更しません (これが通常発生する理由については、<a class="reference internal" href="../ref/settings.html#std-setting-TIME_ZONE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">TIME_ZONE</span></code></a> のドキュメントを参照してください)。これらの場合、すでに環境を完全に制御していることが前提となります。</p>
<section id="s-custom-default-settings">
<span id="custom-default-settings"></span><h3>カスタムのデフォルト設定<a class="headerlink" href="#custom-default-settings" title="Link to this heading">¶</a></h3>
<p>デフォルト値を <code class="docutils literal notranslate"><span class="pre">django.conf.global_settings</span></code> 以外の場所から取得したい場合は、デフォルト設定を提供するモジュールやクラスを <code class="docutils literal notranslate"><span class="pre">configure()</span></code> 呼び出し時の <code class="docutils literal notranslate"><span class="pre">default_settings</span></code> 引数（または最初の位置引数）として渡すことができます。</p>
<p>この例では、デフォルトの設定は <code class="docutils literal notranslate"><span class="pre">myapp_defaults</span></code> から取得され、 <a class="reference internal" href="../ref/settings.html#std-setting-DEBUG"><code class="xref std std-setting docutils literal notranslate"><span class="pre">DEBUG</span></code></a> 設定は <code class="docutils literal notranslate"><span class="pre">myapp_defaults</span></code> での値に関係なく <code class="docutils literal notranslate"><span class="pre">True</span></code> に設定されます:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">myapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">myapp_defaults</span>

<span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">default_settings</span><span class="o">=</span><span class="n">myapp_defaults</span><span class="p">,</span> <span class="n">DEBUG</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>次の例では、 <code class="docutils literal notranslate"><span class="pre">myapp_defaults</span></code> を位置引数として使っていますが、等価です:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">myapp_defaults</span><span class="p">,</span> <span class="n">DEBUG</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>通常、このような方法でデフォルトを上書きする必要はありません。Django のデフォ ルトは十分に無難なので、安全に使うことができます。新しいデフォルトモジュールを渡す場合、Djangoのデフォルトを完全に <em>置き換える</em> ため、インポートしているコードで使用される可能性のあるすべての設定に対して値を指定する必要があることに注意してください。全リストは <code class="docutils literal notranslate"><span class="pre">django.conf.settings.global_settings</span></code> を参照してください。</p>
</section>
<section id="s-either-configure-or-django-settings-module-is-required">
<span id="either-configure-or-django-settings-module-is-required"></span><h3><code class="docutils literal notranslate"><span class="pre">configure()</span></code> と <span class="target" id="index-14"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> は片方だけが必要<a class="headerlink" href="#either-configure-or-django-settings-module-is-required" title="Link to this heading">¶</a></h3>
<p>環境変数 <span class="target" id="index-23"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> を設定していない場合、設定を読み込むコードを使用する前に <code class="docutils literal notranslate"><span class="pre">configure()</span></code> を呼び出す <em>必要があります</em> 。</p>
<p><span class="target" id="index-24"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> を設定せず、 <code class="docutils literal notranslate"><span class="pre">configure()</span></code> を呼び出さない場合、 Django は設定に初めてアクセスしたときに <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> 例外を発生させます。</p>
<p><span class="target" id="index-25"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> を設定し、何らかの方法で設定値にアクセスし、 <em>その後に</em> <code class="docutils literal notranslate"><span class="pre">configure()</span></code> を呼び出すと、Django は設定が既に設定されていることを示す <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> を送出します。このためのプロパティがあります:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="django.conf.settings.configured">
<span class="sig-prename descclassname"><span class="pre">django.conf.settings.</span></span><span class="sig-name descname"><span class="pre">configured</span></span><a class="headerlink" href="#django.conf.settings.configured" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">settings</span><span class="o">.</span><span class="n">configured</span><span class="p">:</span>
    <span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">myapp_defaults</span><span class="p">,</span> <span class="n">DEBUG</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>また、 <code class="docutils literal notranslate"><span class="pre">configure()</span></code> を2回以上呼び出したり、設定にアクセスした後に <code class="docutils literal notranslate"><span class="pre">configure()</span></code> を呼び出したりするとエラーになります。</p>
<p>結論はこうです： <code class="docutils literal notranslate"><span class="pre">configure()</span></code> と <span class="target" id="index-26"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> のどちらか片方だけを使ってください。両方使うのも、両方使わないのもいけません。</p>
</section>
<section id="s-calling-django-setup-is-required-for-standalone-django-usage">
<span id="calling-django-setup-is-required-for-standalone-django-usage"></span><h3>スタンドアロンで Django を使うには <code class="docutils literal notranslate"><span class="pre">django.setup()</span></code> を呼び出す必要がある<a class="headerlink" href="#calling-django-setup-is-required-for-standalone-django-usage" title="Link to this heading">¶</a></h3>
<p>Django のコンポーネントを &quot;スタンドアロン&quot; で使う場合、たとえば、 Django テンプレートを読み込んでレンダリングする Python スクリプトを書いたり、 ORM を使ってデータを取得したりする場合、設定の他にもう一つ必要なステップがあります。</p>
<p><span class="target" id="index-27"></span><a class="reference internal" href="#envvar-DJANGO_SETTINGS_MODULE"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code></a> を設定するか、 <code class="docutils literal notranslate"><span class="pre">configure()</span></code> を呼び出したら、 <a class="reference internal" href="../ref/applications.html#django.setup" title="django.setup"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.setup()</span></code></a> を呼び出して設定をロードし、 Django のアプリケーションレジストリに入力する必要があります。たとえば、以下のようにします:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">django</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">myapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">myapp_defaults</span>

<span class="n">settings</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">default_settings</span><span class="o">=</span><span class="n">myapp_defaults</span><span class="p">,</span> <span class="n">DEBUG</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">django</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>

<span class="c1"># Now this script or any imported module can use any part of Django it needs.</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">myapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">django.setup()</span></code> を呼び出す必要があるのは、あなたのコードが本当にスタンドアロンである場合だけだということに注意してください。ウェブサーバから起動された場合、あるいは <a class="reference internal" href="../ref/django-admin.html"><span class="doc">django-admin</span></a> から起動された場合は、Django がこの処理を行います。</p>
<div class="admonition-django-setup-may-only-be-called-once admonition">
<p class="admonition-title"><code class="docutils literal notranslate"><span class="pre">django.setup()</span></code> は一度しか呼び出せません。</p>
<p>そのため、再利用可能なアプリケーションロジックをスタンドアロンスクリプトに置いて、アプリケーションの他の場所でそのスクリプトからインポートしなければならないようにするのは避けてください。それを避けられない場合は、下記のように <code class="docutils literal notranslate"><span class="pre">django.setup()</span></code> の呼び出しを <code class="docutils literal notranslate"><span class="pre">if</span></code> ブロックの中に入れてください:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">django</span>

    <span class="n">django</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参考</p>
<dl class="simple">
<dt><a class="reference internal" href="../ref/settings.html"><span class="doc">設定のリファレンス</span></a></dt><dd><p>コア・アプリと contlib アプリの設定の完全なリストを記載しています。</p>
</dd>
</dl>
</div>
</section>
</section>
</section>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">Djangoの設定</a><ul>
<li><a class="reference internal" href="#the-basics">基礎</a></li>
<li><a class="reference internal" href="#designating-the-settings">設定ファイルの指定</a><ul>
<li><a class="reference internal" href="#the-django-admin-utility"><code class="docutils literal notranslate"><span class="pre">django-admin</span></code> ユーティリティ</a></li>
<li><a class="reference internal" href="#on-the-server-mod-wsgi">サーバ (<code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code>) の設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#default-settings">デフォルトの設定</a><ul>
<li><a class="reference internal" href="#seeing-which-settings-you-ve-changed">設定の変更を確かめる</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-settings-in-python-code">Pythonのコード内で設定を参照する</a></li>
<li><a class="reference internal" href="#altering-settings-at-runtime">実行時に設定を変更する</a></li>
<li><a class="reference internal" href="#security">セキュリティ</a></li>
<li><a class="reference internal" href="#available-settings">利用可能な設定</a></li>
<li><a class="reference internal" href="#creating-your-own-settings">設定項目を自作する</a></li>
<li><a class="reference internal" href="#using-settings-without-setting-django-settings-module"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code> 設定を使わない設定方法</a><ul>
<li><a class="reference internal" href="#custom-default-settings">カスタムのデフォルト設定</a></li>
<li><a class="reference internal" href="#either-configure-or-django-settings-module-is-required"><code class="docutils literal notranslate"><span class="pre">configure()</span></code> と <code class="xref std std-envvar docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code> は片方だけが必要</a></li>
<li><a class="reference internal" href="#calling-django-setup-is-required-for-standalone-django-usage">スタンドアロンで Django を使うには <code class="docutils literal notranslate"><span class="pre">django.setup()</span></code> を呼び出す必要がある</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="serialization.html"
                          title="前の章へ">Django オブジェクトのシリアライズ</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="signals.html"
                          title="次の章へ">シグナル</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/topics/settings.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">1月 22, 2025</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="serialization.html" title="Django オブジェクトのシリアライズ">previous</a>
     |
    <a href="index.html" title="Django を使う" accesskey="U">up</a>
   |
    <a href="signals.html" title="シグナル">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>