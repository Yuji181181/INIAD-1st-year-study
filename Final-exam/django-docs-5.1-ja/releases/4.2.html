<!DOCTYPE html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Django 4.2 リリースノート &#8212; Django 5.1.6.dev20250122212402 ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=34bb78ad" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css?v=bf4d74af" />
    <script src="../_static/documentation_options.js?v=d2885b0a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4755f45a"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Django 4.1.13 リリースノート" href="4.1.13.html" />
    <link rel="prev" title="Django 4.2.1 リリースノート" href="4.2.1.html" />



 
<script src="../templatebuiltins.js"></script>
<script>
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../ref/templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);</script>

  </head><body>

    <div class="document">
  <div id="custom-doc" class="yui-t6">
    <div id="hd">
      <h1><a href="../index.html">Django 5.1.6.dev20250122212402 ドキュメント</a></h1>
      <div id="global-nav">
        <a title="Home page" href="../index.html">Home</a>  |
        <a title="Table of contents" href="../contents.html">Table of contents</a>  |
        <a title="Global index" href="../genindex.html">Index</a>  |
        <a title="Module index" href="../py-modindex.html">Modules</a>
      </div>
      <div class="nav">
    &laquo; <a href="4.2.1.html" title="Django 4.2.1 リリースノート">previous</a>
     |
    <a href="index.html" title="リリースノート" accesskey="U">up</a>
   |
    <a href="4.1.13.html" title="Django 4.1.13 リリースノート">next</a> &raquo;</div>
    </div>

    <div id="bd">
      <div id="yui-main">
        <div class="yui-b">
          <div class="yui-g" id="releases-4.2">
            
  <section id="s-django-4-2-release-notes">
<span id="django-4-2-release-notes"></span><h1>Django 4.2 リリースノート<a class="headerlink" href="#django-4-2-release-notes" title="Link to this heading">¶</a></h1>
<p><em>2023年4月3日</em></p>
<p>Django 4.2 へようこそ！</p>
<p>このリリースノートでは、 <a class="reference internal" href="#whats-new-4-2"><span class="std std-ref">バージョン 4.2 の新機能</span></a> と、Django 4.1 以前からアップグレードする際に注意すべき、 <a class="reference internal" href="#backwards-incompatible-4-2"><span class="std std-ref">後方互換性のない変更</span></a> について説明します。また、 <a class="reference internal" href="#deprecated-features-4-2"><span class="std std-ref">一部の機能を非推奨</span></a> としました。</p>
<p>既存のプロジェクトをアップデートするときは、 <a class="reference internal" href="../howto/upgrade-version.html"><span class="doc">Django の新しいバージョンへの更新</span></a> ガイドに従ってください。</p>
<p>Django 4.2 は、<a class="reference internal" href="../internals/release-process.html#term-Long-term-support-release"><span class="xref std std-term">長期サポートリリース</span></a> として指定されています。リリースから最低3年間はセキュリティアップデートを受けます。以前の LTS および Django 3.2 に対するサポートは2024年4月に終了します。</p>
<section id="s-python-compatibility">
<span id="python-compatibility"></span><h2>Python バージョン間の互換性<a class="headerlink" href="#python-compatibility" title="Link to this heading">¶</a></h2>
<p>Django 4.2 は、Python 3.8、3.9、3.10、3.11、および 3.12 (4.2.8 時点) をサポートしています。各シリーズの最新リリースのみが <strong>強く推奨され</strong> 、公式にサポートされています。</p>
</section>
<section id="s-what-s-new-in-django-4-2">
<span id="s-whats-new-4-2"></span><span id="what-s-new-in-django-4-2"></span><span id="whats-new-4-2"></span><h2>Django 4.2 の新機能<a class="headerlink" href="#what-s-new-in-django-4-2" title="Link to this heading">¶</a></h2>
<section id="s-psycopg-3-support">
<span id="psycopg-3-support"></span><h3>Psycopg 3 のサポート<a class="headerlink" href="#psycopg-3-support" title="Link to this heading">¶</a></h3>
<p>Django は <a class="reference external" href="https://www.psycopg.org/psycopg3/">psycopg</a> バージョン 3.1.8 以降をサポートするようになりました。コードを更新するには、 <a class="extlink-pypi reference external" href="https://pypi.org/project/psycopg/">psycopg ライブラリ</a> をインストールしてください。 <code class="docutils literal notranslate"><span class="pre">django.db.backends.postgresql</span></code> は両方のライブラリをサポートしているので、 <a class="reference internal" href="../ref/settings.html#std-setting-DATABASE-ENGINE"><code class="xref std std-setting docutils literal notranslate"><span class="pre">ENGINE</span></code></a> を変更する必要はありません。</p>
<p><code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> のサポートは、将来のある時点で非推奨となり削除される可能性があります。</p>
<p><code class="docutils literal notranslate"><span class="pre">psycopg</span></code> 3 は <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code> と比較して、いくつかの変更点があることに注意してください。結果として、<a class="reference external" href="https://www.psycopg.org/psycopg3/docs/basic/from_pg2.html">psycopg2</a> との違いを考慮した変更が必要になるかもしれません。</p>
</section>
<section id="s-comments-on-columns-and-tables">
<span id="comments-on-columns-and-tables"></span><h3>カラムとテーブルにおけるコメント<a class="headerlink" href="#comments-on-columns-and-tables" title="Link to this heading">¶</a></h3>
<p>新しい <a class="reference internal" href="../ref/models/fields.html#django.db.models.Field.db_comment" title="django.db.models.Field.db_comment"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Field.db_comment</span></code></a> と <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.db_table_comment" title="django.db.models.Options.db_table_comment"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.db_table_comment</span></code></a> オプションは、それぞれカラムとテーブルにコメントを作成できるようにします。例えば:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Question</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Poll question&quot;</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span>
        <span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Date and time when the question was published&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table_comment</span> <span class="o">=</span> <span class="s2">&quot;Poll questions&quot;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Answer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">question</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">Question</span><span class="p">,</span>
        <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">,</span>
        <span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Reference to a question&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">db_comment</span><span class="o">=</span><span class="s2">&quot;Question answer&quot;</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table_comment</span> <span class="o">=</span> <span class="s2">&quot;Question answers&quot;</span>
</pre></div>
</div>
<p>また、新しい <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.AlterModelTableComment" title="django.db.migrations.operations.AlterModelTableComment"><code class="xref py py-class docutils literal notranslate"><span class="pre">AlterModelTableComment</span></code></a> オペレーションにより、 <a class="reference internal" href="../ref/models/options.html#django.db.models.Options.db_table_comment" title="django.db.models.Options.db_table_comment"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Meta.db_table_comment</span></code></a> で定義されたテーブルコメントを変更できるようになりました。</p>
</section>
<section id="s-mitigation-for-the-breach-attack">
<span id="mitigation-for-the-breach-attack"></span><h3>BREACH 攻撃に対する緩和策<a class="headerlink" href="#mitigation-for-the-breach-attack" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="../ref/middleware.html#django.middleware.gzip.GZipMiddleware" title="django.middleware.gzip.GZipMiddleware"><code class="xref py py-class docutils literal notranslate"><span class="pre">GZipMiddleware</span></code></a> に BREACH 攻撃の緩和機能が追加されました。BREACH 攻撃をより困難にするために、gzip レスポンスに最大 100 バイトのランダムバイトを追加します。この緩和手法については <a class="reference external" href="https://ieeexplore.ieee.org/document/9754554">Heal The Breach (HTB) paper</a> を参照してください。</p>
</section>
<section id="s-in-memory-file-storage">
<span id="in-memory-file-storage"></span><h3>インメモリファイルストレージ<a class="headerlink" href="#in-memory-file-storage" title="Link to this heading">¶</a></h3>
<p>新しい <a class="reference internal" href="../ref/files/storage.html#django.core.files.storage.InMemoryStorage" title="django.core.files.storage.InMemoryStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">django.core.files.storage.InMemoryStorage</span></code></a> クラスは、ディスクアクセスを回避してテストを高速化するのに便利な非永続的なストレージを提供します。</p>
</section>
<section id="s-custom-file-storages">
<span id="custom-file-storages"></span><h3>カスタムファイルストレージ<a class="headerlink" href="#custom-file-storages" title="Link to this heading">¶</a></h3>
<p>新しい <a class="reference internal" href="../ref/settings.html#std-setting-STORAGES"><code class="xref std std-setting docutils literal notranslate"><span class="pre">STORAGES</span></code></a> 設定では、複数のカスタムファイルストレージバックエンドを設定できます。また、 <a class="reference internal" href="../topics/files.html"><span class="doc">ファイル</span></a> (<code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code> キー) と <a class="reference internal" href="../ref/contrib/staticfiles.html"><span class="doc">静的ファイル</span></a> (<code class="docutils literal notranslate"><span class="pre">&quot;staticfiles&quot;</span></code> キー) を管理するためのストレージエンジンを制御します。</p>
<p>古い <code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> と <code class="docutils literal notranslate"><span class="pre">STATICFILES_STORAGE</span></code> の設定はこのリリースで非推奨になりました。</p>
</section>
<section id="s-minor-features">
<span id="minor-features"></span><h3>マイナーな機能<a class="headerlink" href="#minor-features" title="Link to this heading">¶</a></h3>
<section id="s-django-contrib-admin">
<span id="django-contrib-admin"></span><h4><a class="reference internal" href="../ref/contrib/admin/index.html#module-django.contrib.admin" title="django.contrib.admin: Django's admin site."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a><a class="headerlink" href="#django-contrib-admin" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>admin 画面のカラーテーマのライト／ダークは、システム設定に従うだけでなく、UIでも切り替えられるようになりました。</p></li>
<li><p>管理者のフォントスタックがシステムUIフォントを優先するようになり、フォントのダウンロードが不要になりました。さらに、CSS変数が利用可能になり、デフォルトのフォントファミリーをより簡単に上書きできるようになりました。</p></li>
<li><p><a class="extlink-source reference external" href="https://github.com/django/django/blob/main/django/contrib/admin/templates/admin/delete_confirmation.html">admin/delete_confirmation.html</a> テンプレートに、カスタマイズを容易にするためのブロックとスクリプトフックが追加されました。</p></li>
<li><p><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.filter_horizontal" title="django.contrib.admin.ModelAdmin.filter_horizontal"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_horizontal</span></code></a> と <a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.filter_vertical" title="django.contrib.admin.ModelAdmin.filter_vertical"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filter_vertical</span></code></a> ウィジェットの選択オプションがフィルタ可能になりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">admin/base.html</span></code> テンプレートに新しいブロック <code class="docutils literal notranslate"><span class="pre">nav-breadcrumbs</span></code> が追加され、ナビゲーションランドマークと <code class="docutils literal notranslate"><span class="pre">breadcrumbs</span></code> ブロックが含まれるようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.list_editable" title="django.contrib.admin.ModelAdmin.list_editable"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ModelAdmin.list_editable</span></code></a> が編集時にアトミックトランザクションを使用するようになりました。</p></li>
<li><p>jQuery のバージョンが 3.6.0 から 3.6.4 にアップグレードされました。</p></li>
</ul>
</section>
<section id="s-django-contrib-auth">
<span id="django-contrib-auth"></span><h4><a class="reference internal" href="../topics/auth/index.html#module-django.contrib.auth" title="django.contrib.auth: Django's authentication framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a><a class="headerlink" href="#django-contrib-auth" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>PBKDF2パスワードハッシャーのデフォルトの繰り返し回数が390,000から600,000に増加しました。</p></li>
<li><p><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.UserCreationForm" title="django.contrib.auth.forms.UserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserCreationForm</span></code></a> がカスタムユーザーモデルの多対多のフォームフィールドを保存するようになりました。</p></li>
<li><p>新しい <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.BaseUserCreationForm" title="django.contrib.auth.forms.BaseUserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseUserCreationForm</span></code></a> がユーザ作成フォームをカスタマイズするための推奨基本クラスになりました。</p></li>
</ul>
</section>
<section id="s-django-contrib-gis">
<span id="django-contrib-gis"></span><h4><a class="reference internal" href="../ref/contrib/gis/index.html#module-django.contrib.gis" title="django.contrib.gis: Geographic Information System (GIS) extensions for Django"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a><a class="headerlink" href="#django-contrib-gis" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../ref/contrib/gis/serializers.html"><span class="doc">GeoJSON シリアライザ</span></a> は、シリアライズされたフィーチャの <code class="docutils literal notranslate"><span class="pre">id</span></code> キーを出力するようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/contrib/gis/gdal.html#django.contrib.gis.gdal.GDALRaster" title="django.contrib.gis.gdal.GDALRaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">GDALRaster</span></code></a> クラスが <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> をサポートするようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/contrib/gis/geoip2.html#django.contrib.gis.geoip2.GeoIP2" title="django.contrib.gis.geoip2.GeoIP2"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoIP2</span></code></a> クラスが DB-IP からダウンロードした <code class="docutils literal notranslate"><span class="pre">.mmdb</span></code> ファイルをサポートするようになりました。</p></li>
<li><p>OpenLayers テンプレートウィジェットにはインライン CSS が含まれなくなりました（以前の <code class="docutils literal notranslate"><span class="pre">map_css</span></code> ブロックも削除されました）。これは、厳格なコンテンツセキュリティポリシーに準拠するためです。</p></li>
<li><p><a class="reference internal" href="../ref/contrib/gis/forms-api.html#django.contrib.gis.forms.widgets.OpenLayersWidget" title="django.contrib.gis.forms.widgets.OpenLayersWidget"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpenLayersWidget</span></code></a> は、以前の OpenLayers 4.6.5 から OpenLayers 7.2.2 に基づくようになりました。</p></li>
<li><p>新しい <a class="reference internal" href="../ref/contrib/gis/geoquerysets.html#std-fieldlookup-isempty"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">isempty</span></code></a> ルックアップと <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.IsEmpty" title="django.contrib.gis.db.models.functions.IsEmpty"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsEmpty()</span></code></a> 式により、PostGIS上で空のジオメトリをフィルタリングできるようになりました。</p></li>
<li><p>新しい <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.FromWKB" title="django.contrib.gis.db.models.functions.FromWKB"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromWKB()</span></code></a> および <a class="reference internal" href="../ref/contrib/gis/functions.html#django.contrib.gis.db.models.functions.FromWKT" title="django.contrib.gis.db.models.functions.FromWKT"><code class="xref py py-class docutils literal notranslate"><span class="pre">FromWKT()</span></code></a> 関数により、Well-known binary（WKB）および Well-known text（WKT）表現からジオメトリを作成できるようになりました。</p></li>
</ul>
</section>
<section id="s-django-contrib-postgres">
<span id="django-contrib-postgres"></span><h4><a class="reference internal" href="../ref/contrib/postgres/index.html#module-django.contrib.postgres" title="django.contrib.postgres: PostgreSQL-specific fields and features"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a><a class="headerlink" href="#django-contrib-postgres" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>新しい <a class="reference internal" href="../ref/contrib/postgres/lookups.html#std-fieldlookup-trigram_strict_word_similar"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">trigram_strict_word_similar</span></code></a> ルックアップと、<a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.TrigramStrictWordSimilarity" title="django.contrib.postgres.search.TrigramStrictWordSimilarity"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrigramStrictWordSimilarity()</span></code></a> および <a class="reference internal" href="../ref/contrib/postgres/search.html#django.contrib.postgres.search.TrigramStrictWordDistance" title="django.contrib.postgres.search.TrigramStrictWordDistance"><code class="xref py py-class docutils literal notranslate"><span class="pre">TrigramStrictWordDistance()</span></code></a> 式により、trigram (トリグラム) の厳密な単語類似性を使用できるようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/contrib/postgres/fields.html#std-fieldlookup-arrayfield.overlap"><code class="xref std std-lookup docutils literal notranslate"><span class="pre">arrayfield.overlap</span></code></a> ルックアップは、右辺として <code class="docutils literal notranslate"><span class="pre">QuerySet.values()</span></code> および <code class="docutils literal notranslate"><span class="pre">values_list()</span></code> をサポートするようになりました。</p></li>
</ul>
</section>
<section id="s-django-contrib-sitemaps">
<span id="django-contrib-sitemaps"></span><h4><a class="reference internal" href="../ref/contrib/sitemaps.html#module-django.contrib.sitemaps" title="django.contrib.sitemaps: A framework for generating Google sitemap XML files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a><a class="headerlink" href="#django-contrib-sitemaps" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>新しい <a class="reference internal" href="../ref/contrib/sitemaps.html#django.contrib.sitemaps.Sitemap.get_languages_for_item" title="django.contrib.sitemaps.Sitemap.get_languages_for_item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Sitemap.get_languages_for_item()</span></code></a> メソッドにより、アイテムが表示される言語のリストをカスタマイズできるようになりました。</p></li>
</ul>
</section>
<section id="s-django-contrib-staticfiles">
<span id="django-contrib-staticfiles"></span><h4><a class="reference internal" href="../ref/contrib/staticfiles.html#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a><a class="headerlink" href="#django-contrib-staticfiles" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code></a> は、<code class="docutils literal notranslate"><span class="pre">import</span></code> および <code class="docutils literal notranslate"><span class="pre">export</span></code> 文内のJavaScriptモジュールへのパスを、それらがハッシュ化されたものに置き換える実験的なサポートを提供するようになりました。これを試したい場合は、<code class="docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage</span></code> をサブクラス化し、<code class="docutils literal notranslate"><span class="pre">support_js_module_import_aggregation</span></code> 属性を <code class="docutils literal notranslate"><span class="pre">True</span></code> に設定してください。</p></li>
<li><p>新しい <a class="reference internal" href="../ref/contrib/staticfiles.html#django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_hash" title="django.contrib.staticfiles.storage.ManifestStaticFilesStorage.manifest_hash"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ManifestStaticFilesStorage.manifest_hash</span></code></a> 属性は、マニフェスト内のすべてのファイルに対するハッシュを提供し、ファイルのいずれかが変更されるたびに変更されます。</p></li>
</ul>
</section>
<section id="s-database-backends">
<span id="database-backends"></span><h4>データベースバックエンド<a class="headerlink" href="#database-backends" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>新しい <code class="docutils literal notranslate"><span class="pre">&quot;assume_role&quot;</span></code> オプションが PostgreSQL の <a class="reference internal" href="../ref/settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> でサポートされるようになり、<a class="reference internal" href="../ref/databases.html#database-role"><span class="std std-ref">セッションロール</span></a> を指定できるようになりました。</p></li>
<li><p>新しい <code class="docutils literal notranslate"><span class="pre">&quot;server_side_binding&quot;</span></code> オプションが PostgreSQL の <a class="reference internal" href="../ref/settings.html#std-setting-OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">OPTIONS</span></code></a> で <code class="docutils literal notranslate"><span class="pre">psycopg</span></code> 3.1.8+ と共にサポートされるようになり、<a class="reference internal" href="../ref/databases.html#database-server-side-parameters-binding"><span class="std std-ref">サーバーサイドバインディングカーソル</span></a> が使用できるようになりました。</p></li>
</ul>
</section>
<section id="s-error-reporting">
<span id="error-reporting"></span><h4>エラー報告<a class="headerlink" href="#error-reporting" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>デバッグページでは、Python 3.11以降で <span class="target" id="index-8"></span><a class="pep reference external" href="https://peps.python.org/pep-0678/"><strong>例外のノート</strong></a> と <span class="target" id="index-9"></span><a class="pep reference external" href="https://peps.python.org/pep-0657/"><strong>詳細なエラー位置</strong></a> を表示するようになりました。</p></li>
<li><p>セッションクッキーは認証情報として扱われ、エラーレポートでは非表示になり、アスタリスク (<code class="docutils literal notranslate"><span class="pre">**********</span></code>) で置き換えられるようになりました。</p></li>
</ul>
</section>
<section id="s-forms">
<span id="forms"></span><h4>フォーム<a class="headerlink" href="#forms" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelForm</span></code></a> は、フォームフィールドをカスタマイズするための新しい <code class="docutils literal notranslate"><span class="pre">Meta</span></code> オプション <code class="docutils literal notranslate"><span class="pre">formfield_callback</span></code> を受け入れるようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/forms/models.html#django.forms.models.modelform_factory" title="django.forms.models.modelform_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">modelform_factory()</span></code></a> は、<code class="docutils literal notranslate"><span class="pre">form</span></code> の <code class="docutils literal notranslate"><span class="pre">Meta</span></code> の <code class="docutils literal notranslate"><span class="pre">formfield_callback</span></code> 属性を尊重するようになりました。</p></li>
</ul>
</section>
<section id="s-internationalization">
<span id="internationalization"></span><h4>国際化 (internationalization)<a class="headerlink" href="#internationalization" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>中央クルド語（ソラニー）のサポートと翻訳を追加しました。</p></li>
</ul>
</section>
<section id="s-logging">
<span id="logging"></span><h4>ロギング<a class="headerlink" href="#logging" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../ref/logging.html#django-db-logger"><span class="std std-ref">django.db.backends</span></a> ロガーは、トランザクション管理クエリ（<code class="docutils literal notranslate"><span class="pre">BEGIN</span></code>、<code class="docutils literal notranslate"><span class="pre">COMMIT</span></code>、および <code class="docutils literal notranslate"><span class="pre">ROLLBACK</span></code>）を <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> レベルでログに記録するようになりました。</p></li>
</ul>
</section>
<section id="s-management-commands">
<span id="management-commands"></span><h4>管理コマンド<a class="headerlink" href="#management-commands" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemessages</span></code></a> コマンドは、<code class="docutils literal notranslate"><span class="pre">nl_NL-x-informal</span></code> のようなプライベートサブタグを含むロケールをサポートするようになりました。</p></li>
<li><p>新しい <a class="reference internal" href="../ref/django-admin.html#cmdoption-makemigrations-update"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--update</span></code></a> オプションは、モデルの変更を最新のマイグレーションにマージし、結果として得られる操作を最適化します。</p></li>
</ul>
</section>
<section id="s-migrations">
<span id="migrations"></span><h4>マイグレーション<a class="headerlink" href="#migrations" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>マイグレーションは、<code class="docutils literal notranslate"><span class="pre">enum.Flag</span></code> オブジェクトのシリアライズをサポートするようになりました。</p></li>
</ul>
</section>
<section id="s-models">
<span id="models"></span><h4>モデル<a class="headerlink" href="#models" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">QuerySet</span></code> は、集計を実行する際のウィンドウ関数に対する非結合フィルタールックアップを除き、<a class="reference internal" href="../ref/models/database-functions.html#window-functions"><span class="std std-ref">ウィンドウ関数</span></a> に対するフィルタリングを広範囲にサポートするようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.prefetch_related" title="django.db.models.query.QuerySet.prefetch_related"><code class="xref py py-meth docutils literal notranslate"><span class="pre">prefetch_related()</span></code></a> は、スライスされたクエリセットを持つ <a class="reference internal" href="../ref/models/querysets.html#django.db.models.Prefetch" title="django.db.models.Prefetch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prefetch</span></code></a> オブジェクトをサポートするようになりました。</p></li>
<li><p><a class="reference internal" href="../ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><code class="xref py py-class docutils literal notranslate"><span class="pre">Field</span></code></a> インスタンスに対する <a class="reference internal" href="../ref/models/lookups.html#lookup-registration-api"><span class="std std-ref">ルックアップの登録</span></a> がサポートされるようになりました。</p></li>
<li><p>新しい <code class="docutils literal notranslate"><span class="pre">robust</span></code> 引数を <a class="reference internal" href="../topics/db/transactions.html#django.db.transaction.on_commit" title="django.db.transaction.on_commit"><code class="xref py py-func docutils literal notranslate"><span class="pre">on_commit()</span></code></a> に指定することで、データベーストランザクションが成功した後に失敗する可能性のあるアクションを実行できるようになりました。</p></li>
<li><p>新しい <a class="reference internal" href="../topics/db/queries.html#django.db.models.fields.json.KT" title="django.db.models.fields.json.KT"><code class="xref py py-class docutils literal notranslate"><span class="pre">KT()</span> <span class="pre">式</span></code></a> は、<a class="reference internal" href="../ref/models/fields.html#django.db.models.JSONField" title="django.db.models.JSONField"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONField</span></code></a> のキー、インデックス、またはパス・トランスフォームのテキスト値を表します。</p></li>
<li><p><a class="reference internal" href="../ref/models/database-functions.html#django.db.models.functions.Now" title="django.db.models.functions.Now"><code class="xref py py-class docutils literal notranslate"><span class="pre">Now</span></code></a> は、MySQL上でマイクロ秒の精度、SQLite上でミリ秒の精度をサポートするようになりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BooleanField</span></code> を出力する <a class="reference internal" href="../ref/models/expressions.html#django.db.models.F" title="django.db.models.F"><code class="xref py py-class docutils literal notranslate"><span class="pre">F()</span> <span class="pre">式</span></code></a> は、<code class="docutils literal notranslate"><span class="pre">~F()</span></code> (反転演算子) を使用して否定できるようになりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Model</span></code> は、データベースを使用するいくつかのメソッドの非同期バージョンを <code class="docutils literal notranslate"><span class="pre">a</span></code> プレフィックスを使用して提供するようになりました: <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.adelete" title="django.db.models.Model.adelete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">adelete()</span></code></a>、<a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.arefresh_from_db" title="django.db.models.Model.arefresh_from_db"><code class="xref py py-meth docutils literal notranslate"><span class="pre">arefresh_from_db()</span></code></a>、および <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.asave" title="django.db.models.Model.asave"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asave()</span></code></a>。</p></li>
<li><p>関係マネージャは、リレーション先オブジェクトのセットを変更するメソッドの非同期バージョンを <code class="docutils literal notranslate"><span class="pre">a</span></code> プレフィックスを使用して提供するようになりました： <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aadd" title="django.db.models.fields.related.RelatedManager.aadd"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aadd()</span></code></a>、<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aclear" title="django.db.models.fields.related.RelatedManager.aclear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclear()</span></code></a>、<a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aremove" title="django.db.models.fields.related.RelatedManager.aremove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aremove()</span></code></a>、および <a class="reference internal" href="../ref/models/relations.html#django.db.models.fields.related.RelatedManager.aset" title="django.db.models.fields.related.RelatedManager.aset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aset()</span></code></a>。</p></li>
<li><p>PostgreSQLでは無制限の <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code> カラムをサポートしているため、<a class="reference internal" href="../ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CharField.max_length</span></code></a> を設定する必要がなくなりました。</p></li>
</ul>
</section>
<section id="s-requests-and-responses">
<span id="requests-and-responses"></span><h4>Request と Response<a class="headerlink" href="#requests-and-responses" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>DjangoがASGI経由で提供される場合、<a class="reference internal" href="../ref/request-response.html#django.http.StreamingHttpResponse" title="django.http.StreamingHttpResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamingHttpResponse</span></code></a> は非同期イテレータをサポートするようになりました。</p></li>
</ul>
</section>
<section id="s-tests">
<span id="tests"></span><h4>テスト<a class="headerlink" href="#tests" title="Link to this heading">¶</a></h4>
<ul>
<li><p><a class="reference internal" href="../ref/django-admin.html#cmdoption-test-debug-sql"><code class="xref std std-option docutils literal notranslate"><span class="pre">test</span> <span class="pre">--debug-sql</span></code></a> オプションは、SQLクエリを <code class="docutils literal notranslate"><span class="pre">sqlparse</span></code> でフォーマットするようになりました。</p></li>
<li><p><a class="reference internal" href="../topics/testing/advanced.html#django.test.RequestFactory" title="django.test.RequestFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequestFactory</span></code></a>、<a class="reference internal" href="../topics/testing/advanced.html#django.test.AsyncRequestFactory" title="django.test.AsyncRequestFactory"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncRequestFactory</span></code></a>、<a class="reference internal" href="../topics/testing/tools.html#django.test.Client" title="django.test.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Client</span></code></a>、および <a class="reference internal" href="../topics/testing/tools.html#django.test.AsyncClient" title="django.test.AsyncClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncClient</span></code></a> クラスは、ヘッダー名と値の辞書を受け入れる <code class="docutils literal notranslate"><span class="pre">headers</span></code> パラメータをサポートするようになりました。これにより、ヘッダーを宣言するためのより自然な構文が可能になります。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Before:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">HTTP_ACCEPT_LANGUAGE</span><span class="o">=</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>
<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">ACCEPT_LANGUAGE</span><span class="o">=</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>

<span class="c1"># After:</span>
<span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;accept-language&quot;</span><span class="p">:</span> <span class="s2">&quot;fr&quot;</span><span class="p">})</span>
<span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">async_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;accept-language&quot;</span><span class="p">:</span> <span class="s2">&quot;fr&quot;</span><span class="p">})</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="s-utilities">
<span id="utilities"></span><h4>ユーティリティ<a class="headerlink" href="#utilities" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../ref/utils.html#django.utils.html.json_script" title="django.utils.html.json_script"><code class="xref py py-meth docutils literal notranslate"><span class="pre">django.utils.html.json_script()</span></code></a> 関数の新しい <code class="docutils literal notranslate"><span class="pre">encoder</span></code> パラメータにより、JSONエンコーダークラスをカスタマイズできるようになりました。</p></li>
<li><p>プライベートで内部的に提供される <code class="docutils literal notranslate"><span class="pre">urllib.parse.urlsplit()</span></code> のコピーは、現在 <code class="docutils literal notranslate"><span class="pre">'\r'</span></code>, <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>, および <code class="docutils literal notranslate"><span class="pre">'\t'</span></code> を削除するようになりました (<span class="target" id="index-10"></span><a class="cve reference external" href="https://www.cve.org/CVERecord?id=CVE-2022-0391"><strong>CVE 2022-0391</strong></a> および <a class="extlink-bpo reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43882">bpo-43882</a> を参照)。これは、URLリダイレクトを処理するためのドキュメント化された関数のいずれかを使用する代わりに、内部の <code class="docutils literal notranslate"><span class="pre">url_has_allowed_host_and_scheme()</span></code> 関数を誤って使用している可能性があるプロジェクトを保護するためです。Djangoの関数は影響を受けませんでした。</p></li>
<li><p>新しい <a class="reference internal" href="../ref/utils.html#django.utils.http.content_disposition_header" title="django.utils.http.content_disposition_header"><code class="xref py py-func docutils literal notranslate"><span class="pre">django.utils.http.content_disposition_header()</span></code></a> 関数は、<span class="target" id="index-11"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6266.html"><strong>RFC 6266</strong></a> に指定されているように <code class="docutils literal notranslate"><span class="pre">Content-Disposition</span></code> HTTPヘッダー値を返します。</p></li>
</ul>
</section>
<section id="s-validators">
<span id="validators"></span><h4>バリデータ<a class="headerlink" href="#validators" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CommonPasswordValidator</span></code> によって使用されるよくあるパスワードのリストが、最新バージョンに更新されました。</p></li>
</ul>
</section>
</section>
</section>
<section id="s-backwards-incompatible-changes-in-4-2">
<span id="s-backwards-incompatible-4-2"></span><span id="backwards-incompatible-changes-in-4-2"></span><span id="backwards-incompatible-4-2"></span><h2>4.2 における後方互換性のない変更<a class="headerlink" href="#backwards-incompatible-changes-in-4-2" title="Link to this heading">¶</a></h2>
<section id="s-database-backend-api">
<span id="database-backend-api"></span><h3>データベースバックエンド API<a class="headerlink" href="#database-backend-api" title="Link to this heading">¶</a></h3>
<p>このセクションでは、サードパーティのデータベースバックエンドで必要になる可能性のある変更について説明します。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.allows_group_by_pk</span></code> は削除されました。これは、MySQL 5.7.15で適切な機能依存性の検出によって置き換えられたMySQLの拡張機能に対応するために残されていたものです。<code class="docutils literal notranslate"><span class="pre">DatabaseFeatures.allows_group_by_selected_pks</span></code> はまだサポートされており、バックエンドが <code class="docutils literal notranslate"><span class="pre">SQL:1999</span></code> 標準で指定されているように、<code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 句での機能依存性の検出をサポートしている場合は有効にするべきです。</p></li>
<li><p><a class="reference internal" href="../ref/django-admin.html#django-admin-inspectdb"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">inspectdb</span></code></a> は、<code class="docutils literal notranslate"><span class="pre">CharField</span></code> に対して <code class="docutils literal notranslate"><span class="pre">internal_size</span></code> の代わりに <code class="docutils literal notranslate"><span class="pre">DatabaseIntrospection.get_table_description()</span></code> からの <code class="docutils literal notranslate"><span class="pre">display_size</span></code> を使用するようになりました。</p></li>
</ul>
</section>
<section id="s-dropped-support-for-mariadb-10-3">
<span id="dropped-support-for-mariadb-10-3"></span><h3>MariaDB 10.3 のサポートを終了しました<a class="headerlink" href="#dropped-support-for-mariadb-10-3" title="Link to this heading">¶</a></h3>
<p>MariaDB 10.3のアップストリームサポートは2023年5月に終了します。Django 4.2はMariaDB 10.4以降をサポートしています。</p>
</section>
<section id="s-dropped-support-for-mysql-5-7">
<span id="dropped-support-for-mysql-5-7"></span><h3>MySQL 5.7 のサポートを終了しました<a class="headerlink" href="#dropped-support-for-mysql-5-7" title="Link to this heading">¶</a></h3>
<p>MySQL 5.7 のアップストリームサポートは 2023年10月に終了します。 Django 4.2 は MySQL 8 以降をサポートします。</p>
</section>
<section id="s-dropped-support-for-postgresql-11">
<span id="dropped-support-for-postgresql-11"></span><h3>PostgreSQL 11 のサポートを終了しました<a class="headerlink" href="#dropped-support-for-postgresql-11" title="Link to this heading">¶</a></h3>
<p>PostgreSQL 11 のアップストリーム サポートは 2023 年 11 月に終了します。Django 4.2 は PostgreSQL 12 以降をサポートします。</p>
</section>
<section id="s-setting-update-fields-in-model-save-may-now-be-required">
<span id="setting-update-fields-in-model-save-may-now-be-required"></span><h3><code class="docutils literal notranslate"><span class="pre">Model.save()</span></code> で <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> の設定が必要になる場合があります<a class="headerlink" href="#setting-update-fields-in-model-save-may-now-be-required" title="Link to this heading">¶</a></h3>
<p>不要なカラムを更新するのを避けるために、 <a class="reference internal" href="../ref/models/querysets.html#django.db.models.query.QuerySet.update_or_create" title="django.db.models.query.QuerySet.update_or_create"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QuerySet.update_or_create()</span></code></a> は現在、 <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> を <a class="reference internal" href="../ref/models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.save()</span></code></a> の呼び出しに渡します。その結果、カスタム <code class="docutils literal notranslate"><span class="pre">save()</span></code> メソッドで変更されたフィールドは、 <code class="docutils literal notranslate"><span class="pre">super()</span></code> を呼び出す前に <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> キーワード引数に追加されるべきです。詳細については <a class="reference internal" href="../topics/db/models.html#overriding-model-methods"><span class="std std-ref">定義済みのモデルメソッドをオーバーライドする</span></a> を参照してください。</p>
</section>
<section id="s-dropped-support-for-raw-aggregations-on-mysql">
<span id="dropped-support-for-raw-aggregations-on-mysql"></span><h3>MySQL での生の集計処理のサポートを廃止<a class="headerlink" href="#dropped-support-for-raw-aggregations-on-mysql" title="Link to this heading">¶</a></h3>
<p>MySQL 8 以降では、<code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 列に対する機能依存を許可しているため、メインテーブルのプライマリキーによるグルーピングというDjango 4.2 以前の回避策は削除されました。結果として、<code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> 句でそのような集計が必要であるか、または有効であるかを判断する方法がないため、MySQL での <code class="docutils literal notranslate"><span class="pre">RawSQL()</span></code> 集計の使用はもはやサポートされていません。代わりに <a class="reference internal" href="../ref/models/querysets.html#aggregation-functions"><span class="std std-ref">集計（Aggregation）関数</span></a> を使用してください。</p>
</section>
<section id="s-miscellaneous">
<span id="miscellaneous"></span><h3>その他<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>ドキュメント化されていない <code class="docutils literal notranslate"><span class="pre">django.http.multipartparser.parse_header()</span></code> 関数は削除されました。代わりに <code class="docutils literal notranslate"><span class="pre">django.utils.http.parse_header_parameters()</span></code> を使用してください。</p></li>
<li><p><a class="reference internal" href="../topics/i18n/translation.html#std-templatetag-blocktranslate"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">blocktranslate</span> <span class="pre">asvar</span> <span class="pre">…</span> <span class="pre">%}</span></code></a> の結果は 、(HTML) 出力用途で安全とマークされるようになりました。</p></li>
<li><p>admin の検索ボックスで <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> HTML 属性が削除されました。これはスクリーンリーダーにとって混乱を招く可能性があるためです。</p></li>
<li><p><a class="reference internal" href="../ref/django-admin.html#cmdoption-makemigrations-check"><code class="xref std std-option docutils literal notranslate"><span class="pre">makemigrations</span> <span class="pre">--check</span></code></a> オプションは欠損したマイグレーションファイルを作成しなくなりました。</p></li>
<li><p><a class="reference internal" href="../ref/models/expressions.html#django.db.models.Expression.get_group_by_cols" title="django.db.models.Expression.get_group_by_cols"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expression.get_group_by_cols()</span></code></a> の <code class="docutils literal notranslate"><span class="pre">alias</span></code> 引数が削除されました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqlparse</span></code> の最小サポートバージョンが 0.2.2 から 0.3.1 に引き上げられました。</p></li>
<li><p><a class="reference internal" href="../ref/models/expressions.html#django.db.models.Exists" title="django.db.models.Exists"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exists</span></code></a> 式のドキュメント化されていなかった <code class="docutils literal notranslate"><span class="pre">negated</span></code> パラメータが削除されました。</p></li>
<li><p>ドキュメント化されていない <code class="docutils literal notranslate"><span class="pre">Query.add_annotation()</span></code> メソッドの <code class="docutils literal notranslate"><span class="pre">is_summary</span></code> 引数が削除されました。</p></li>
<li><p>SQLite のサポート最小バージョンが 3.9.0 から 3.21.0 に引き上げられました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asgiref</span></code> のサポートされている最低バージョンが 3.5.2 から 3.6.0 に引き上げられました。</p></li>
<li><p><a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.UserCreationForm" title="django.contrib.auth.forms.UserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserCreationForm</span></code></a> は、大文字と小文字の違いしかないユーザーネームを拒否するようになりました。以前の動作が必要な場合は、代わりに <a class="reference internal" href="../topics/auth/default.html#django.contrib.auth.forms.BaseUserCreationForm" title="django.contrib.auth.forms.BaseUserCreationForm"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseUserCreationForm</span></code></a> を使用してください。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mysqlclient</span></code> の最小サポートバージョンが 1.4.0 から 1.4.3 に引き上げられました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">argon2-cffi</span></code> の最小サポートバージョンが 19.1.0 から 19.2.0 に引き上げられました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Pillow</span></code> の最小サポートバージョンが 6.2.0 から 6.2.1 に引き上げられました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jinja2</span></code> の最小サポートバージョンが 2.9.2 から 2.11.0 に引き上げられました。</p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/redis/">redis-py</a> の最低サポートバージョンが 3.0.0 から 3.4.0 に引き上げられました。</p></li>
<li><p>手動でインスタンス化された <code class="docutils literal notranslate"><span class="pre">WSGIRequest</span></code> オブジェクトには、<code class="docutils literal notranslate"><span class="pre">wsgi.input</span></code> のためのファイルライクオブジェクトを提供する必要があります。以前、DjangoはWSGI仕様で想定される挙動よりも寛容でした。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROJ</span></code> &lt; 5 のサポートが削除されました。</p></li>
<li><p><a class="reference internal" href="../topics/email.html#django.core.mail.backends.smtp.EmailBackend" title="django.core.mail.backends.smtp.EmailBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmailBackend</span></code></a> は <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.SSLContext.check_hostname" title="(in Python v3.13)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">hostname</span></code></a> と <a class="reference external" href="https://docs.python.org/3/library/ssl.html#ssl.SSLContext.verify_mode" title="(in Python v3.13)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">certificates</span></code></a> を検証するようになりました。より制限の少ない、非推奨の以前の動作が必要な場合は、 <code class="docutils literal notranslate"><span class="pre">EmailBackend</span></code> をサブクラスにして <code class="docutils literal notranslate"><span class="pre">ssl_context</span></code> プロパティをオーバーライドしてください。</p></li>
</ul>
</section>
</section>
<section id="s-features-deprecated-in-4-2">
<span id="s-deprecated-features-4-2"></span><span id="features-deprecated-in-4-2"></span><span id="deprecated-features-4-2"></span><h2>4.2 で非推奨となった機能<a class="headerlink" href="#features-deprecated-in-4-2" title="Link to this heading">¶</a></h2>
<section id="s-index-together-option-is-deprecated-in-favor-of-indexes">
<span id="index-together-option-is-deprecated-in-favor-of-indexes"></span><h3><code class="docutils literal notranslate"><span class="pre">index_together</span></code> オプションは <code class="docutils literal notranslate"><span class="pre">indexes</span></code> を優先するため非推奨になりました。<a class="headerlink" href="#index-together-option-is-deprecated-in-favor-of-indexes" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Meta.index_together</span></code> option is deprecated in favor of the
<a class="reference internal" href="../ref/models/options.html#django.db.models.Options.indexes" title="django.db.models.Options.indexes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indexes</span></code></a> option.</p>
<p>既存の <code class="docutils literal notranslate"><span class="pre">index_together</span></code> のマイグレーションはマイグレーションとして扱うべきです。例えば:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">index_together</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">]]</span>
</pre></div>
</div>
<p>これは以下のようにすべきです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Author</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

    <span class="k">class</span><span class="w"> </span><span class="nc">Meta</span><span class="p">:</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rank&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">])]</span>
</pre></div>
</div>
<p><a class="reference internal" href="../ref/django-admin.html#django-admin-makemigrations"><code class="xref std std-djadmin docutils literal notranslate"><span class="pre">makemigrations</span></code></a> コマンドを実行すると、既存のインデックスをリネームする <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RenameIndex" title="django.db.migrations.operations.RenameIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RenameIndex</span></code></a> 操作が含まれるマイグレーションが生成されます。次に、履歴マイグレーションから <code class="docutils literal notranslate"><span class="pre">index_together</span></code> を削除するために、マイグレーションをスカッシュすることを検討してください。</p>
<p><code class="docutils literal notranslate"><span class="pre">AlterIndexTogether</span></code> マイグレーションオペレーションは、現在公式には Django 4.2 より前のマイグレーションファイルのためにのみサポートされています。後方互換性の理由から、まだ公開 API の一部であり、非推奨化または削除する計画はありませんが、新しいマイグレーションでの使用は避けるべきです。代わりに <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.AddIndex" title="django.db.migrations.operations.AddIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddIndex</span></code></a> と <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RemoveIndex" title="django.db.migrations.operations.RemoveIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveIndex</span></code></a> オペレーションを使用してください。</p>
</section>
<section id="s-passing-encoded-json-string-literals-to-jsonfield-is-deprecated">
<span id="passing-encoded-json-string-literals-to-jsonfield-is-deprecated"></span><h3><code class="docutils literal notranslate"><span class="pre">JSONField</span></code> に、エンコードされた JSON 文字列リテラルを渡すことは非推奨になりました<a class="headerlink" href="#passing-encoded-json-string-literals-to-jsonfield-is-deprecated" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">JSONField</span></code> とそれに関連するルックアップや集計は JSON エンコード済みの文字列リテラルを渡すことを許可していましたが、これは文字列リテラルがデータベースバックエンドの観点から既にエンコードされているかどうかについての曖昧さを引き起こしていました。</p>
<p>非推奨期間中、文字列リテラルは JSON デコードされようと試みられ、成功した場合には非エンコード形式を渡すよう指摘する警告が発せられます。</p>
<p>JSONエンコードされた文字列リテラルを渡すために使われていたコード:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s2">&quot;null&quot;</span><span class="p">)),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s1">&#39;&quot;foo-bar&quot;&#39;</span><span class="p">)),</span>
<span class="p">)</span>
<span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">JSONBAgg</span><span class="p">(</span><span class="s2">&quot;field&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>これは以下のようにすべきです:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">bulk_create</span><span class="p">(</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">JSONField</span><span class="p">())),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[]),</span>
    <span class="n">Document</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s2">&quot;foo-bar&quot;</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">Document</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">JSONBAgg</span><span class="p">(</span><span class="s2">&quot;field&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="p">[]),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Django 5.1 以降、文字列リテラルは JSON 文字列リテラルとして暗黙的に解釈されるようになります。</p>
</section>
<section id="s-id1">
<span id="id1"></span><h3>その他<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">BaseUserManager.make_random_password()</span></code> メソッドは非推奨です。パスワードを生成するために Python の <a class="reference external" href="https://docs.python.org/3/library/secrets.html#module-secrets" title="(in Python v3.13)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">secrets</span></code></a> モジュールを使用する際のレシピとベストプラクティスについては 、<a class="reference external" href="https://docs.python.org/3/library/secrets.html#recipes-and-best-practices">レシピとベストプラクティス</a> を参照してください。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">length_is</span></code> テンプレートフィルターは、<a class="reference internal" href="../ref/templates/builtins.html#std-templatefilter-length"><code class="xref std std-tfilter docutils literal notranslate"><span class="pre">length</span></code></a> と <code class="docutils literal notranslate"><span class="pre">==</span></code> 演算子を <a class="reference internal" href="../ref/templates/builtins.html#std-templatetag-if"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">%}</span></code></a> タグ内で使用する形式に置き換えられました。例えば</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length</span> <span class="o">==</span> <span class="m">4</span> <span class="cp">%}</span>…<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length</span> <span class="o">==</span> <span class="m">4</span> <span class="cp">%}</span>True<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>False<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>これは以下の表記に代わるものです:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length_is</span><span class="o">:</span><span class="m">4</span> <span class="cp">%}</span>…<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="nv">value</span><span class="o">|</span><span class="nf">length_is</span><span class="o">:</span><span class="m">4</span> <span class="cp">}}</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.SHA1PasswordHasher</span></code>, <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.UnsaltedSHA1PasswordHasher</span></code>, そして <code class="docutils literal notranslate"><span class="pre">django.contrib.auth.hashers.UnsaltedMD5PasswordHasher</span></code> は非推奨になりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CICharField</span></code> は、大文字小文字を区別しない非決定的照合順序 (collation) を使用した <code class="docutils literal notranslate"><span class="pre">CharField(db_collation=&quot;…&quot;)</span></code> に置き換えられ、非推奨となりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CIEmailField</span></code> は、大文字小文字を区別しない非決定的照合順序 (collation) を使用した <code class="docutils literal notranslate"><span class="pre">EmailField(db_collation=&quot;…&quot;)</span></code> に置き換えられ、非推奨となりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CITextField</span></code> は、大文字小文字を区別しない非決定的照合順序 (collation) を使用した <code class="docutils literal notranslate"><span class="pre">TextField(db_collation=&quot;…&quot;)</span></code> に置き換えられ、非推奨になりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.contrib.postgres.fields.CIText</span></code> ミックスインは非推奨になりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BaseGeometryWidget</span></code> の <code class="docutils literal notranslate"><span class="pre">map_height</span></code> 属性と <code class="docutils literal notranslate"><span class="pre">map_width</span></code> 属性は非推奨となりました。代わりに CSS を使用してマップウィジェットのサイズを設定してください。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SimpleTestCase.assertFormsetError()</span></code> は <code class="docutils literal notranslate"><span class="pre">assertFormSetError()</span></code> を用いるため非推奨となりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TransactionTestCase.assertQuerysetEqual()</span></code> は非推奨となり、<code class="docutils literal notranslate"><span class="pre">assertQuerySetEqual()</span></code> が推奨されます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Signer</span></code> および <code class="docutils literal notranslate"><span class="pre">TimestampSigner</span></code> へ位置引数を渡すことは、キーワード専用引数を使用する形式への変更が推奨となり、非推奨となりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DEFAULT_FILE_STORAGE</span></code> 設定は <code class="docutils literal notranslate"><span class="pre">STORAGES[&quot;default&quot;]</span></code> に置き換えられ、非推奨になりました。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STATICFILES_STORAGE</span></code> 設定は非推奨となり、代わりに <code class="docutils literal notranslate"><span class="pre">STORAGES[&quot;staticfiles&quot;]</span></code> が推奨されます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">django.core.files.storage.get_storage_class()</span></code> 関数は非推奨となりました。</p></li>
</ul>
</section>
</section>
</section>


          </div>
        </div>
      </div>
      
        
          <div class="yui-b" id="sidebar">
            
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">Django 4.2 リリースノート</a><ul>
<li><a class="reference internal" href="#python-compatibility">Python バージョン間の互換性</a></li>
<li><a class="reference internal" href="#what-s-new-in-django-4-2">Django 4.2 の新機能</a><ul>
<li><a class="reference internal" href="#psycopg-3-support">Psycopg 3 のサポート</a></li>
<li><a class="reference internal" href="#comments-on-columns-and-tables">カラムとテーブルにおけるコメント</a></li>
<li><a class="reference internal" href="#mitigation-for-the-breach-attack">BREACH 攻撃に対する緩和策</a></li>
<li><a class="reference internal" href="#in-memory-file-storage">インメモリファイルストレージ</a></li>
<li><a class="reference internal" href="#custom-file-storages">カスタムファイルストレージ</a></li>
<li><a class="reference internal" href="#minor-features">マイナーな機能</a><ul>
<li><a class="reference internal" href="#django-contrib-admin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.admin</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.auth</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-gis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.gis</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-postgres"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.postgres</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-sitemaps"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.sitemaps</span></code></a></li>
<li><a class="reference internal" href="#django-contrib-staticfiles"><code class="xref py py-mod docutils literal notranslate"><span class="pre">django.contrib.staticfiles</span></code></a></li>
<li><a class="reference internal" href="#database-backends">データベースバックエンド</a></li>
<li><a class="reference internal" href="#error-reporting">エラー報告</a></li>
<li><a class="reference internal" href="#forms">フォーム</a></li>
<li><a class="reference internal" href="#internationalization">国際化 (internationalization)</a></li>
<li><a class="reference internal" href="#logging">ロギング</a></li>
<li><a class="reference internal" href="#management-commands">管理コマンド</a></li>
<li><a class="reference internal" href="#migrations">マイグレーション</a></li>
<li><a class="reference internal" href="#models">モデル</a></li>
<li><a class="reference internal" href="#requests-and-responses">Request と Response</a></li>
<li><a class="reference internal" href="#tests">テスト</a></li>
<li><a class="reference internal" href="#utilities">ユーティリティ</a></li>
<li><a class="reference internal" href="#validators">バリデータ</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-changes-in-4-2">4.2 における後方互換性のない変更</a><ul>
<li><a class="reference internal" href="#database-backend-api">データベースバックエンド API</a></li>
<li><a class="reference internal" href="#dropped-support-for-mariadb-10-3">MariaDB 10.3 のサポートを終了しました</a></li>
<li><a class="reference internal" href="#dropped-support-for-mysql-5-7">MySQL 5.7 のサポートを終了しました</a></li>
<li><a class="reference internal" href="#dropped-support-for-postgresql-11">PostgreSQL 11 のサポートを終了しました</a></li>
<li><a class="reference internal" href="#setting-update-fields-in-model-save-may-now-be-required"><code class="docutils literal notranslate"><span class="pre">Model.save()</span></code> で <code class="docutils literal notranslate"><span class="pre">update_fields</span></code> の設定が必要になる場合があります</a></li>
<li><a class="reference internal" href="#dropped-support-for-raw-aggregations-on-mysql">MySQL での生の集計処理のサポートを廃止</a></li>
<li><a class="reference internal" href="#miscellaneous">その他</a></li>
</ul>
</li>
<li><a class="reference internal" href="#features-deprecated-in-4-2">4.2 で非推奨となった機能</a><ul>
<li><a class="reference internal" href="#index-together-option-is-deprecated-in-favor-of-indexes"><code class="docutils literal notranslate"><span class="pre">index_together</span></code> オプションは <code class="docutils literal notranslate"><span class="pre">indexes</span></code> を優先するため非推奨になりました。</a></li>
<li><a class="reference internal" href="#passing-encoded-json-string-literals-to-jsonfield-is-deprecated"><code class="docutils literal notranslate"><span class="pre">JSONField</span></code> に、エンコードされた JSON 文字列リテラルを渡すことは非推奨になりました</a></li>
<li><a class="reference internal" href="#id1">その他</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="4.2.1.html"
                          title="前の章へ">Django 4.2.1 リリースノート</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="4.1.13.html"
                          title="次の章へ">Django 4.1.13 リリースノート</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/releases/4.2.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
              <h3>Last update:</h3>
              <p class="topless">1月 22, 2025</p>
          </div>
        
      
    </div>

    <div id="ft">
      <div class="nav">
    &laquo; <a href="4.2.1.html" title="Django 4.2.1 リリースノート">previous</a>
     |
    <a href="index.html" title="リリースノート" accesskey="U">up</a>
   |
    <a href="4.1.13.html" title="Django 4.1.13 リリースノート">next</a> &raquo;</div>
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>